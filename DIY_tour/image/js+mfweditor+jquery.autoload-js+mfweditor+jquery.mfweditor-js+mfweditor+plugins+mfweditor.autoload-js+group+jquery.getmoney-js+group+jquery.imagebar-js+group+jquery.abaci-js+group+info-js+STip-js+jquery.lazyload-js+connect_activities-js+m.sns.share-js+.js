(function($){var autoload={css:function(files,options){this.fetch(files,function(data){if("css_list" in data){$.each(data.css_list,function(index,value){var element;if($.browser.msie){element=window.document.createStyleSheet(value);$(element).attr({media:"all"})}else{element=$("<link/>").attr({href:value,media:"all",rel:"stylesheet",type:"text/css"}).appendTo("head")}})}});return true},js:function(files,options){this.fetch(files,function(data){var resource={};if("js_list" in data){resource=data.js_list;$.each(data.js_list,function(index,value){$.ajax({url:value,dataType:"script",success:function(){for(var i in resource){if(value==resource[i]){resource.splice(i,1);i--}}if(!resource.length&&options.successCallback){options.successCallback()}},error:function(XMLHttpRequest,textStatus,errorThrown){if(console){console.log(XMLHttpRequest,textStatus,errorThrown)}}})})}});return true},findPath:function(baseFile){baseFile=baseFile.replace(/\./g,"\\.");var collection=$("script"),reg=eval("/^(.*)"+baseFile+"$/"),i,p;for(i=0;i<collection.length;i+=1){p=reg.exec(collection[i].src);if(null!==p){return p[1]}}return null},fetch:function(files,callback){var cssList=[],jsList=[];if(!$.isArray(files)){files=[files]}for(var i in files){if(~files[i].indexOf(".css")){cssList.push(files[i])}else{jsList.push(files[i])}}$.getJSON("/ajax/ajax_fetch_cssjs.php",{css_list:cssList,js_list:jsList},function(data){if(callback){callback(data)}})}};$.autoload={css:function(names,options){var cssPath=(undefined===options.cssPath)?"/css/":options.cssPath,i;options={cssPath:cssPath};if("string"===typeof names){names=[names]}for(i=0;i<names.length;i+=1){names[i]=options.cssPath+names[i]}autoload.css(names,options)},js:function(names,options){var i;options.jsPath=(undefined===options.jsPath)?"/js/":options.jsPath;if("string"===typeof names){names=[names]}for(i=0;i<names.length;i+=1){names[i]=options.jsPath+names[i]}autoload.js(names,options)},fetch:function(files,callback){autoload.fetch(files,callback)}}})(jQuery);(function(b){var a=window.console?window.console:{log:b.noop,error:function(d){b.error(d)}};function c(){this.controls={insertImage:{groupIndex:0,className:"t-image",visible:true,exec:function(f){var d=this;if(b.mfweditor.controls&&b.mfweditor.controls.image){b.mfweditor.controls.image.init(this,f)}else{if(b.mfweditor.autoload){b.mfweditor.autoload.js("mfweditor.compress.js",function(){d.controls.insertImage.exec.apply(d,[f])})}else{a.error("$.mfweditor.controls.image not defined. You need to include mfweditor.image.js file")}}},tags:["img"],text:"图片",tooltip:"添加图片"},insertWengImage:{groupIndex:0,className:"t-wengImage",visible:false,exec:function(f){var d=this;if(b.mfweditor.controls&&b.mfweditor.controls.wengImage){b.mfweditor.controls.wengImage.init(this,f)}else{if(b.mfweditor.autoload){b.mfweditor.autoload.js("mfweditor.weng.image.js",function(){d.controls.insertWengImage.exec.apply(d,[f])})}else{a.error("$.mfweditor.controls.wengImage not defined. You need to include mfweditor.weng.image.js file")}}},tags:["img"],text:"嗡嗡相册",tooltip:"添加嗡嗡相册图片"},insertVideo:{groupIndex:0,className:"t-video",visible:true,exec:function(f){var d=this;if(b.mfweditor.controls&&b.mfweditor.controls.video){b.mfweditor.controls.video.init(this,f)}else{if(b.mfweditor.autoload){b.mfweditor.autoload.js("mfweditor.video.js",function(){d.controls.insertVideo.exec.apply(d,[f])})}else{a.error("$.mfweditor.controls.link not defined. You need to include mfweditor.link.js file")}}},text:"视频",tooltip:"添加视频"},insertLink:{groupIndex:0,className:"t-link",visible:true,exec:function(f){var d=this;if(b.mfweditor.controls&&b.mfweditor.controls.link){b.mfweditor.controls.link.init(this,f)}else{if(b.mfweditor.autoload){b.mfweditor.autoload.js("mfweditor.link.js",function(){d.controls.insertLink.exec.apply(d,[f])})}else{a.error("$.mfweditor.controls.link not defined. You need to include mfweditor.link.js file")}}},tags:["a"],text:"链接",tooltip:"添加链接"},insertEmotion:{groupIndex:0,className:"t-emotion",visible:true,exec:function(f){var d=this;if(b.mfweditor.controls&&b.mfweditor.controls.emotion){b.mfweditor.controls.emotion.init(this,f)}else{if(b.mfweditor.autoload){b.mfweditor.autoload.js("mfweditor.emotion.js",function(){d.controls.insertEmotion.exec.apply(d,[f])})}else{a.error("$.mfweditor.controls.emotion not defined. You need to include mfweditor.link.js file")}}},text:"表情",tooltip:"添加表情"},callName:{groupIndex:1,className:"t-callname",visible:true,exec:function(f){var d=this;if(b.mfweditor.controls&&b.mfweditor.controls.callname){b.mfweditor.controls.callname.init(this,f)}else{if(b.mfweditor.autoload){b.mfweditor.autoload.js("mfweditor.callname.js",function(){d.controls.callName.exec.apply(d,[f])})}else{a.error("$.mfweditor.controls.callname not defined. You need to include mfweditor.link.js file")}}},text:"点名",tooltip:"点名"},saveContent:{groupIndex:2,className:"t-save",visible:true,exec:function(){var d=this;d.saveContent()},text:"保存草稿",tooltip:"保存草稿"},clearContent:{groupIndex:2,className:"t-clear",visible:true,exec:function(){var d=this;d.clearSaveContent()},text:"清空草稿",tooltip:"清空草稿"}};this.defaults={html:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/></head><body></body></html>',debug:false,controls:{},events:{},css:"",autoGrow:true,autoSave:true,autoSaveTime:30000,formHeight:270,formWidth:440,initialContent:"",maxHeight:530,maxLength:0,toolbarHtml:'<div class="mfweditor-toolbar"></div>',toolbarTipHtml:'<div class="mfweditor-toolbar-tip"></div>',toolbarGroupHtml:'<ul class="mfweditor-toolbar-group"></ul>',replaceDivWithP:true,removeUnwantedBr:true,removeUnusedControls:false,initialMinHeight:null,plugins:{autoload:true,removeFormat:{removeMsWordMarkup:true}}};this.availableControlProperties=["groupIndex","className","object","visible","exec","hotkey","command","custom","tags","text","tooltip"];this.editor=null;this.editorDoc=null;this.editorDialog=null;this.uploadImages=null;this.element=null;this.options={};this.original=null;this.savedRange=null;this.timers=[];this.validKeyCodes=[8,9,13,16,17,18,19,20,27,33,34,35,36,37,38,39,40,45,46];this.isDestroyed=false;this.dom={ie:{parent:null},w3c:{parent:null}};this.dom.parent=this;this.dom.ie.parent=this.dom;this.dom.w3c.parent=this.dom;this.ui={};this.ui.self=this;this.ui.toolbar=null;this.ui.toolbarTip=null;this.ui.initialHeight=null;this.ui.dialogX=null;this.ui.dialogY=null;this.dom.getAncestor=function(d,f){f=f.toLowerCase();while(d&&typeof d.tagName!="undefined"&&"body"!==d.tagName.toLowerCase()){if(f===d.tagName.toLowerCase()){return d}d=d.parentNode}if(!d.tagName&&(d.previousSibling||d.nextSibling)){if(d.previousSibling){if(d.previousSibling.tagName.toLowerCase()==f){return d.previousSibling}}if(d.nextSibling){if(d.nextSibling.tagName.toLowerCase()==f){return d.nextSibling}}}return null};this.dom.getElement=function(f){var d=this;f=f.toLowerCase();if(window.getSelection){return d.w3c.getElement(f)}else{return d.ie.getElement(f)}};this.dom.ie.getElement=function(j){var h=this.parent,g=h.parent.getInternalSelection(),d=g.createRange(),f;if("Control"===g.type){if(1===d.length){f=d.item(0)}else{return null}}else{f=d.parentElement()}return h.getAncestor(f,j)};this.dom.w3c.getElement=function(h){var g=this.parent,d=g.parent.getInternalSelection(),f;if(!d){return null}f=d.commonAncestorContainer;if(3===f.nodeType){f=f.parentNode}if(f===d.startContainer){f=f.childNodes[d.startOffset]}if(!f.tagName&&(f.previousSibling||f.nextSibling)){if(f.previousSibling){if(f.previousSibling.tagName.toLowerCase()==h){return f.previousSibling}}if(f.nextSibling){if(f.nextSibling.tagName.toLowerCase()==h){return f.nextSibling}}}return g.getAncestor(f,h)};this.ui.initFrame=function(){var d=this.self,g,h,f;d.ui.appendControls();d.element.append(d.ui.toolbar).append(b("<div><!-- --></div>").css({clear:"both"})).append(b('<div class="mfweditor-wrap"></div>').append(d.editor));d.editorDoc=d.innerDocument();if(d.isDestroyed){return null}d.ui.designMode();d.editorDoc.open();d.editorDoc.write(d.wrapInitialContent());d.editorDoc.close();b.mfweditor.plugin.bind(d);b(d.editorDoc).trigger("initFrame.mfweditor");b(d.original).focus(function(){if(b(this).filter(":visible").length===0){return}d.ui.focus()});b(d.editorDoc).keydown(function(j){var k;if(j.keyCode===8){k=/^<([\w]+)[^>]*>(<br\/?>)?<\/\1>$/;if(k.test(d.getContent())){j.stopPropagation();return false}}d.editorDoc.rememberCommand=false;return true});if(d.options.plugins.removeFormat.removeMsWordMarkup){b(d.editorDoc).bind("keyup",function(j){if(j.ctrlKey||j.metaKey){if(86===j.keyCode){if(b.mfweditor.removeFormat){if("object"===typeof(d.options.plugins.removeFormat.removeMsWordMarkup)){b.mfweditor.removeFormat.run(d,{rules:{msWordMarkup:d.options.plugins.removeFormat.removeMsWordMarkup}})}else{b.mfweditor.removeFormat.run(d,{rules:{msWordMarkup:{enabled:true}}})}}}}})}if(d.initialContent.length===0){if("function"===typeof(d.options.initialContent)){d.setContent(d.options.initialContent())}else{d.setContent(d.options.initialContent)}}if(d.options.autoGrow){if(d.options.initialMinHeight!=null){d.ui.initialHeight=d.options.initialMinHeight}else{d.ui.initialHeight=b(d.editorDoc).height()}b(d.editorDoc.body).css("border","1px solid white");h=function(){d.ui.grow()};b(d.editorDoc).keyup(h).click(h);b(d.editorDoc).bind("editorRefresh.mfweditor",h);d.ui.grow()}if(d.options.css&&String===d.options.css.constructor){b.autoload.fetch(d.options.css,function(j){if("css_list" in j){b.each(j.css_list,function(k,l){if(b.browser.msie){g=d.editorDoc.createStyleSheet(l);b(g).attr({media:"all"})}else{g=b("<link/>").attr({href:l,media:"all",rel:"stylesheet",type:"text/css"});b(d.editorDoc).find("head").append(g)}})}})}if(d.options.maxLength>0){b(d.editorDoc).keydown(function(j){if(b(d.editorDoc).text().length>=d.options.maxLength&&b.inArray(j.which,d.validKeyCodes)===-1){j.preventDefault()}})}b.each(d.options.events,function(j,k){b(d.editorDoc).bind(j+".mfweditor",function(l){k.apply(d.editorDoc,[l,d])})});if(b.browser.msie){b(d.editorDoc).bind("beforedeactivate.mfweditor",function(){d.savedRange=d.getInternalRange()})}else{b(d.editorDoc).bind("blur.mfweditor",function(){d.savedRange=d.getInternalRange()})}b(d.editorDoc).bind("click.mfweditor",function(){if(d.editorDialog){d.editorDialog.close();d.editorDialog=null}});b(d.original).trigger("ready.mfweditor",[d.editorDoc,d])};this.ui.designMode=function(){var f=3,d=this.self,g;g=function(h){if("on"===d.editorDoc.designMode){if(d.timers.designMode){window.clearTimeout(d.timers.designMode)}if(d.innerDocument()!==d.editorDoc){d.ui.initFrame()}return}try{d.editorDoc.designMode="on"}catch(j){}h-=1;if(h>0){d.timers.designMode=window.setTimeout(function(){g(h)},100)}};g(f)};this.ui.grow=function(){var f=this.self,j=b(f.editorDoc.body),h=b.browser.msie?j[0].scrollHeight:j.height()+2,g=f.ui.initialHeight,d=Math.max(h,g);d=Math.min(d,f.options.maxHeight);f.editor.attr("scrolling",d<f.options.maxHeight?"no":"auto");j.css("overflow",d<f.options.maxHeight?"hidden":"");f.editor.get(0).height=d;return f};this.ui.appendControls=function(){var m=this,h=this.self,g=h.parseControls(),d=[],f={},j,k,l=function(o,n){if(!n.visible){return}m.appendItem(o,n).appendTo(j)};b.each(g,function(o,p){var n="empty";if(undefined!==p.groupIndex){if(""===p.groupIndex){n="empty"}else{n=p.groupIndex}}if(undefined===f[n]){d.push(n);f[n]={}}f[n][o]=p});d.sort(function(o,n){if("number"===typeof(o)&&typeof(o)===typeof(n)){return(o-n)}else{o=o.toString();n=n.toString();if(o>n){return 1}if(o===n){return 0}return -1}});h.ui.toolbarTip=b(h.options.toolbarTipHtml).appendTo(h.ui.toolbar);for(k=0;k<d.length;k+=1){j=b(h.options.toolbarGroupHtml).appendTo(h.ui.toolbar);b.each(f[d[k]],l)}};this.ui.appendItem=function(f,j){var d=this.self,g=j.className||j.command||f||"empty",h=j.tooltip||j.command||f||"",k=j.text||"未知";return b('<li role="menuitem">'+(k)+"</li>").addClass(g).attr("title",h).hover(this.addHoverClass,this.removeHoverClass).click(function(m){if(b(this).hasClass("disabled")){return false}var l=b(m.target);d.triggerControl.apply(d,[f,j,l]);this.blur();d.ui.returnRange();d.ui.focus();return true})};this.ui.withoutCss=function(){var d=this.self;if(b.browser.mozilla){try{d.editorDoc.execCommand("styleWithCSS",false,false)}catch(g){try{d.editorDoc.execCommand("useCss",false,true)}catch(f){}}}return d};this.ui.addHoverClass=function(){b(this).addClass("hover")};this.ui.removeHoverClass=function(){b(this).removeClass("hover")};this.ui.focus=function(){var d=this.self;d.editor.get(0).contentWindow.focus();return d};this.ui.returnRange=function(){var d=this.self,f;if(d.savedRange!==null){if(window.getSelection){f=window.getSelection();if(f.rangeCount>0){f.removeAllRanges()}try{f.addRange(d.savedRange)}catch(g){a.error(g)}}else{if(window.document.createRange){window.getSelection().addRange(d.savedRange)}else{if(window.document.selection){d.savedRange.select()}}}d.savedRange=null}};this.init=function(h,g){var f=this,k=b(h).closest("form"),l=(b(h).attr("width")||b(h).width()||0),j=(b(h).attr("height")||b(h).height()||0);this.options=this.extendOptions(g);this.original=h;this.ui.toolbar=b(this.options.toolbarHtml);if(b.browser.msie&&parseInt(b.browser.version,10)<9){this.options.autoGrow=false}if(l===0&&h.cols){l=(h.cols*8)+21}if(j===0&&h.rows){j=(h.rows*16)+16}this.editor=b("<iframe></iframe>").attr("frameborder","0");this.editor.css({minHeight:(j-6).toString()+"px",width:(l>50)?(l-6).toString()+"px":""});if(b.browser.msie&&parseInt(b.browser.version,10)<7){this.editor.css("height",j.toString()+"px")}if(h.id){var d=h.id+"-mfwediter-iframe";if(!document.getElementById(d)){this.editor.attr("id",d)}}this.editor.attr("tabindex",b(h).attr("tabindex"));this.element=b("<div/>").addClass("mfweditor");this.element.css({width:(l>0)?l.toString()+"px":"100%"});b(h).hide().before(this.element);this.initialContent=b(h).val();this.ui.initFrame();if(this.options.autoSave){f.timers.autoSave=window.setInterval(function(){f.autoSaveFunc()},f.options.autoSaveTime)}b(f.editorDoc).keyup(function(){f.syncContent()}).mousedown(function(){f.syncContent()});k.bind("reset.mfweditor",function(){f.resetFunc()})};this.destroy=function(){this.isDestroyed=true;var d,f=this.element.closest("form");for(d=0;d<this.timers.length;d+=1){window.clearTimeout(this.timers[d])}f.unbind(".mfweditor");this.element.remove();b.removeData(this.original,"mfweditor");b(this.original).show();return this};this.innerDocument=function(){var d=this.editor.get(0);if(d.nodeName.toLowerCase()==="iframe"){if(d.contentDocument){return d.contentDocument}else{if(d.contentWindow){return d.contentWindow.document}}if(this.isDestroyed){return null}}return d};this.wrapInitialContent=function(){var d=this.initialContent,f=d.match(/<\/?p>/gi);if(!f){return"<p>"+d+"</p>"}return d};this.parseControls=function(){var d=this;b.each(this.options.controls,function(g,f){b.each(f,function(h){if(-1===b.inArray(h,d.availableControlProperties)){throw g+'["'+h+'"]: property "'+h+'" not exist in mfweditor.availableControlProperties'}})});if(this.options.parseControls){return this.options.parseControls.call(this)}return this.options.controls};this.extendOptions=function(f){var d={};if("object"===typeof f.controls){d=f.controls;delete f.controls}f=b.extend(true,{},this.defaults,f);f.controls=b.extend(true,{},d,this.controls,d);if(f.removeUnusedControls){b.each(f.controls,function(g){if(!d[g]){delete f.controls[g]}})}return f};this.setContent=function(d){this.editorDoc.body.innerHTML=d;return this};this.triggerControl=function(g,k,f){var h=k.command||g,d=k["arguments"]||[];if(k.exec){k.exec.apply(this,[f])}else{this.ui.focus();this.ui.withoutCss();try{this.editorDoc.execCommand(h,false,d)}catch(j){a.error(j)}}};this.autoSaveFunc=function(){this.saveContent()};this.syncContent=function(){if(this.original){var f,d;f=this.getContent();if(this.options.removeUnwantedBr){f=f.replace(/<br\/?>$/,"")}if(this.options.replaceDivWithP){d=b("<div/>").addClass("temp").append(f);d.children("div").each(function(){var h=b(this),j=h.find("p"),g;if(0===j.length){j=b("<p></p>");if(this.attributes.length>0){for(g=0;g<this.attributes.length;g+=1){j.attr(this.attributes[g].name,h.attr(this.attributes[g].name))}}j.append(h.html());h.replaceWith(j)}});f=d.html()}b(this.original).val(f).text(f)}return this};this.resetFunc=function(){this.setContent(this.options.initialContent)};this.clearSaveContent=function(){if(this.original){if(this.options.events&&this.options.events.clear){this.options.events.clear.call(this)}}};this.saveContent=function(){if(this.original){var f,d;f=this.getContent();if(this.options.removeUnwantedBr){f=f.replace(/<br\/?>$/,"")}if(this.options.replaceDivWithP){d=b("<div/>").addClass("temp").append(f);d.children("div").each(function(){var h=b(this),j=h.find("p"),g;if(0===j.length){j=b("<p></p>");if(this.attributes.length>0){for(g=0;g<this.attributes.length;g+=1){j.attr(this.attributes[g].name,h.attr(this.attributes[g].name))}}j.append(h.html());h.replaceWith(j)}});f=d.html()}b(this.original).val(f).text(f);if(this.options.events&&this.options.events.save){this.options.events.save.call(this)}}return this};this.getInternalRange=function(){var d=this.getInternalSelection();if(!d){return null}if(d.rangeCount&&d.rangeCount>0){return d.getRangeAt(0)}else{if(d.createRange){return d.createRange()}}return null};this.getRange=function(){var d=this.getSelection();if(!d){return null}if(d.rangeCount&&d.rangeCount>0){return d.getRangeAt(0)}else{if(d.createRange){return d.createRange()}}return null};this.getRangeText=function(){var d=this.getInternalRange();if(d.toString){d=d.toString()}else{if(d.text){d=d.text}}return d},this.getInternalSelection=function(){if(this.editor.get(0).contentWindow){if(this.editor.get(0).contentWindow.getSelection){return this.editor.get(0).contentWindow.getSelection()}if(this.editor.get(0).contentWindow.selection){return this.editor.get(0).contentWindow.selection}}if(this.editorDoc.getSelection){return this.editorDoc.getSelection()}if(this.editorDoc.selection){return this.editorDoc.selection}return null};this.insertHtml=function(d){var h=this,g,f;if(!d||d.length===0){return this}if(navigator.userAgent.match(/Trident\/7\./)){b.browser.msie=true}if(b.browser.msie){this.ui.focus();this.editorDoc.execCommand("insertImage",false,"#jmfweditor");g=this.getElementByAttributeValue("img","src","#jmfweditor");if(g){b(g).replaceWith(d)}}else{if(b.browser.mozilla){if(1===b(d.replace(/\s/g,"&nbsp;")).length){f=this.getInternalRange();f.deleteContents();f.insertNode(b(d).get(0))}else{this.editorDoc.execCommand("insertHTML",false,d)}}else{if(!this.editorDoc.execCommand("insertHTML",false,d)){this.editor.focus();this.editorDoc.execCommand("insertHTML",false,d)}}}if(h.options.autoGrow){h.ui.grow()}};this.getElementByAttributeValue=function(g,d,h){var f,k,j=this.editorDoc.getElementsByTagName(g);for(f=0;f<j.length;f+=1){k=j[f].getAttribute(d);if(b.browser.msie){k=k.substr(k.length-h.length)}if(k===h){return j[f]}}return false};this.getContent=function(){return this.events.filter("getContent",this.editorDoc.body.innerHTML)};this.events={_events:{},bind:function(d,f){if(typeof(this._events.eventName)!=="object"){this._events[d]=[]}this._events[d].push(f)},trigger:function(d,f){if(typeof(this._events.eventName)==="object"){var g=this.editor;b.each(this._events[d],function(j,h){if(typeof(h)==="function"){h.apply(g,f)}})}},filter:function(d,h){if(typeof(this._events[d])==="object"){var g=this.editor,f=Array.prototype.slice.call(arguments,1);b.each(this._events[d],function(l,j){if(typeof(j)==="function"){h=j.apply(g,f)}})}return h}}}b.mfweditor={init:function(f,d){return f.each(function(){var g=b.extend(true,{},d),h;if(("textarea"!==this.nodeName.toLowerCase())||b(this).data("mfweditor")){return}h=new c();h.init(this,g);b.data(this,"mfweditor",h)})},destroy:function(d){return d.each(function(){var f=b(this).data("mfweditor");if(!f){return this}f.destroy()})},document:function(d){var f=d.data("mfweditor");if(!f){return undefined}return b(f.editorDoc)},getDialog:function(d){var f=d.data("mfweditor");if(!f){return undefined}return b(f.editorDialog)},getFocus:function(d){return d.each(function(){var f=b(this).data("mfweditor");if(!f){return this}f.ui.focus()})},addControl:function(f,d,g){return f.each(function(){var k=b(this).data("mfweditor"),j={},h;if(!k){return this}j[d]=b.extend(true,{visible:true,custom:true},g);b.extend(true,k.options.controls,j);h=b(this.options.toolbarHtml);k.ui.toolbar.replaceWith(h);k.ui.toolbar=h;k.ui.appendControls()})},insertHtml:function(f,d){return f.each(function(){var g=b(this).data("mfweditor");if(!g){return this}g.insertHtml(d)})},getContent:function(d){var f=d.data("mfweditor");if(!f){return undefined}return f.getContent()},setContent:function(f,d){return f.each(function(){var g=b(this).data("mfweditor");if(!g){return this}g.setContent(d)})},resetContent:function(d){return d.each(function(){var f=b(this).data("mfweditor");if(!f){return this}f.resetFunc()})},getSelection:function(d){var f=d.data("mfweditor");if(!f){return undefined}return f.getRangeText()},save:function(d){return d.each(function(){var f=b(this).data("mfweditor");if(!f){return this}f.saveContent()})},selectAll:function(f){var h=f.data("mfweditor"),d,j,g;if(!h){return this}d=h.editorDoc.body;if(window.getSelection){g=h.getInternalSelection();g.selectAllChildren(d)}else{j=d.createTextRange();j.moveToElementText(d);j.select()}},plugin:{listeners:{},bind:function(f){var d=this;b.each(this.listeners,function(k,g){var h,j;for(h=0;h<g.length;h+=1){j=d.parseName(g[h]);b(f.editorDoc).bind(k+".mfweditor",{plugin:j},function(l){b.mfweditor[l.data.plugin.name][l.data.plugin.method].apply(b.mfweditor[l.data.plugin.name],[f])})}})},exists:function(d){var f;if("string"!==typeof(d)){return false}f=this.parseName(d);if(!b.mfweditor[f.name]||!b.mfweditor[f.name][f.method]){return false}return true},listen:function(g,d){var f;f=this.parseName(d);if(!b.mfweditor[f.name]||!b.mfweditor[f.name][f.method]){return false}if(!this.listeners[g]){this.listeners[g]=[]}this.listeners[g].push(d);return true},parseName:function(d){var f;if("string"!==typeof(d)){return false}f=d.split(".");if(2>f.length){return false}return{name:f[0],method:f[1]}},register:function(d){if(!d.name){a.error("Plugin name is missing")}b.each(b.mfweditor,function(f){if(f===d.name){a.error("Plugin with name '"+d.name+"' was already registered")}});b.mfweditor[d.name]=d;return true}}};b.mfweditor.dialog=function(k,g){var j=g.theme?g.theme:"default",h=new b.mfweditor.dialog.createDialog(j),f=this,d=b(f);this.options={modal:false,draggable:false,content:"",zIndex:2000,left:0,top:0,width:600,open:false,close:false};this.isOpen=false;b.extend(this.options,g);this.object=h;this.popkey=null;this.open=function(){this.isOpen=true;h.init.apply(f,[]);var l=h.show.apply(f,[]);d.trigger("afterOpen",[l])};this.show=function(){this.isOpen=true;d.trigger("beforeShow");var l=h.show.apply(f,[]);d.trigger("afterShow")};this.hide=function(){this.isOpen=false;d.trigger("beforeHide");var l=h.hide.apply(f,[]);d.trigger("afterHide",[l])};this.close=function(){this.isOpen=false;var l=h.hide.apply(f,[]);d.trigger("beforeClose",[l]);h.destroy.apply(f,[]);d.trigger("afterClose",[l])};if(this.options.open){d.bind("afterOpen",this.options.open)}if(this.options.close){d.bind("afterClose",this.options.close)}return this};b.extend(true,b.mfweditor.dialog,{_themes:{},_theme:"",register:function(d,f){b.mfweditor.dialog._themes[d]=f},deregister:function(d){delete b.mfweditor.dialog._themes[d]},createDialog:function(d){return new (b.mfweditor.dialog._themes[d])},getDimensions:function(){var f=document.body.scrollWidth,d=document.body.scrollHeight;if(b.browser.opera){d=Math.max(b(document).height(),b(window).height(),document.documentElement.clientHeight)}return[f,d]}});b(function(){b.mfweditor.dialog.register("default",function(){var d=this;this.$dialog=null;this.init=function(){var f=this.options.content;if(typeof f==="object"){if(typeof f.html==="function"){f=f.html()}else{if(typeof f.toString==="function"){f=f.toString()}}}d.$dialog=b('<div class="mfweditor-pop"></div>').css({"z-index":this.options.zIndex,position:"absolute"});var g=b('<div class="d-cont">'+f+"</div>");d.$dialog.append(g).hide();b("body").append(d.$dialog);d.$dialog.css({left:this.options.left,top:this.options.top});return d.$dialog};this.show=function(){if(this.options.modal){var f=b.mfweditor.dialog.getDimensions(),g=b('<div class="mfweditor-shade"></div>').css({width:f[0],height:f[1],"z-index":this.options.zIndex-1});d.$dialog.after(g);b(window).bind("resize",function(){var h=b.mfweditor.dialog.getDimensions();g.css({width:h[0],height:h[1]})})}d.$dialog.show();return d.$dialog};this.hide=function(){d.$dialog.hide();return d.$dialog};this.destroy=function(){if(this.options.modal){d.$dialog.next().remove()}b(window).unbind("resize");d.$dialog.remove();return d.$dialog}});b.mfweditor.dialog.register("float",function(){var d=this;this.$dialog=null;this.init=function(){var f=this.options.content;if(typeof f==="object"){if(typeof f.html==="function"){f=f.html()}else{if(typeof f.toString==="function"){f=f.toString()}}}d.$dialog=b('<div class="mfweditor-pop"></div>').css({"z-index":this.options.zIndex,position:"fixed",width:this.options.width});if(b.browser.msie&&parseInt(b.browser.version,10)<7){d.$dialog.css("position","absolute");b(window).scroll(function(){})}var g=b('<div class="d-cont">'+f+"</div>");d.$dialog.append(g).hide();b("body").append(d.$dialog);d.$dialog.css({left:((b(window).width()-d.$dialog.width())/2),top:(b.browser.msie&&parseInt(b.browser.version,10)<7)?(b("html").scrollTop()+((b(window).height()-d.$dialog.height())/3)):((b(window).height()-d.$dialog.height())/3)});b(window).bind("resize",function(){d.$dialog.css({left:((b(window).width()-d.$dialog.width())/2),top:(b.browser.msie&&parseInt(b.browser.version,10)<7)?(b("html").scrollTop()+((b(window).height()-d.$dialog.height())/3)):((b(window).height()-d.$dialog.height())/3)})});if(b.browser.msie&&parseInt(b.browser.version,10)<7){b(window).bind("scroll",function(){d.$dialog.css({top:b("html").scrollTop()+((b(window).height()-d.$dialog.height())/3)})})}return d.$dialog};this.show=function(){if(this.options.modal){b("body").css("overflow","hidden");var f=b.mfweditor.dialog.getDimensions(),g=b('<div class="mfweditor-shade"></div>').css({width:f[0],height:f[1],"z-index":this.options.zIndex-1});d.$dialog.after(g);b(window).bind("resize",function(){var h=b.mfweditor.dialog.getDimensions();g.css({width:h[0],height:h[1]})})}d.$dialog.show();return d.$dialog};this.hide=function(){d.$dialog.hide();return d.$dialog};this.destroy=function(){if(this.options.modal){b("body").css("overflow","auto");d.$dialog.next().remove()}b(window).unbind("resize");d.$dialog.remove();return d.$dialog}});b.mfweditor.dialog.register("addp",function(){var d=this;this.$dialog=null;this.init=function(){var g=this.options.content;if(typeof g==="object"){if(typeof g.html==="function"){g=g.html()}else{if(typeof g.toString==="function"){g=g.toString()}}}d.$dialog=b('<div style="display:none">                                    <div class="viewer-layer" style="position:fixed; _position:absolute"></div>                                    <div class="popup-box pop-addp _j_popbox" style="margin:0">                                        <a class="close-btn _j_close" href="javascript:void(0);"><i></i></a>                                        <div class="pop-ctn"><p class="hd _j_title">添加照片</p><div class="_j_content" style="background:#fff">'+g+"</div></div>                                    </div>                                </div>");b("body").append(d.$dialog);var f=d.$dialog.find("._j_popbox");f.css({left:((b(window).width()-f.width())/2),top:(b.browser.msie&&parseInt(b.browser.version,10)<7)?(b("html").scrollTop()+((b(window).height()-460)/3)):((b(window).height()-460)/3)});b(window).bind("resize",function(){f.css({left:((b(window).width()-f.width())/2),top:(b.browser.msie&&parseInt(b.browser.version,10)<7)?(b("html").scrollTop()+((b(window).height()-460)/3)):((b(window).height()-460)/3)})});if(b.browser.msie&&parseInt(b.browser.version,10)<7){b(window).bind("scroll",function(){f.css({top:b("html").scrollTop()+((b(window).height()-460)/3)})})}f.delegate("._j_close","click",b.proxy(function(h){h.preventDefault();d.destroy.call(this)},this));return d.$dialog};this.show=function(){d.$dialog.show();return d.$dialog};this.hide=function(){d.$dialog.hide();return d.$dialog};this.destroy=function(){if(this.options.modal){b("body").css("overflow","auto")}b(window).unbind("resize");if(d.$dialog){d.$dialog.remove()}return d.$dialog}})});b.fn.mfweditor=function(g){var d=arguments,f;if("undefined"!==typeof b.mfweditor[g]){d=Array.prototype.concat.call([d[0]],[this],Array.prototype.slice.call(d,1));return b.mfweditor[g].apply(b.mfweditor,Array.prototype.slice.call(d,1))}else{if("object"===typeof g||!g){Array.prototype.unshift.call(d,this);return b.mfweditor.init.apply(b.mfweditor,d)}else{if(b.mfweditor.plugin.exists(g)){f=b.mfweditor.plugin.parseName(g);d=Array.prototype.concat.call([d[0]],[this],Array.prototype.slice.call(d,1));return b.mfweditor[f.name][f.method].apply(b.mfweditor[f.name],Array.prototype.slice.call(d,1))}else{a.error("Method '"+g+"' does not exist in mfweditor!")}}}}})(jQuery);(function(b){if(undefined===b.mfweditor){throw"mfweditor.autoload.js depends on $.mfweditor"}if(undefined===b.autoload){throw"mfweditor.autoload.js depends on $.autoload"}var a={name:"autoload",version:"",defaults:{cssPath:"",jsPath:"/js/mfweditor/plugins/"},options:{},css:function(c){b.autoload.css(c,this.options)},js:function(d,c){b.autoload.js(d,{jsPath:this.options.jsPath,successCallback:c})},init:function(d){if(!d.options.plugins[this.name]){return true}var c;this.options=b.extend(true,this.defaults,d.options.plugins[this.name]);if(this.options.css){for(c=0;c<this.options.css.length;c+=1){this.css(this.options.css[c])}}}};b.mfweditor.plugin.register(a);b.mfweditor.plugin.listen("initFrame","autoload.init")})(jQuery);(function(a){a.fn.getMoney=function(){return this.each(function(){jQuery(this).click(function(g){var d=g.pageX-5+"px";var b=g.pageY-5+"px";var h=g.pageY-50+"px";var c=jQuery(this).attr("money")||"0";var f=jQuery(this).attr("url")||"";if(f!=""){a.get(f,function(){})}jQuery(this).fadeOut(700,function(){jQuery("<div/>").appendTo(jQuery("body")).addClass("money_t").css({position:"absolute",top:b,left:d}).html(c).animate({top:h},{duration:1000,complete:function(){jQuery(this).remove()}})})})})}})(jQuery);(function($){$.fn.imgMenu=function(options){var defaults={color:"",border:"",backgroundColor:"",control:[{cls:"btn_share_qzone",fn:function(url,obj){var share_key="qz";if("undefined"!=typeof(share_type)&&"undefined"!=typeof(share_op)){var share_key=share_key+"_"+share_type+"_"+share_op}eval(sns_share_show(share_key,share_title,share_content,share_url,url))}},{cls:"btn_share_weibo",fn:function(url,obj){var share_key="wb";if("undefined"!=typeof(share_type)&&"undefined"!=typeof(share_op)){var share_key=share_key+"_"+share_type+"_"+share_op}eval(sns_share_show(share_key,share_title,share_content,share_url,url))}},{cls:"btn_share_renren",fn:function(url,obj){var share_key="rr";if("undefined"!=typeof(share_type)&&"undefined"!=typeof(share_op)){var share_key=share_key+"_"+share_type+"_"+share_op}eval(sns_share_show(share_key,share_title,share_content,share_url,url))}},{cls:"btn_share_qtt",fn:function(url,obj){var share_key="qt";if("undefined"!=typeof(share_type)&&"undefined"!=typeof(share_op)){var share_key=share_key+"_"+share_type+"_"+share_op}eval(sns_share_show(share_key,share_title,share_content,share_url,url))}},{cls:"btn_pic_s",fn:function(url,obj,img){obj.mTip(scope.introtmp,'一句话评论：<textarea style="width:250px"></textarea><input type="button" class="btn_orange" value="确认"/>',"bottom").data("mtip").find("div.eject").css("width",270).find("input.btn_orange").click(function(){var _content=jQuery(this).prev().val();var _intro=scope.introtmp;jQuery(obj).mTipHide();mTinyAlert("分享中.....");jQuery.getJSON("/weng/share.php",{action:"sharepic",sharelink:scope.linktmp,reply:_content,urlpic:url,intro:_intro,articleid:scope.aidtmp,atuid:scope.atuid,tag:scope.mddname},function(d){if(d.ret==1){mTinyAlert("分享成功！")}else{majaxerr(d)}})})}},{cls:"btn_pic_r",fn:function(url,obj,img){if($("#pnl_pop_reply").size()>0){$("body").data("pop_reply_data",{owner:img.parents("div.a_con_text").attr("owner"),qpicflg:img.parents("div.a_con_text").attr("ownerid"),qpicalbum:img.attr("album_id"),qpicurl:url});if("function"==typeof show_pop_reply){show_pop_reply("quote_pic")}}else{jQuery("#qpicflg").val(img.parents("div.a_con_text").attr("ownerid"));jQuery("#qpicalbum").val(img.attr("album_id"));jQuery("#qpicurl").val(url);jQuery("#qiid").val("");jQuery(document).scrollTop(jQuery(document).height());$("#content").mfweditor("insertHtml","回复"+img.parents("div.a_con_text").attr("owner")+"的图片：")}}},{cls:"btn_pic_f",fn:function(url,obj,img){$.post("/plan/ajax.php?s=addFav",{id:scope.aidtmp,subtype:0,type:3,content:img.attr("src")},function(d){var pos=$(obj).offset();if(d.ret==-1){majaxerr(d)}else{var tip=$("<div/>").html($("#tpl_addtoplan_succ").html()).appendTo($("body")).css({top:(pos.top+20)+"px",left:(pos.left)+"px",position:"absolute"});setTimeout(function(){tip.animate({opacity:0},2000,function(){$(this).remove()})},3000)}},"json")}}],showReply:true};var options=$.extend(defaults,options);return this.each(function(){var _src=jQuery(this).attr("src");if(jQuery(this).hasClass("_j_filter_bar")){return}if(!/^.+\.mafengwo\.net/.test(_src)){return}if(/^.+\.mafengwo.net\/images\/i\//.test(_src)){return}if(/^.+\.mafengwo.net\/images\/sys\//.test(_src)){return}var obj=jQuery(this);obj.hover(function(){if(jQuery(this).data("menu")&&!jQuery(this).data("menu").is(":visible")){jQuery(this).data("menu").show()}else{var menu=jQuery("<div/>").appendTo(jQuery("body")).css({position:"absolute",top:obj.offset().top,left:obj.offset().left});for(var i=0;i<options.control.length;i++){if((options.control[i].cls=="btn_pic_r"&&options.showReply)||(options.control[i].cls!="btn_pic_r")){var crl=jQuery('<input type="button"/>').appendTo(menu).addClass(options.control[i].cls);crl.data("fn",options.control[i].fn);crl.click(function(){jQuery(this).data("fn")(obj.attr("src"),jQuery(this),obj)})}}jQuery(this).data("menu",menu);menu.hover(function(){jQuery(this).show()},function(){jQuery(this).hide()})}},function(){if(jQuery(this).data("menu")&&jQuery(this).data("menu").remove){jQuery(this).data("menu").hide()}}).css({display:"block"})})}})(jQuery);(function(a){var b=function(d,c){this.$element=a(d);this.breads=this.breadsoffset=this.baseTop=91;this.$scrollElement=a(window).bind("scroll",a.proxy(this.process,this));this.lastPosition=0;this.hideOffset=a(".post_side").height();this.timeout=0;this.throttleLock=0;this.breadMaxCount=5;this.replyOffset=a(".reply_input").offset().top;this.rightOffset=a(".post_side").height()-300;this.titleVisible=false;this.showTimeBread=0;this.showTimeFlag=false;this.prevBread=0;this.nextBread=0;this.winHeight=a(window).height();this.bottomNumber=0;this.flags=this.changes=this.direction=this.$plainBreads=this.$topBreads=this.$bottomBreads=null;this.hoverBread=null;this.fresh();this.paint();this.bind();this.process()};b.prototype.fresh=function(){var d=this;d.breadsoffset=a([]);d.breads=[];d.flags=[];d.direction=[];d.hangings=[];d.changes=[];var c=d.$element.find(".item");c.map(function(){var f=a(this);var g=f.data("offset");return([[g*1+300,f]])||null}).sort(function(g,f){return g[0]-f[0]}).each(function(f){this[1].attr("data-sort",f);d.flags.push(2);d.breads.push(this[1].clone());d.breadsoffset.push(this[0])})};b.prototype.paint=function(){a('<div class="extract extract-up" data-cs-t="ginfo_kw_hotel"></div>').appendTo(".post_wrap");a('<div class="extract extract-down" data-cs-t="ginfo_kw_hotel"></div>').appendTo(".post_wrap");a(".post_side>.extract").empty();for(var d=0;d<this.breads.length;d++){var c=this.breads[d];var g=c.clone().css({"margin-top":"10px",display:"none"});var f=g.clone();c.appendTo(".post_side>.extract");g.appendTo(".extract-up");f.appendTo(".extract-down")}this.$plainBreads=a(".post_side>.extract>._j_poi_line");this.$topBreads=a(".extract-up>._j_poi_line");this.$bottomBreads=a(".extract-down>._j_poi_line");this.$plainBreads.each(function(j,h){a(this).find(".ft span").addClass("highlight")});a("._j_keyword").each(function(j,h){if(a(this).attr("data-poi_id")){a(this).addClass("highlight")}});this.setForward()};b.prototype.bind=function(){var c=this;a("body").delegate(".post_side>.extract>._j_poi_line","mouseenter",function(){var d=a(this),f=d.data("sort");c.open("plain",f)});a("body").delegate(".post_side>.extract>._j_poi_line","mouseleave",function(){var d=a(this),f=d.data("sort");c.close("plain",f)});a("body").delegate(".extract-down>._j_poi_line","click",function(){var d=a(this),f=d.data("offset");a("html,body").animate({scrollTop:f},500)});a("body").delegate(".extract-up>._j_poi_line","mouseenter",function(){var d=a(this),f=d.data("sort");c.open("up",f)})};b.prototype.process=function(){var h=this.$scrollElement.scrollTop();var d=h+this.baseTop;var f=h+this.winHeight-this.bottomNumber*40;var g=h-this.lastPosition>=0;for(var k=0;k<this.flags.length;k++){var j=this.breadsoffset[k],c=this.flags[k];if(j<=d&&c!==0){this.hide("top");this.open("top",k);this.hide("plain",k);this.flags[k]=0}else{if(j>d&&j<f&&c!=1){this.hide("top");this.open("plain",k);this.flags[k]=1;this.setForward()}else{if(j>f&&c!=2){this.hide("plain",k);this.flags[k]=2;this.setForward()}}}}!this.titleVisible&&d>=this.rightOffset&&this.visibleTitle(true);d<=this.rightOffset&&this.titleVisible&&this.visibleTitle(false);this.lastPosition=h};b.prototype.setForward=function(){var d=0;for(var c=0;c<this.flags.length;c++){if(this.flags[c]==2&&d<5){this.show("bottom",c);d++}else{this.hide("bottom",c)}}this.bottomNumber=d;return true};b.prototype.isOpen=function(d,c){return this["$"+d+"Breads"].eq(c).hasClass("item-open")};b.prototype.show=function(d,c){this["$"+d+"Breads"].eq(c).show();return true};b.prototype.hide=function(g,d){var c=this["$"+g+"Breads"],f=this;if(typeof d=="undefined"){c.each(function(j,h){f.close(g,j)});c.hide()}else{this.close(g,d);c.eq(d).hide()}return true};b.prototype.open=function(k,f){var h=this["$"+k+"Breads"];var c=h.eq(f);var g=c.find("._j_poi_line_icon");var d=c.data("poi_id");var j=c.find(".ext-fav");var l=c.find(".bd");if(k=="plain"){h.each(function(){a(this).removeClass("item-open");a(this).find(".bd").is(":visible")&&a(this).find(".bd").fadeOut(200)})}c.show();if(k!="top"||this.isOpen("plain",f)){c.addClass("item-open").find(".bd").css({width:"290px"}).show()}if(j.length&&j.hasClass("hide")){a.get("/plan/ajax.php",{s:"hasFaved",referid:d},function(m){if(parseInt(m.ret)>0){j.find(".btn-fav").hide();j.find(".bookmark>a").attr("href","/plan/fav.php?iMid="+m.ret)}else{j.find(".bookmark").hide()}j.removeClass("hide")},"json")}return true};b.prototype.close=function(f,d){var c=this["$"+f+"Breads"].eq(d);c.removeClass("item-open");c.find(".bd").css({width:0}).hide();return true};b.prototype.visibleTitle=function(c){this.titleVisible=c;a("._j_poi_line .ft")[c?"removeClass":"addClass"]("hide")};a.abaci=function(c){if(a.browser&&a.browser.msie&&(a.browser.version=="6.0"||a.browser.version=="7.0")){return false}new b(c)}})(jQuery);var is_submit=false;var show_active_timer=0;var slide_active_timer=0;var share_active_timer=0;$(function(){if(undefined!=append_score&&""!=append_score){mTinyAlert(append_score)}var m=false;$("#pform").submit(function(){if(m){return false}$('textarea[name="content"]').val($("#content").mfweditor("getContent")).text($("#content").mfweditor("getContent"));m=true;return true});$(".a_con_text img").not(".itemDigest img").imgMenu();$("body").delegate("#pnl_userprop li.on","click",function(){var p=parseInt($(this).find("div.num").text());if(p>0){if($(this).find("a").hasClass("on")){$(this).find("a").removeClass("on");$("#hid_propid").val("0")}else{$("#pnl_userprop a.on").removeClass("on");$(this).find("a").addClass("on");$("#hid_propid").val(jQuery(this).attr("propid"))}}});var c;$("body").delegate(".grid-content .post-share","mouseenter",function(p){p.preventDefault();var q=$(this);if(c){clearTimeout(c)}q.find(".share-pop").show()});$("body").delegate(".grid-content .post-share","mouseleave",function(p){p.preventDefault();var q=$(this);c=setTimeout(function(){q.find(".share-pop").hide()},500)});$("div.out_pic,div.author-face").hover(function(){var p=$(this);if(p.data("inited")){p.find(".card_pop").show()}else{var q=p.attr("val");$.get("/ajax/ajax_user_pop.php",{uid:q},function(r){if(r.ret==1){$(r.html).appendTo(p).show()}},"json");p.data("inited",true)}},function(){$(this).find(".card_pop").hide()});$(".post_item embed, .a_con_text embed").attr({width:480,height:400});$("body").delegate("a","click",function(t){var s=$(this).attr("href"),p=$(this).text(),v=parse_url(s);if(v.host&&!(v.host.indexOf(".mafengwo.")>0)){var q=v.host.split("."),u=["edu","com","cn","net","org","gov","hk","uc","ca","co","uk"];for(var r=(q.length-2);r>=0;r--){if($.inArray(q[r],u)<0){add_op_log("tosl",q[r],p,'{"url":"'+s+'", "tid":"'+tid+'"}');break}}}});if($("._j_keyword_list").length){$("body").delegate("._j_keyword_list","click",function(t){t.preventDefault();var p=$(this),s=p.data("kw"),r=p.data("poiid");var q=$("._j_keyword[data-kw='"+s+"']:first");if(p.hasClass("on")){return}$("._j_keyword_list").removeClass("on");$("._j_keyword").removeClass("highlight");$("._j_poi_line>.ft>span").removeClass("highlight");$('._j_keyword_list[data-poiid="'+r+'"]').addClass("on");$('._j_keyword[data-poiid="'+r+'"]').addClass("highlight");$('._j_poi_line[data-poi_id="'+r+'"] .ft span').addClass("highlight");if(q.length){var v=q.offset();var u=v.top-100;$("html,body").animate({scrollTop:u},1000)}})}if($("._j_poi_line").length){var b,k,f,o,g,a,n;var h=$(".extract");var d=h.offset();var j=new Array();$(".extract ._j_poi_line").each(function(){a=$(this);b=parseInt(a.data("poi_id"));k=$("._j_keyword[data-poi_id='"+b+"']:first");if(k.length){f=k.offset();o=f.top-d.top;for(g=0;g<j.length;g++){if(j[g]==o){o=o+60}}j.push(o);a.attr("data-offset",o).css("margin-top",o+"px").show()}else{a.remove()}});$("mfw-ink").each(function(){var s=$(this),r=s.data("tips_id");var q=s.offset().top-d.top;var p=$('#hidden_tips_original ._j_poi_line[data-tips_id="'+r+'"]').clone();for(g=0;g<j.length;g++){if(j[g]==q){q=q+60}}j.push(q);p.attr("data-offset",q).css("margin-top",q+"px").appendTo(".extract").show()});if($.abaci!="undefine"&&page_start==0){$.abaci(".extract")}}if(page_start>0){$(".post_item:eq(0)").remove();$(".topic-content").remove();$("#title_area").remove();$("#first_lz_area").remove()}var c;$("body").delegate(".bar_share .bs_share","mouseenter",function(p){p.preventDefault();var q=$(this);if(c){clearTimeout(c)}q.find(".bs_pop").show()});$("body").delegate(".bar_share .bs_share","mouseleave",function(p){p.preventDefault();var q=$(this);c=setTimeout(function(){q.find(".bs_pop").hide()},500)});$("body").delegate("._j_my_fav","click",function(p){p.preventDefault();var q=$(this);if(__mfw_uid>0){$.post("/home/ajax_favorite.php",{actionid:1,type:0,id:__iid},function(r){if(r.ret==1){mTinyAlert("成功将该文章收藏！")}else{if(r.ret==0){mTinyAlert("该文章您已经收藏过了！")}else{majaxerr(r)}}$(".bs_collect").addClass("collected");$("._j_my_fav").attr("href","/plan/fav_type.php").attr("target","_blank").html("<i></i><span>我的收藏</span>").removeClass("_j_my_fav")},"json")}else{show_login()}});if($(".post-hd-wrap .bar_share").size()>0||$(".grid-module").size()>0){var l;if($(".post-hd-wrap .bar_share").size()>0){l=$(".post-hd-wrap .bar_share:eq(0)").offset().top+$(".post-hd-wrap .bar_share:eq(0)").outerHeight(true)}else{l=$(".grid-module").offset().top}$(window).bind("scroll",function(){var p=["1"];if(typeof(current_article_type)=="undefined"||current_article_type==""||$.inArray(current_article_type,p)<0){return false}if($(".float-bar").is(":hidden")&&$(window).scrollTop()>l){if($.browser.msie&&parseInt($.browser.version,10)<9){$(".float-bar").show()}else{$(".float-bar").fadeIn(300)}if($(".float-bar .share-info").size()>0){show_active();if($("#share_just").size()>0&&$("#share_first").size()>0){share_active_timer=setTimeout("share_active()",10000)}}}else{if($(".float-bar").is(":visible")&&$(window).scrollTop()<l){if($.browser.msie&&parseInt($.browser.version,10)<9){$(".float-bar").hide()}else{$(".float-bar").fadeOut(300)}show_active_timer=slide_active_timer=share_active_timer=0;if($("._j_qa_recommend").length>0){$("._j_qa_recommend").animate({top:"385px"},2000)}}}})}if($(".leftBar").size()>0){show_active();if($("#share_just").length&&$("#share_first").length){share_active_timer=setTimeout("share_active()",10000)}}$("html,body").keydown(function(p){if(p.altKey||p.metaKey){if(84===p.keyCode){$(this).animate({scrollTop:0},120)}}});$("div.pnl_logo").hover(function(){var p=$(this);if(p.data("inited")){p.next().show()}else{var q=p.attr("val");$.get("/ajax/ajax_user_pop.php",{uid:q},function(r){if(r.ret==1){p.next().html(r.html).show()}},"json");p.data("inited",true)}},function(){}).each(function(){$(this).next().bind("mouseleave",function(){$(this).hide()})});$("body").delegate("#btn_hover_tips","mouseenter",function(){$("#btn_hover_tips_tar").fadeIn()}).delegate("#btn_hover_tips","mouseleave",function(){$("#btn_hover_tips_tar").fadeOut()});$("#pnl_contentinfo").mouseenter(function(){$(".btn_share_qzone").closest("div").css({height:0})}).mouseleave(function(){$(".btn_share_qzone").closest("div").css({height:"auto"})});$("body").delegate("#exinfo-noprompt","click",function(p){p.preventDefault();$(".trip-info-edit").hide()});$("body").delegate("#exinfo-tripinfo","mouseenter",function(p){$("#exinfo-tripinfo").find("ul").addClass("hover")});$("body").delegate("#exinfo-tripinfo","mouseleave",function(p){$("#exinfo-tripinfo").find("ul").removeClass("hover")});$(".post_main").mouseup(function(s){var p=10;var v=10;var q="";if(document.selection){q=document.selection.createRange().text}else{if(window.getSelection()){q=window.getSelection()}}q=$.trim(q);if(q!=""&&($(s.target).parents(".a_con_text").size()||$(s.target).hasClass("a_con_text"))){$("#plantip").remove();var u=$(s.target).hasClass("a_con_text")?$(s.target):$(s.target).closest(".a_con_text");$("body").data("pop_reply_data",{owner:u.attr("owner"),qiid:u.attr("dataid"),qcontent:q});var t='<div id="plantip" class="tooltip"><a href="javascript:void(0);" title="加入行程" class="addPlan_icon"></a><a href="javascript:void(0);" title="引用到回复" class="addComt_icon"></a></div>';$("body").append(t);$("#plantip").css({top:(s.pageY+v)+"px",left:(s.pageX+p)+"px",position:"absolute"}).show("fast")}else{$("#plantip").remove()}});if(window.__mfw_uid===0){$("#pnl_favTips").find("a").click(function(p){show_login();p.preventDefault()})}$(window).scroll(function(){var p=($(window).scrollTop()+document.documentElement.clientHeight)/document.body.clientHeight;var p=p*100;$("._j_view_progress").css({width:p+"%"})});$("body").delegate("a.addPlan_icon","click",function(p){if(window.__mfw_uid===0){show_login()}else{$(this).replaceWith($("#tpl_addtoplan").html())}p.stopPropagation()}).delegate("a.addComt_icon","click",function(p){if(window.__mfw_uid===0){show_login()}else{show_pop_reply("quote_text")}p.stopPropagation()});$("._j_closeschedule").click(function(p){p.preventDefault();$(p.currentTarget).parent().slideUp()});$("body").delegate(".up_notes .close","click",function(p){p.preventDefault();$(".up_notes").fadeOut()})});if(window.Env.anchor_pid){$(function(){var a=$('._j_keyword[data-poi_id="'+window.Env.anchor_pid+'"]').eq(0);if(!a.length){a=$('pic_tag a[data-poi_id="'+window.Env.anchor_pid+'"]').eq(0)}if(a.length){$("html, body").animate({scrollTop:a.offset().top-60},500)}})}function show_active(){if($(".ing_status:visible").length){$(".ing_status:visible").fadeOut(500,function(){$(this).remove();slide_active_timer=setTimeout("slide_active()",10000)})}else{slide_active_timer=setTimeout("slide_active()",10000)}}function slide_active(){if($(".ing_status:eq(0)").length){$(".ing_status:eq(0)").fadeIn(500,function(){show_active_timer=setTimeout("show_active()",10000)})}}function addfriend_ajax(a,b){jQuery.post("/ajax/addfriend.php",{action:"addfriend",touid:a,_need_cstk:true},function(c){if(c.ret=="1"){b.html(c.msg)}else{majaxerr(c)}},"json")}function contentfocus(c,a,b){if(""!=c){$("#content").mfweditor("insertHtml",c)}$("#replyuid").val(a);$("#replyiid").val(b);$("#qiid").val("");var d;if($("#pform").length>0){d=$("#pform").offset()}else{d=$(".reply_input").offset()}$("html,body").animate({scrollTop:d.top},0)}function referfocus(a,b){if(""!=b){$("#content").mfweditor("insertHtml",b)}$("#qiid").val(a);$("#replyuid").val("");var c;if($("#pform").length>0){c=$("#pform").offset();$("#pform").focus()}else{c=$(".reply_input").offset()}$("html,body").animate({scrollTop:c.top},0)}function formSubmit(){if(is_submit){return false}$('textarea[name="content"]',this).val($("#content").mfweditor("getContent")).text($("#content").mfweditor("getContent"));is_submit=true;$("#pform").submit();return true}function display_user_score(){mTinyAlert("发表随笔 +10  积分")}function edit_album(a){$.post("/ajax/ajax_album_top.php",{action:"getlist",topiid:a},function(b){if(b.ret==1){mAlert(b.html,"",null,-1).css("width","550px");$("#popup_ok").val("关闭")}else{majaxerr(b)}},"json")}function record_share(b,a){$.getJSON("/group/ajax_ginfo_share.php",{action:"ginfo_share",topiid:b,share_type:a},function(f){if(f.ret==1&&$(".float-bar .share-info").size()>0){var c=new Array();$.each(f.data.l,function(d){c.push(f.data.l[d])});if($("#share_just").size()>0){if($("#share_first").size()>0){$("#share_first").fadeOut(300,function(){$("#share_just").html('<a href="/u/'+c[0]["uid"]+'.html" title="'+c[0]["name"]+'" target="_blank">'+mSubStr(c[0]["name"],8)+"</a>刚刚分享").fadeIn(300)})}else{$("#share_just").fadeOut(500,function(){$(this).html('<a href="/u/'+c[0]["uid"]+'.html" title="'+c[0]["name"]+'" target="_blank">'+mSubStr(c[0]["name"],8)+"</a>刚刚分享").fadeIn(500)})}}else{$(".share_status").empty();$('<p id="share_first"><a href="/u/'+f.data.f.uid+'.html" title="'+f.data.f.name+'" target="_blank">'+mSubStr(f.data.f.name,8)+"</a>最早分享</p>").appendTo($(".share_status")).hide().fadeIn(500);$('<p id="share_just" class="hide"><a href="/u/'+c[0]["uid"]+'.html" title="'+c[0]["name"]+'" target="_blank">'+mSubStr(c[0]["name"],8)+"</a>刚刚分享</p>").appendTo($(".share_status"));if($(".float-bar").is(":visible")){share_active_timer=setTimeout("share_active()",10000)}}$("#share_nums").html("("+f.data.pv+")").UpNum("+1")}})}function share_active(){$("#share_first").fadeOut(300,function(){$(this).remove();$("#share_just").fadeIn(300)}).remove()}function shareFloatRec(g,c,b,f,a,d){if(jQuery(g).next().length){jQuery(g).next().remove()}var h=jQuery('<div class="eject_container"><div class="eject"><p class="eject_position eject_t"></p><div class="eject_close btn_eject_close"><img title="关闭" src="http://images.mafengwo.net/images/wengweng/btn_close.gif"></div><div><div class="eject_tit">'+b+'</div><div class="eject_ts">一句话评论：<textarea style="width:250px"></textarea><input type="button" class="btn_orange" value="确认"></div></div><div class="m_t_10"></div></div></div>').css({position:"absolute",zIndex:10,left:"0px",top:"30px"}).hide();jQuery(g).parent().append(h).find("div.eject_container").fadeIn(300).find("div.eject").css("width",270).find("div.eject_close").click(function(){jQuery(g).next().fadeOut(300)}).next().find("input.btn_orange").click(function(){var j=jQuery(this).prev().val();jQuery.getJSON("/weng/share.php",{action:"sharearticle",intro:b,sharelink:c,reply:j,articleid:f,tag:a,atuid:d},function(k){if(k.ret==1){jQuery(g).next().fadeOut(300);mTinyAlert("分享成功！");record_share(f,"weng")}else{majaxerr(k)}})})}function shareRec(g,c,b,f,a,d){jQuery(g).mTip(b,'一句话评论：<textarea style="width:250px"></textarea><input type="button" class="btn_orange" value="确认"/>',"bottom").data("mtip").find("div.eject").css("width",270).find("input.btn_orange").click(function(){var h=jQuery(this).prev().val();jQuery.getJSON("/weng/share.php",{action:"sharearticle",intro:b,sharelink:c,reply:h,articleid:f,tag:a,atuid:d},function(j){if(j.ret==1){jQuery(g).mTipHide();mTinyAlert("分享成功！");record_share(f,"weng")}else{majaxerr(j)}})})}function getMousePoint(b){var a={x:0,y:0};if(typeof window.pageYOffset!="undefined"){a.x=window.pageXOffset;a.y=window.pageYOffset}else{if(typeof document.compatMode!="undefined"&&document.compatMode!="BackCompat"){a.x=document.documentElement.scrollLeft;a.y=document.documentElement.scrollTop}else{if(typeof document.body!="undefined"){a.x=document.body.scrollLeft;a.y=document.body.scrollTop}}}a.x+=b.clientX;a.y+=b.clientY;return a}function favoriteRec(f,b,d,a,c){$.post("/home/ajax_favorite.php",{actionid:f,type:b,id:d},function(g){if(g.ret==1){mTinyAlert("成功将该文章收藏！")}else{if(g.ret==0){mTinyAlert("该文章您已经收藏过了！")}else{majaxerr(g)}}},"json")}function ginfo_ding_activities(c,a,b){check_connect_setting("feed","wb",function(){check_connect_remind("sina","ginfo_ding",function(){var d=$(b).nextAll(".layer_sync");d.find('.pop_wrap[key="remind"]').find(".close, .operation .sync_cancel").unbind("click").bind("click",function(){d.find('.pop_wrap[key="remind"]').fadeOut(300)}).end().find(".operation .sync_submit").unbind("click").bind("click",function(){d.find('.pop_wrap[key="remind"]').fadeOut(300);set_connect_setting("feed","wb");update_activities(c,a,"ginfo_ding",function(){d.find('.pop_wrap[key="result"]').html('<div class="succSync"><b></b>推荐成功！</div><p>你可以通过窝内的<a href="/home/usershare.php?show_id=sina_setting" target="_blank">账号同步</a>更改同步设置。</p>').fadeIn(300);setTimeout(function(){d.find('.pop_wrap[key="result"]').fadeOut(300)},5000);add_op_log("sgda","sendsuccess")},function(){d.find('.pop_wrap[key="result"]').html('<div class="succSync"><b></b>抱歉，推荐失败，请稍候再试！</div>').fadeIn(300);setTimeout(function(){d.find('.pop_wrap[key="result"]').fadeOut(300)},5000)});add_op_log("sgda","openservice")}).end().fadeIn(300);add_op_log("sgda","remindtip")})},function(){update_activities(c,a,"ginfo_ding",function(){add_op_log("sgda","sendsuccess")})})}function setTags(){try{var b=document.tagform.mddptag;var a="";if(b.value){a=b.value}else{for(i=0;i<b.length;i++){if(b[i].checked){a=b[i].value}}}}catch(d){}var c=document.tagform.mddptag_ext.value;if(c){a=c}G_SetMddInfoTags(tid,feedid,a)}function clearTags(){var a=document.tagform.mddptag;for(i=0;i<a.length;i++){if(a[i].checked){a[i].checked=false}}}function clearIntag(){document.tagform.mddptag_ext.value="";document.tagform.inshow.checked=false}function clearnotag(){document.tagform.notag.checked=false}function G_SetMddInfoTags(b,a,d){if(d==""){closeDiv("popuptag");return}var c="/group/infotag.php";$.post(c,{iid:b,tags:d,feedid:a},function(f){CB_SetMddInfoTags(f)},"json")}function CB_SetMddInfoTags(a){if(a){closeDiv("popuptag")}window.location.reload()}function PopBadazhouFrame(b,c){$(b).next().removeClass("hide");var a="/ajax/ajax_op_log_api.php";jQuery.get(a,{type:"bdzd",mk:"游记点击_"+c},function(d){})}function restore_article(a){if(confirm("确认恢复吗？")){window.location.href="/group/inforestore.php?iid="+a+"&action=top"}}function wx_share(a){$.post("/group/ajax_ginfo_share.php",{action:"get_qr_url",topiid:a},function(b){if(b&&!b.ret){mAlert(b.msg);return false}if(b&&b.ret==1&&b.data){mAlert("",'<div class="wx-mfw-pop"><p>使用微信“扫一扫”</p><p>打开网页后点击右上角“分享按钮”</p><p><img width="150" height="150" src="'+b.data+'"></p></div>');$("#popup_container").css("width","420px");$("#popup_icon .i1").remove();$("#popup_btn").remove();$("#popup_message").remove()}},"json")}var sync_timer=0;function set_reply_sync(type,obj){var binding_datas={sina:{title:"新浪微博",binding_url:"/connect_sync/sina_v2_sync.php"},renren:{title:"人人网",binding_url:"/connect_sync/renren_sync.php"},qq:{title:"QQ空间",binding_url:"/connect_sync/qq_v2_sync.php"},tqq:{title:"腾讯微博",binding_url:"/connect_sync/qq_v2_sync.php"}};$("#reply_sync_tip").hide();clearTimeout(sync_timer);if($(obj).hasClass("on")){$.post("/group/ajax_sync_setting.php",{type:type,key:"a_reply",action:"close_sync"},function(d){if(d.ret>0){$(obj).removeClass("on").attr("title","点击同步到"+eval("binding_datas."+type+".title"))}else{mTinyAlert("取消同步失败，请稍候再试。")}},"json")}else{$.post("/group/ajax_sync_setting.php",{type:type,key:"a_reply",action:"open_sync"},function(d){if(d.ret>0){$(obj).addClass("on").attr("title","取消同步到"+eval("binding_datas."+type+".title"))}else{if(d.ret==-1){$("#reply_sync_tip").html('<div class="pop_wrap"><span class="close"></span><p>你还没有绑定'+eval("binding_datas."+type+".title")+'账号，现在就去绑定！</p><div class="operation"><a class="sync_submit" href="'+eval("binding_datas."+type+".binding_url")+'" target="_blank">确定</a><a class="sync_cancel" href="javascript:void(0);">取消</a></div></div>').find(".close").click(function(){$("#reply_sync_tip").fadeOut(300)}).end().find(".sync_submit, .sync_cancel").click(function(){$("#reply_sync_tip").fadeOut(300)}).end().fadeIn(300)}else{mTinyAlert("开启同步失败，请稍候再试。")}}},"json")}}function add_to_fav(a){if($("body").data("pop_reply_data")){$.post("/plan/ajax.php?s=addFav",{id:tid,subtype:a,type:2,content:$("body").data("pop_reply_data").qcontent},function(c){var f=$("#plantip").offset();$("#plantip").remove();var b=$("<div/>").html($("#tpl_addtoplan_succ").html()).appendTo($("body")).css({top:(f.top)+"px",left:(f.left)+"px",position:"absolute"});setTimeout(function(){b.animate({opacity:0},2000,function(){$(this).remove()})},3000)},"json")}}function show_pop_reply(a){$("#plantip").remove();if($("body").data("pop_reply_data")){var c=$("#pnl_pop_reply").clone().find(".comCard").attr("id","pop_prop_list").end().find(".quoteWrap").attr("id","pop_quote_reply").end().find(".quoteWrap .quoteArea textarea").attr("id","pop_reply_text").end().find('.quoteWrap .quoteArea input[name="p_topiid"]').attr("id","pop_topiid").end().find('.quoteWrap .quoteArea input[name="p_replyiid"]').attr("id","pop_replyiid").end().find('.quoteWrap .quoteArea input[name="p_qiid"]').attr("id","pop_qiid").end().find('.quoteWrap .quoteArea input[name="p_qcontent"]').attr("id","pop_qcontent").end().find('.quoteWrap .quoteArea input[name="p_qpicflg"]').attr("id","pop_qpicflg").end().find('.quoteWrap .quoteArea input[name="p_qpicalbum"]').attr("id","pop_qpicalbum").end().find('.quoteWrap .quoteArea input[name="p_qpicurl"]').attr("id","pop_qpicurl").end().find('.quoteWrap .quoteArea input[name="p_propid"]').attr("id","pop_hid_propid").end().html();$.prompt(c,{prefix:"replypop",buttons:{}});var b=$("body").data("pop_reply_data");if("quote_text"==a){$("#pop_quote_reply").find(".tit").html("回复"+b.owner+"的引文：").after($('<div class="quoteInfo">'+b.qcontent+"</div>"));$("#pop_qiid").val(b.qiid);$("#pop_qcontent").val(b.qcontent)}else{if("quote_pic"==a){$("#pop_quote_reply").find(".tit").html("回复"+b.owner+"的图片：");$("#pop_qpicflg").val(b.qpicflg);$("#pop_qpicalbum").val(b.qpicalbum);$("#pop_qpicurl").val(b.qpicurl)}}$("#pop_quote_reply .operate .cl_emotion").bind("click",function(){if(undefined!==$.mfwplugins.emotions){if($("#pop_quote_reply .operate .pr .pop_reply_emotion").size()>0){$("#pop_quote_reply .operate .pr").empty()}else{var d;d='<div class="pop_reply_emotion"><ul>';for(i=0;i<$.mfwplugins.emotions.length;i+=1){d+='<li><img src="'+$.mfwplugins.emotions[i].file+'" title="'+$.mfwplugins.emotions[i].title+'" /></li>'}d+="</ul></div>";$(d).css("left",0).find("li img").bind("click",function(g){var f=$("#pop_reply_text").val()+"("+$(this).attr("title")+")";$("#pop_reply_text").val(f).focus();$("#pop_quote_reply .operate .pr").empty();g.stopPropagation();return false}).end().appendTo($("#pop_quote_reply .operate .pr").empty())}}});$("#pop_quote_reply .operate .cl_at").bind("click",function(){if($("#pop_quote_reply .operate .pr .pop_reply_atuser").size()>0){$("#pop_quote_reply .operate .pr").empty()}else{var d;d='<div class="pop_reply_atuser"><dl><dt class="pr_label">@点名：邀请你的朋友来参与（请输入好友的蚂蜂窝名号）</dt><dd class="pr_input"><input type="text" name="callname" value="" /></dd></dl><div class="pr_action"><input class="pr_submit" type="button" value="确定" /><input class="pr_cancel" type="button" value="取消" /></div></div>';$(d).css("left",0).find('input[name="callname"]').each(function(){$(this).tokenInput("/ajax/ajax_suggest.php?type=fans_json",{onAdd:function(f){$.mfwplugins.callusers[f.id]=f.name},onDel:function(f){delete $.mfwplugins.callusers[f.id]}})}).end().find(".pr_submit").bind("click",function(){var g="";for(i in $.mfwplugins.callusers){g+="@"+$.mfwplugins.callusers[i]+"("+i+")"}var f=$("#pop_reply_text").val()+g;$("#pop_reply_text").val(f).focus();$("#pop_quote_reply .operate .pr").empty();event.stopPropagation();return false}).end().find(".pr_cancel").bind("click",function(){$("#pop_quote_reply .operate .pr").empty()}).end().appendTo($("#pop_quote_reply .operate .pr").empty())}});$("#pop_quote_reply .operate .btnComment").bind("click",function(){if($(this).hasClass("disabled")){return}if($.trim($("#pop_reply_text").val())!=""){$(this).addClass("disabled");var d=$("#pop_hid_propid").val();$.post("/group/ajax_reply.php",{topiid:$("#pop_topiid").val(),replyiid:$("#pop_replyiid").val(),qiid:$("#pop_qiid").val(),qcontent:$("#pop_qcontent").val(),qpicflg:$("#pop_qpicflg").val(),qpicalbum:$("#pop_qpicalbum").val(),qpicurl:$("#pop_qpicurl").val(),propid:$("#pop_hid_propid").val(),content:($("#pop_quote_reply .tit").text()+$.trim($("#pop_reply_text").val()))},function(g){$.prompt.close();if(g.ret==1){if(d!="0"){$(".j_prop_pop").addClass("hide");$("._j_prop_show_advance").remove();$("._j_prop_normal").html("");$("._j_prop_area").hide()}$("#pop_hid_propid").val("0");var f=(g.html!="")?g.html:"回复成功";mTinyAlert(f)}else{mTinyAlert("回复失败，请稍候再试")}},"json")}});if($("#pop_quote_reply .operate li.mode").size()>0){$("#pop_prop_list dl.on dd a").bind("click",function(){var d=$(this).closest("dd"),f=parseInt(d.find("span").text());if(f>0){if($(this).hasClass("on")){$(this).removeClass("on");$("#pop_hid_propid").val("0")}else{$("#pop_prop_list dl.on dd a").removeClass("on");$(this).addClass("on");$("#pop_hid_propid").val($(this).attr("dataid"))}}})}}}$(document).ready(function(){var b=$(".post_info").find("img").not("[src*='mafengwo']");if(b.length>0){var a;b.each(function(){a=$(this);if(a.width()>600){a.css("width","600px")}})}var f=0;if($("#youji_tiwen").length>0){var c=$("#youji_tiwen").offset();f=c.top-30}$(window).bind("scroll",function(){var g=$(document).scrollTop();if(f>0&&$("#youji_tiwen").length){if(g>f){$("#youji_tiwen").addClass("pic_fixed")}else{$("#youji_tiwen").removeClass("pic_fixed")}}if($(document).scrollTop()>840){$("[data-cs-t=info_right_hotels]").addClass("collect_fixed")}else{$("[data-cs-t=info_right_hotels]").removeClass("collect_fixed")}});if($(".postal-ticket").length){$("body").delegate(".postal-ticket","click",function(){$("div.popup-ticket").show();$(this).remove()});$("body").delegate(".popup-ticket ._j_goto_postal","click",function(){$(this).closest("div.popup-ticket").remove();return true});$("body").delegate(".popup-ticket a.close-btn","click",function(){$(this).closest("div.popup-ticket").remove()})}if(typeof(show_hotel_ad)!="undefined"&&show_hotel_ad){var d=$("#alading_hotel_list_wrapper");d.siblings("div").remove();$.get("/group/ajax_hotel_for_alading.php",{mddid:__mddid,id:__iid},function(g){d.replaceWith(g)})}$(".r-ctrl .btn-next").live("click",function(){var h=$(".m-hotel ul").css("margin-left");var g=$(".m-hotel ul").css("width");if(typeof(g)!="undefined"){g=parseInt(g)}else{g=0}if(typeof(h)=="undefined"){h=0}else{h=parseInt(h)}h-=570;if(h>-190){h=0}if(g<570){h=0}if(h<(-($(".m-hotel ul li").length*190)+570)){h=(-($(".m-hotel ul li").length*190)+570);if(g<570){h=0}$(".r-ctrl .btn-next").addClass("disabled")}$(".r-ctrl .btn-prev").removeClass("disabled");$(".m-hotel ul").first().animate({marginLeft:h+"px"})});$(".r-ctrl .btn-prev").live("click",function(){var g=$(".m-hotel ul").css("margin-left");if(typeof(g)=="undefined"){g=0}else{g=parseInt(g)}g+=658;if(g>0){g=0;$(".r-ctrl .btn-prev").addClass("disabled")}else{if(g>-190){g=0;$(".r-ctrl .btn-prev").addClass("disabled")}}$(".r-ctrl .btn-next").removeClass("disabled");$(".m-hotel ul").first().animate({marginLeft:g+"px"})});$(".post_info .cont a[href!=#]").filter(function(g){var j=$(this).attr("href");if(typeof(j)=="undefined"){return}return j.indexOf("javascript")<0}).attr("target","_blank");if(typeof(__iid)!="undefined"){$.ajax({type:"GET",url:"/group/ajax_ginfo_ready.php",data:{sAction:"initGinfo",iId:__iid},dataType:"json",success:function(h){if(!h.error){if(h.payload.normal){$("._j_prop_normal").html(h.payload.normal);$("._j_prop_area").show()}if(h.payload.pop){$("._j_prop_pop").html(h.payload.pop)}if(h.payload.advanced_mode=="1"){$("._j_prop_show_advance").show()}if(h.payload.sync_html){$(".sync_to").html(h.payload.sync_html)}var g=$(".bar_share ._j_my_fav");if(g.length){if(h.payload.has_fav==0){if(g.find(".num_fav_total").length>0){g.find(".num_fav_total").html(h.payload.fav_total)}}else{$(".bs_collect").addClass("collected");g.html("<i></i><span>我的收藏</span>").attr("href",h.payload.fav_url).removeAttr("onclick")}$(".bar_share ._j_share_pv").html(h.payload.share_pv)}if($("._j_right_active").length>0&&h.payload.right_active){$("._j_right_active").html(h.payload.right_active)}if($("#postal_ticket").length>0&&h.payload.new_tickets_num>0){$("#postal_ticket dd").html("此篇大作已获得"+h.payload.give_tickets_user_name+"奖励的<span>明信片券 "+h.payload.new_tickets_num+" 张</span>。<br>快去DIY你的专属明信片吧！");$("#postal_ticket").show()}if($("._j_hot_wenda").length>0&&h.payload.hot_wenda){$("._j_hot_wenda").html(h.payload.hot_wenda).show()}}else{}}})}});(function(g,d,c){var f={$:function(h){return document.getElementById(h)},gt:function(h,j){return h.getElementsByTagName(j)},db:document.body,dd:document.documentElement,i:0,mix:function(l,k,h){var j;for(j in k){if(k.hasOwnProperty(j)){l[j]=k[j]}}return l},html:'<div class="z_tips z_emotion" id="ljTips-<%=r%>">						<div class="z_content"></div>						<span class="z_arr arr_<%=p%>"><b></b></span>						<a href="javascript:void(0)" id="ljClose<%=r%>" class="z_close">x</a>					</div>',cache:{}};var a={prefix:"JunLu",p:"right",kind:"ok",closePrefix:"ljClose",wrapPrefix:"ljTips-",closeBtn:false,time:null,offset:null,content:function(h){return h.getAttribute("data-stip")},of:15,rand:0};var b=function(l,k){if(!(this instanceof b)){return new b(l)}var j=(typeof l=="string");this.elem=j?f.$(l):l;this.cacheKey=j?l:this.getCacheKey();var h=f.cache[this.cacheKey];if(h&&!k){return h}f.cache[this.cacheKey]=this;this.defaultConfig=f.mix({},a);this._config={};this.clearTime=null;this.func=null;(f.db!==document.body)&&this._init()};b.prototype={constructor:b,getCacheKey:function(){var h=this.elem.getAttribute("id");if(!h){h="stip"+f.i;this.elem.setAttribute("id",h)}return h},show:function(q){var r=this,l=r._config,k,h,n,j,o=Object.prototype.toString.call(q),m=r.defaultConfig.content;if(!q||(q&&!q.content)){q=f.mix(q||{},{content:typeof m=="function"?m.call(r.elem,r.elem):m})}if(/String|Number/.test(o)){q={content:q}}if("[object Function]"==o){q={content:q.call(r.elem,r.elem)}}f.mix(l,r.defaultConfig);f.mix(l,q);r._updateInfo();r.id&&r.hide();k=r._append();f.gt(k,"DIV")[0].innerHTML=l.content;h=r._pos.call(r,l.p,k.offsetWidth,k.offsetHeight);j=r._getScroll();k.style.top=h.top+j.top+"px";k.style.left=h.left+j.left+"px";r._winSizeCheck(k);if(l.time){r.clearTime=setTimeout(function(){r.hide(n)},l.time)}return k},hide:function(){var h=this;h.clearTime&&clearTimeout(h.clearTime);h._clear(f.$(h.id))},_init:function(){f.mix(f,{dd:document.body,db:document.documentElement})},_clear:function(h){var j=this._config;h&&h.parentNode&&h.parentNode.removeChild(h);g.removeEventListener?g.removeEventListener("resize",this.func,false):g.detachEvent("onresize",this.func)},_updateInfo:function(){var h=this,k=h.elem,j=h._config;j.width=k.offsetWidth;j.height=k.offsetHeight;j.offset=k.getBoundingClientRect()},_append:function(){var j=this,k=j._config,n,h,o,m=f.$("StipJun");n=k.rand=++f.i;h=document.createElement("DIV");h.id=k.prefix+n;j.id=h.id;h.innerHTML=f.html.replace("<%=p%>",k.p).replace(/<%=r%>/g,n).replace("<%=kind%>",k.kind);if(!m){o=document.createElement("DIV");o.id="StipJun";o.appendChild(h);document.body.appendChild(o)}else{m.appendChild(h)}if(k.closeBtn){var l=function(){j.hide()};f.$(k.closePrefix+n).onclick=l}else{f.$(k.closePrefix+n).style.display="none"}return f.$(k.wrapPrefix+n)},_pos:function(n,k,m){var l=this,o=l._config;var j={left:function(p,q){return{top:o.offset.top,left:o.offset.left-p-o.of}},top:function(p,q){return{top:o.offset.top-q-o.of,left:o.offset.left}},right:function(p,q){return{top:o.offset.top,left:o.offset.left+o.width+o.of}},bottom:function(p,q){return{top:o.offset.top+o.height+o.of,left:o.offset.left}}};return j[n](k,m)},_getScroll:function(){return{top:f.db.scrollTop+f.dd.scrollTop,left:f.db.scrollLeft+f.dd.scrollLeft}},_winSizeCheck:function(k){var h=this,j=h._config;h.func=function(){h._updateInfo();var m=h._pos.call(h,j.p,k.offsetWidth,k.offsetHeight);var l=h._getScroll();k.style.top=m.top+l.top+"px";k.style.left=m.left+l.left+"px"};g.addEventListener?g.addEventListener("resize",h.func,false):g.attachEvent("onresize",h.func)}};g[d]=b;g[d]["config"]=a;g[d].cache=f.cache})(window,"Stip");(function(c,b,a,f){var d=c(b);c.fn.lazyload=function(g){var j=this;var k;var h={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:true,appear:null,load:null};function l(){var m=0;j.each(function(){var n=c(this);if(h.skip_invisible&&!n.is(":visible")){return}if(c.abovethetop(this,h)||c.leftofbegin(this,h)){}else{if(!c.belowthefold(this,h)&&!c.rightoffold(this,h)){n.trigger("appear");m=0}else{if(++m>h.failure_limit){return false}}}})}if(g){if(f!==g.failurelimit){g.failure_limit=g.failurelimit;delete g.failurelimit}if(f!==g.effectspeed){g.effect_speed=g.effectspeed;delete g.effectspeed}c.extend(h,g)}k=(h.container===f||h.container===b)?d:c(h.container);if(0===h.event.indexOf("scroll")){k.bind(h.event,function(m){return l()})}this.each(function(){var m=this;var n=c(m);m.loaded=false;n.one("appear",function(){if(!this.loaded){if(h.appear){var o=j.length;h.appear.call(m,o,h)}c("<img />").bind("load",function(){n.hide().attr("src",n.data(h.data_attribute))[h.effect](h.effect_speed);m.loaded=true;var p=c.grep(j,function(r){return !r.loaded});j=c(p);if(h.load){var q=j.length;h.load.call(m,q,h)}}).attr("src",n.data(h.data_attribute))}});if(0!==h.event.indexOf("scroll")){n.bind(h.event,function(o){if(!m.loaded){n.trigger("appear")}})}});d.bind("resize",function(m){l()});if((/iphone|ipod|ipad.*os 5/gi).test(navigator.appVersion)){d.bind("pageshow",function(m){if(m.originalEvent.persisted){j.each(function(){c(this).trigger("appear")})}})}c(b).load(function(){l()});return this};c.belowthefold=function(h,j){var g;if(j.container===f||j.container===b){g=d.height()+d.scrollTop()}else{g=c(j.container).offset().top+c(j.container).height()}return g<=c(h).offset().top-j.threshold};c.rightoffold=function(h,j){var g;if(j.container===f||j.container===b){g=d.width()+d.scrollLeft()}else{g=c(j.container).offset().left+c(j.container).width()}return g<=c(h).offset().left-j.threshold};c.abovethetop=function(h,j){var g;if(j.container===f||j.container===b){g=d.scrollTop()}else{g=c(j.container).offset().top}return g>=c(h).offset().top+j.threshold+c(h).height()};c.leftofbegin=function(h,j){var g;if(j.container===f||j.container===b){g=d.scrollLeft()}else{g=c(j.container).offset().left}return g>=c(h).offset().left+j.threshold+c(h).width()};c.inviewport=function(g,h){return !c.rightoffold(g,h)&&!c.leftofbegin(g,h)&&!c.belowthefold(g,h)&&!c.abovethetop(g,h)};c.extend(c.expr[":"],{"below-the-fold":function(g){return c.belowthefold(g,{threshold:0})},"above-the-top":function(g){return !c.belowthefold(g,{threshold:0})},"right-of-screen":function(g){return c.rightoffold(g,{threshold:0})},"left-of-screen":function(g){return !c.rightoffold(g,{threshold:0})},"in-viewport":function(g){return c.inviewport(g,{threshold:0})},"above-the-fold":function(g){return !c.belowthefold(g,{threshold:0})},"right-of-fold":function(g){return c.rightoffold(g,{threshold:0})},"left-of-fold":function(g){return !c.rightoffold(g,{threshold:0})}})})(jQuery,window,document);if(window.M&&typeof window.M.define=="function"){window.M.define("/js/jquery.lazyload",function(){return jQuery})}function update_activities(f,b,a,d,c){$.post("/ajax/ajax_connect_feed.php",{type:b,motion:a,action:"activities",id:f},function(g){if(g.ret==1){if(typeof d==="function"){d()}}else{if(g.ret==10001){show_login()}else{if(g.ret==10004){WB2.login(function(){var h=WB2.checkLogin();if(h){$.post("/ajax/ajax_connect_token.php",{action:"update_sina_token_by_weibojs_v2"},function(){},"json");update_activities(f,b,a,d,c)}else{mTinyAlert("抱歉，推荐失败，开放平台接口服务器繁忙。")}})}else{if(typeof c==="function"){c()}}}}},"json")}function check_connect_remind(c,b,a,d){$.post("/ajax/ajax_connect_remind.php",{action:"check_remind",flag:c,motion:b},function(f){if(0==f.data.is_reminded){set_connect_remind(c,b);if("function"===typeof a){a()}}else{if("function"===typeof d){d()}}},"json")}function set_connect_remind(b,a){$.post("/ajax/ajax_connect_remind.php",{action:"set_remind_logs",flag:b,motion:a},null,"json")}function check_connect_setting(b,c,a,d){$.post("/ajax/ajax_connect_setting.php",{action:"check_setting",type:c,key:b},function(f){if(0==f.data.is_setting){if("function"===typeof a){a()}}else{if("function"===typeof d){d()}}},"json")}function set_connect_setting(a,b){$.post("/ajax/ajax_connect_setting.php",{action:"open_setting",type:b,key:a},null,"json")}function get_connect_share_js(f,j,g,d,c){var h="";if(f=="sina"){if("object"===typeof g){g=g.sina}if(g!=""){j=g.substr(0,140)}var b="http://service.weibo.com/share/share.php?appkey=82015185&title="+encodeURIComponent(j)+"&pic="+encodeURIComponent(c)+"&url="+encodeURIComponent(d)+"&ralateUid=1730714982";h="window.open('"+b+"','_blank','scrollbars=no,width=600,height=480,left=75,top=20,status=no,resizable=yes');"}else{if(f=="renren"||f=="xiaonei"){if("object"===typeof j){j=j.renren}if("object"===typeof g){g=g.renren}var a={resourceUrl:d,pic:c,title:j,description:g};shareClick(a)}else{if(f=="qzone"||f=="qq"){if("object"===typeof j){j=j.qq}if("object"===typeof g){g=g.qq}h="window.open('http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title="+encodeURIComponent(j)+"&summary="+encodeURIComponent(g)+"&pics="+encodeURIComponent(c)+"&site="+encodeURIComponent("蚂蜂窝")+"&url="+encodeURIComponent(d)+"','_blank','scrollbars=no,width=600,height=450,left=75,top=20,status=no,resizable=yes');"}else{return false}}}return h}function sns_share_show(f,h,g,d,c,a){var j=f.split("_")[0];if("object"===typeof g){g=g[j]}if(typeof(ata)!="undefined"){ata("sn")}if(j=="wb"){if(g!=""&&g!=undefined){g=g.substr(0,140)}var b="http://www.mafengwo.cn/connect_share.php?key="+f+"&title="+encodeURIComponent(h)+"&content="+encodeURIComponent(g)+"&url="+encodeURIComponent(d)+"&pic="+encodeURIComponent(c);return'window.open("'+b+'", "_blank", "scrollbars=no,width=600,height=480,left=75,top=20,status=no,resizable=yes");'}else{if(j=="rr"){var b="http://www.mafengwo.cn/connect_share.php?key="+f+"&title="+encodeURIComponent(h)+"&content="+encodeURIComponent(g)+"&url="+encodeURIComponent(d)+"&pic="+encodeURIComponent(c);return'window.open("'+b+'", "_blank", "scrollbars=no,width=700,height=650,left=75,top=20,status=no,resizable=yes");'}else{if(j=="qz"){var b="http://www.mafengwo.cn/connect_share.php?key="+f+"&title="+encodeURIComponent(h)+"&content="+encodeURIComponent(g)+"&url="+encodeURIComponent(d)+"&pic="+encodeURIComponent(c);return'window.open("'+b+'", "_blank", "scrollbars=no,width=600,height=450,left=75,top=20,status=no,resizable=yes");'}else{if(j=="qt"){var b="http://www.mafengwo.cn/connect_share.php?key="+f+"&title="+encodeURIComponent(h)+"&content="+encodeURIComponent(g)+"&url="+encodeURIComponent(d)+"&pic="+encodeURIComponent(c);return'window.open("'+b+'", "_blank", "scrollbars=no,width=700,height=680,left=75,top=20,status=no,resizable=no,menubar=no,toolbar=no,scrollbars=no,location=yes");'}else{if(j=="ww"){var b="http://www.mafengwo.cn/connect_share.php?key="+f+"&title="+encodeURIComponent(h)+"&content="+encodeURIComponent(g)+"&url="+encodeURIComponent(d)+"&pic="+encodeURIComponent(c)+"&tag="+encodeURIComponent(a);return'window.open("'+b+'", "_blank", "scrollbars=no,width=660,height=550,left=75,top=20,status=no,resizable=no,menubar=no,toolbar=no,scrollbars=no,location=yes");'}}}}}}if("M" in window&&"define" in M){M.define("/js/m.sns.share",function(){return sns_share_show})}(function(b){if(undefined===b.mfweditor){throw"mfweditor.emotion.js depends on $.mfweditor"}if(!b.mfweditor.controls){b.mfweditor.controls={}}var a=[{title:"大笑",file:"http://images.mafengwo.net/images/i/face/daily_v2/1.png"},{title:"微笑",file:"http://images.mafengwo.net/images/i/face/daily_v2/2.png"},{title:"亲亲",file:"http://images.mafengwo.net/images/i/face/daily_v2/3.png"},{title:"色色",file:"http://images.mafengwo.net/images/i/face/daily_v2/5.png"},{title:"笑cry",file:"http://images.mafengwo.net/images/i/face/daily_v2/79.png"},{title:"无奈",file:"http://images.mafengwo.net/images/i/face/daily_v2/6.png"},{title:"睡觉",file:"http://images.mafengwo.net/images/i/face/daily_v2/19.png"},{title:"害羞",file:"http://images.mafengwo.net/images/i/face/daily_v2/8.png"},{title:"酷",file:"http://images.mafengwo.net/images/i/face/daily_v2/9.png"},{title:"鬼脸",file:"http://images.mafengwo.net/images/i/face/daily_v2/12.png"},{title:"大哭",file:"http://images.mafengwo.net/images/i/face/daily_v2/21.png"},{title:"生气",file:"http://images.mafengwo.net/images/i/face/daily_v2/27.png"},{title:"抓狂",file:"http://images.mafengwo.net/images/i/face/daily_v2/52.png"},{title:"汗",file:"http://images.mafengwo.net/images/i/face/daily_v2/54.png"},{title:"惊悚",file:"http://images.mafengwo.net/images/i/face/daily_v2/83.png"},{title:"生病",file:"http://images.mafengwo.net/images/i/face/daily_v2/47.png"},{title:"闭嘴",file:"http://images.mafengwo.net/images/i/face/daily_v2/25.png"},{title:"精灵",file:"http://images.mafengwo.net/images/i/face/daily_v2/44.png"},{title:"邪恶",file:"http://images.mafengwo.net/images/i/face/daily_v2/85.png"},{title:"魅力四射",file:"http://images.mafengwo.net/images/i/face/daily_v2/30.png"},{title:"吻",file:"http://images.mafengwo.net/images/i/face/daily_v2/33.png"},{title:"爱心",file:"http://images.mafengwo.net/images/i/face/daily_v2/32.png"},{title:"心碎",file:"http://images.mafengwo.net/images/i/face/daily_v2/31.png"},{title:"剪刀手",file:"http://images.mafengwo.net/images/i/face/daily_v2/88.png"},{title:"再见",file:"http://images.mafengwo.net/images/i/face/daily_v2/20.png"},{title:"赞",file:"http://images.mafengwo.net/images/i/face/daily_v2/28.png"},{title:"鼓掌",file:"http://images.mafengwo.net/images/i/face/daily_v2/96.png"},{title:"祈祷",file:"http://images.mafengwo.net/images/i/face/daily_v2/78.png"},{title:"甜蜜",file:"http://images.mafengwo.net/images/i/face/daily_v2/104.png"},{title:"太阳",file:"http://images.mafengwo.net/images/i/face/daily_v2/72.png"},{title:"下雨",file:"http://images.mafengwo.net/images/i/face/daily_v2/67.png"},{title:"闪电",file:"http://images.mafengwo.net/images/i/face/daily_v2/110.png"},{title:"雪",file:"http://images.mafengwo.net/images/i/face/daily_v2/112.png"},{title:"星星",file:"http://images.mafengwo.net/images/i/face/daily_v2/43.png"},{title:"月亮",file:"http://images.mafengwo.net/images/i/face/daily_v2/62.png"},{title:"飞机",file:"http://images.mafengwo.net/images/i/face/daily_v2/114.png"},{title:"自行车",file:"http://images.mafengwo.net/images/i/face/daily_v2/132.png"},{title:"人民币",file:"http://images.mafengwo.net/images/i/face/daily_v2/56.png"},{title:"王冠",file:"http://images.mafengwo.net/images/i/face/daily_v2/162.png"},{title:"足球",file:"http://images.mafengwo.net/images/i/face/daily_v2/41.png"},{title:"苹果",file:"http://images.mafengwo.net/images/i/face/daily_v2/38.png"},{title:"香蕉",file:"http://images.mafengwo.net/images/i/face/daily_v2/184.png"},{title:"西瓜",file:"http://images.mafengwo.net/images/i/face/daily_v2/39.png"},{title:"糖果",file:"http://images.mafengwo.net/images/i/face/daily_v2/196.png"},{title:"蜂蜜",file:"http://images.mafengwo.net/images/i/face/daily_v2/197.png"},{title:"餐厅",file:"http://images.mafengwo.net/images/i/face/daily_v2/64.png"},{title:"咖啡",file:"http://images.mafengwo.net/images/i/face/daily_v2/40.png"},{title:"干杯",file:"http://images.mafengwo.net/images/i/face/daily_v2/16.png"},{title:"蝴蝶结",file:"http://images.mafengwo.net/images/i/face/daily_v2/201.png"},{title:"礼物",file:"http://images.mafengwo.net/images/i/face/daily_v2/37.png"},{title:"生日蛋糕",file:"http://images.mafengwo.net/images/i/face/daily_v2/36.png"},{title:"庆祝",file:"http://images.mafengwo.net/images/i/face/daily_v2/207.png"},{title:"蚂蚁",file:"http://images.mafengwo.net/images/i/face/daily_v2/211.png"},{title:"蜜蜂",file:"http://images.mafengwo.net/images/i/face/daily_v2/212.png"},{title:"狗狗",file:"http://images.mafengwo.net/images/i/face/daily_v2/69.png"},{title:"猫猫",file:"http://images.mafengwo.net/images/i/face/daily_v2/68.png"},{title:"兔子",file:"http://images.mafengwo.net/images/i/face/daily_v2/215.png"},{title:"樱花",file:"http://images.mafengwo.net/images/i/face/daily_v2/232.png"},{title:"玫瑰",file:"http://images.mafengwo.net/images/i/face/daily_v2/35.png"},{title:"时钟",file:"http://images.mafengwo.net/images/i/face/daily_v2/235.png"},{title:"放大镜",file:"http://images.mafengwo.net/images/i/face/daily_v2/237.png"},{title:"注意",file:"http://images.mafengwo.net/images/i/face/daily_v2/51.png"},{title:"铅笔",file:"http://images.mafengwo.net/images/i/face/daily_v2/240.png"},{title:"信",file:"http://images.mafengwo.net/images/i/face/daily_v2/73.png"},{title:"灯泡",file:"http://images.mafengwo.net/images/i/face/daily_v2/243.png"},{title:"对话",file:"http://images.mafengwo.net/images/i/face/daily_v2/245.png"},{title:"图钉",file:"http://images.mafengwo.net/images/i/face/daily_v2/246.png"},{title:"喇叭",file:"http://images.mafengwo.net/images/i/face/daily_v2/247.png"},{title:"音乐",file:"http://images.mafengwo.net/images/i/face/daily_v2/63.png"},{title:"置顶",file:"http://images.mafengwo.net/images/i/face/daily_v2/258.png"},];b.mfweditor.controls.emotion={init:function(k,g){var d,c,j,h,f;h='<div class="d-emotion"><ul>';for(f=0;f<a.length;f+=1){h+='<li><img src="'+a[f].file+'" title="'+a[f].title+'" /></li>'}h+="</ul></div>";d=new b.mfweditor.dialog(k,{modal:false,content:h,left:b(g).offset().left,top:b(g).offset().top+b(g).outerHeight()});d.popkey="emotion";b(d).bind("afterOpen",function(m,l){b("li",l).click(function(o){o.preventDefault();var n=b(this).html();k.insertHtml(n);k.saveContent();d.close();k.editorDialog=null;return false})});if(k.editorDialog){if(d.popkey!==k.editorDialog.popkey){d.open();k.editorDialog.close();k.editorDialog=d}else{k.editorDialog.close();k.editorDialog=null}}else{d.open();k.editorDialog=d}}}})(jQuery);SidebarFollow=function(){this.config={element:null,distanceToTop:0};this.cache={originalToTop:0,prevElement:null,parentToTop:0,placeholder:jQuery("<div>")}};SidebarFollow.prototype={init:function(c){this.config=c||this.config;var a=this;var f=jQuery(a.config.element);if(f.length<=0){return}var b=f.prev();while(b.is(":hidden")){b=b.prev();if(b.length<=0){break}}a.cache.prevElement=b;var h=f.parent();var d=h.offset().top;var g=h.css("border-top");var j=h.css("padding-top");a.cache.parentToTop=d+g+j;jQuery(window).scroll(function(){a._scrollScreen({element:f,_self:a})});jQuery(window).resize(function(){a._scrollScreen({element:f,_self:a})})},_scrollScreen:function(f){var g=f._self;var c=f.element;var k=g.cache.prevElement;var h=g.config.distanceToTop;var a=parseInt(jQuery("body").css("top"),10);if(!isNaN(a)){h+=a}var b=c.offset().top-h;var j=0;if(k&&k.length===1){j=k.offset().top+k.outerHeight()}else{j=g.cache.parentToTop-h}if(jQuery(document).scrollTop()>b){var d=c.outerHeight();g.cache.placeholder.css("height",d).insertBefore(c);g.cache.originalToTop=b;c.css({top:h+"px",position:"fixed"})}else{if(g.cache.originalToTop>b||j>b){g.cache.placeholder.remove();c.css({position:"static"})}}}};var K=this.K||{};K.Resource=K.Resource||{};K.error=function(c,d){d=d||Error;throw new d(c)};K.global=this;(function(J){var Q=Array.prototype,z=Object.prototype,y=Function.prototype;var G=Q.slice,D=Q.unshift,E=z.toString,H=z.hasOwnProperty;var I=Q.forEach,R=Q.map,B=Q.reduce,T=Q.reduceRight,L=Q.filter,W=Q.every,C=Q.some,F=Q.indexOf,S=Q.lastIndexOf,U=Array.isArray,A=Object.keys,N=Object.create,P=y.bind;J.log=function(){if("console" in window&&"log" in window.console){var a=arguments.length;if(a==1){window.console.log(arguments[0])}else{if(a==2){window.console.log(arguments[0],arguments[1])}}}else{if(window.opera&&window.opera.postError){window.opera.postError.apply(window.opera,arguments)}}};var V={};J.forEach=function(b,d,g){if(b==null){return}if(I&&b.forEach===I){b.forEach(d,g)}else{if(J.isNumber(b.length)){for(var a=0,f=b.length;a<f;a++){if(d.call(g,b[a],a,b)==V){return}}}else{for(var c in b){if(H.call(b,c)){if(d.call(g,b[c],c,b)===V){return}}}}}};J.map=function(d,a,b){var c=[];if(d==null){return c}if(R&&d.map===R){return d.map(a,b)}J.forEach(d,function(f,h,g){c[c.length]=a.call(b,f,h,g)});return c};J.reduce=function(c,f,d,a){var b=d!==void 0;if(c==null){c=[]}if(B&&c.reduce===B){if(a){f=J.bind(f,a)}return b?c.reduce(f,d):c.reduce(f)}J.forEach(c,function(g,j,h){if(!b&&j===0){d=g;b=true}else{d=f.call(a,d,g,j,h)}});if(!b){throw new TypeError("Reduce of empty array with no initial value")}return d};J.reduceRight=function(f,a,d,c){if(f==null){f=[]}if(T&&f.reduceRight===T){if(c){a=J.bind(a,c)}return d!==void 0?f.reduceRight(a,d):f.reduceRight(a)}var b=(J.isArray(f)?f.slice():J.toArray(f)).reverse();return J.reduce(b,a,d,c)};J.detect=function(d,a,b){var c;J.some(d,function(f,h,g){if(a.call(b,f,h,g)){c=f;return true}});return c};J.filter=function(d,a,b){var c=[];if(d==null){return c}if(L&&d.filter===L){return d.filter(a,b)}J.forEach(d,function(f,h,g){if(a.call(b,f,h,g)){c[c.length]=f}});return c};J.every=function(d,a,b){var c=true;if(d==null){return c}if(W&&d.every===W){return d.every(a,b)}J.forEach(d,function(f,h,g){if(!(c=c&&a.call(b,f,h,g))){return V}});return c};J.some=function(d,a,b){a||(a=J.identity);var c=false;if(d==null){return c}if(C&&d.some===C){return d.some(a,b)}J.forEach(d,function(f,h,g){if(a.call(b,f,h,g)){c=true;return V}});return c};J.contains=function(a,b){var c=false;if(a==null){return c}if(F&&a.indexOf===F){return a.indexOf(b)!=-1}J.some(a,function(d){if(c=d===b){return true}});return c};J.pluck=function(a,b){return J.map(a,function(c){return c[b]})};J.sortBy=function(a,b,c){return J.pluck(J.map(a,function(d,g,f){return{value:d,criteria:b.call(c,d,g,f)}}).sort(function(d,f){var g=d.criteria,h=f.criteria;return g<h?-1:g>h?1:0}),"value")};J.sortedIndex=function(b,d,a){a||(a=J.identity);var g=0,f=b.length;while(g<f){var c=(g+f)>>1;a(b[c])<a(d)?g=c+1:f=c}return g};J.toArray=function(a){if(!a){return[]}if(a.toArray){return a.toArray()}if(J.isArray(a)){return a}if(J.isArguments(a)){return G.call(a)}return J.values(a)};J.last=function(a){var b=a.length;return b>0?a[b-1]:undefined};J.compact=function(a){return J.filter(a,function(b){return !!b})};J.flatten=function(a){return J.reduce(a,function(c,b){if(J.isArray(b)){return c.concat(J.flatten(b))}c[c.length]=b;return c},[])};J.without=function(a,b){var c=G.call(arguments,1);return J.filter(a,function(d){return !J.contains(c,d)})};J.unique=function(a,b){return J.reduce(a,function(c,d,f){if(0==f||(b===true?J.last(c)!=d:!J.contains(c,d))){c[c.length]=d}return c},[])};J.intersect=function(a){var b=G.call(arguments,1);return J.filter(J.unique(a),function(c){return J.every(b,function(d){return J.indexOf(d,c)>=0})})};J.indexOf=function(c,a,f){if(c==null){return -1}var b,d;if(f){b=J.sortedIndex(c,a);return c[b]===a?b:-1}if(F&&c.indexOf===F){return c.indexOf(a)}for(b=0,d=c.length;b<d;b++){if(c[b]===a){return b}}return -1};J.lastIndexOf=function(a,b){if(a==null){return -1}if(S&&a.lastIndexOf===S){return a.lastIndexOf(b)}var c=a.length;while(c--){if(a[c]===b){return c}}return -1};J.bind=function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){b=b||(this==J.global?false:this);var d=c.concat(Array.prototype.slice.call(arguments));if(typeof(a)=="string"&&b[a]){b[a].apply(b,d)}else{if(J.isFunction(a)){return a.apply(b,d)}else{J.log("not function",a)}}}};J.methodize=function(a,b){if(b){return function(){return a.apply(null,[this[b]].concat([].slice.call(arguments)))}}return function(){return a.apply(null,[this].concat([].slice.call(arguments)))}};J.extend=function(d,c){var b=function(){};b.prototype=c.prototype;var a=d.prototype;d.prototype=new b();d.$super=c;J.mix(d.prototype,a,true);return d};J.create=N||function(a,c){var b=function(d){if(d){J.mix(this,d,true)}};b.prototype=a;return new b(c)};J.delay=function(b,a){var c=G.call(arguments,2);return setTimeout(function(){return b.apply(b,c)},a)};J.defer=function(a){return J.delay.apply(J,[a,1].concat(G.call(arguments,1)))};J.keys=A||function(a){if(a!==Object(a)){throw new TypeError("Invalid object")}var b=[];for(var c in a){if(H.call(a,c)){b[b.length]=c}}return b};J.values=function(a){return J.map(a,J.identity)};J.methods=function(a){return J.filter(J.keys(a),function(b){return J.isFunction(a[b])}).sort()};J.mix=function(a){J.forEach(G.call(arguments,1),function(c){for(var b in c){if(c[b]!==void 0){a[b]=c[b]}}});return a};J.clone=function(a){return J.isArray(a)?a.slice():J.mix({},a)};J.isEmpty=function(a){if(J.isArray(a)||J.isString(a)){return a.length===0}for(var b in a){if(H.call(a,b)){return false}}return true};J.isElement=function(a){return !!(a&&a.nodeType==1)};J.isArray=U||function(a){return E.call(a)==="[object Array]"};J.isFunction=function(a){return !!(a&&a.constructor&&a.call&&a.apply)};if(E.call(arguments)=="[object Arguments]"){J.isArguments=function(a){return E.call(a)=="[object Arguments]"}}else{J.isArguments=function(a){return !!(a&&H.call(a,"callee"))}}J.isString=function(a){return !!(a===""||(a&&a.charCodeAt&&a.substr))};J.isNumber=function(a){return !!(a===0||(a&&a.toExponential&&a.toFixed))};J.isNaN=function(a){return a!==a};J.isBoolean=function(a){return a===true||a===false};J.isDate=function(a){return !!(a&&a.getTimezoneOffset&&a.setUTCFullYear)};J.isRegExp=function(a){return !!(a&&a.test&&a.exec&&(a.ignoreCase||a.ignoreCase===false))};J.isNull=function(a){return a===null};J.isUndefined=function(a){return a===void 0};J.trim=function(a){return a.replace(/^[\s\xa0\u3000]+|[\u3000\xa0\s]+$/g,"")};J.byteLen=function(a){return a.replace(/[^\x00-\xff]/g,"--").length};J.subByte=function(a,c,b){if(J.byteLen(a)<=c){return a}b=b||"";c-=J.byteLen(b);return a.substr(0,c).replace(/([^\x00-\xff])/g,"$1 ").substr(0,c).replace(/[^\x00-\xff]$/,"").replace(/([^\x00-\xff]) /g,"$1")+b};J.encode4JS=function(a){return a.replace(/\\/g,"\\u005C").replace(/"/g,"\\u0022").replace(/'/g,"\\u0027").replace(/\//g,"\\u002F").replace(/\r/g,"\\u000A").replace(/\n/g,"\\u000D").replace(/\t/g,"\\u0009")};J.encode4HTTP=function(a){return a.replace(/[\u0000-\u0020\u0080-\u00ff\s"'#\/\|\\%<>\[\]\{\}\^~;\?\:@=&]/,function(b){return encodeURIComponent(b)})};J.encode4Html=function(a){return a.replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};J.encode4HtmlValue=function(a){return J.encode4Html(a).replace(/"/g,"&quot;").replace(/'/g,"&#039;")};J.stripTags=function(a){return a.replace(/<[^>]*>/gi,"")};J.formatDate=function(d,a){a=a||"yyyy-MM-dd";var b=d.getFullYear();var f={M:d.getMonth()+1,d:d.getDate(),h:d.getHours(),m:d.getMinutes(),s:d.getSeconds()};a=a.replace(/(y+)/ig,function(g,h){var j=Math.min(4,h.length);return(b+"").substr(4-j)});for(var c in f){a=a.replace(new RegExp("("+c+"+)","g"),function(g,h){return(f[c]<10&&h.length>1)?"0"+f[c]:f[c]})}return a};J.identity=function(a){return a};var O=0;J.uniqueId=function(b){var a=O++;return b?b+a:a}})(K);(function(f,h){var g;var j=function(){var a=["touchstart","touchmove","touchend"],p=true;var q=document.createElement("div");for(var b=0,d=a.length;b<d;b++){var o="on"+a[b];var c=(o in q);if(!c){q.setAttribute(o,"return;");c=typeof q[o]=="function"}if(!c){p=false;break}}return p};f.isSupportTouch=function(){if(g===h){g=j()}return g}})(K);K.Browser=(function(){var h=window.navigator,l=h.userAgent.toLowerCase(),k=/(msie|webkit|gecko|presto|opera|safari|firefox|chrome|maxthon)[ \/]([\d.]+)/ig,j={platform:h.platform};l.replace(k,function(b,d,a){var c=d.toLowerCase();j[c]=a});if(j.opera){l.replace(/opera.*version\/([\d.]+)/,function(a,b){j.opera=b})}if(j.msie){j.ie=j.msie;var g=parseInt(j.msie,10);j["ie"+g]=true}if(j.safari&&j.chrome){j.safari=false}return j}());if(K.Browser.ie){try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}}function onDetectFocus(){K.windowFocused=true}function onDetectBlur(){K.windowFocused=false}K.windowFocused=true;if(K.Browser.ie){document.attachEvent("onfocusin",onDetectFocus);document.attachEvent("onfocusout",onDetectBlur)}else{window.addEventListener("focus",onDetectFocus,false);window.addEventListener("blur",onDetectBlur,false)}(function(d){var c=function(){this.__callbacks__={}};d.mix(c.prototype,{on:function(h,a,b){if(b){a=d.bind(a,b)}var j=this.__callbacks__[h];if(j&&j.fired===true){a.apply(b,j.args);return}this.__callbacks__[h]=this.__callbacks__[h]||[];this.__callbacks__[h].push(a);return[h,a]},un:function(b){var j=b[0];var a=b[1];if(j in this.__callbacks__){var h=this.__callbacks__[j];d.forEach(h,function(g,f){if(a==g){h[f]=null}})}},once:function(l,a,k){var j=this;var b=this.on(l,function(){a.apply(k,arguments);j.un(b)})},fire:function(b){if(b in this.__callbacks__){var a=this.__callbacks__[b];var g=Array.prototype.slice.call(arguments,1);d.forEach(a,function(f,j){if(typeof(f)!="function"){return null}return f.apply(null,g)})}},fireReady:function(b){var a=this.__callbacks__[b];if(!a){a=this.__callbacks__[b]=[]}var g=Array.prototype.slice.call(arguments,1);d.forEach(a,function(f,j){if(typeof(f)!="function"){return null}return f.apply(null,g)});a.fired=true;a.args=g}});d.Pubsub=c;d.mix(d,(new c()))})(K);(function(j,m,n){var k={};var o={};function p(a,b,c){if(j.indexOf(b,a)>=0){throw new Error("Module:"+a+" could't depends on itself!")}this.id=a;this.dependancy=b;this.factory=c}function l(b,c,d){if(arguments.length<2){throw new Error("module has invalid parameters")}if(!j.isString(b)){throw new Error("module must have a ID")}if(j.isFunction(c)){d=c;c=[]}else{if(!j.isArray(c)){var a=c;d=function(){return a};c=[]}}if(k[b]){j.fire("haibei:resource:conflict");return}var f=j.unique(c),g=p.getDependancy(f);p.wait(g,function(){var r=new p(b,c,d);k[b]=r;try{delete o[b]}catch(h){}j.fire("Module:"+b+":Ready")})}p.createRequire=function(a,b){function c(f,g){if(!g&&j.indexOf(a,f)==-1){throw new Error(f+" counld't be required in "+b+", as you not declared to depend it ")}var d=k[f];if(!d){return null}if(!d.exports){q(d)}return d.exports}c.async=function(r,f,h){r=j.isString(r)?[r]:r;var d=j.unique(r);var g=p.getDependancy(d);p.load(g);p.wait(g,function(){var u=[];for(var w=0,v=r.length;w<v;w++){u.push(c(r[w],true))}f.apply(h||n,u)})};return c};p.getDependancy=function(a){return m.getDependancy(a)};p.load=function(a){a=j.isString(a)?[a]:a;j.forEach(a,function(b){m.loadModule(b)})};p.defined=function(){return k};p.waiting=function(){return j.keys(o)};p.check=function(b,a){b=j.trim(b);if(b.length==0||k[b]){a&&a()}else{o[b]=true;j.on("Module:"+b+":Ready",a)}};p.wait=function(b,a){b=[].concat(b);if(b.length>0){var c=b.shift();p.check(c,function(){p.wait(b,a)})}else{a&&a()}};function q(a){var c=a.factory,b;if(j.isFunction(c)){a.exports={};b=c(p.createRequire(a.dependancy,a.id),a.exports,a);if(b){a.exports=b}}else{if(c!==undefined){a.exports=c}}}n.define=j.define=l;n.Module=j.Module=p})(K,K.Resource,this);(function(v,I){var G={};var z={};var w="http://js.mafengwo.net/";var s=/\.js$/i;var t={};var E={};var y=[];var H=[];var D;I.addResourceMap=function(a){v.mix(G,a)};I.getResourceMap=function(a){return G[a]};I.addResourceDepends=function(a){v.mix(z,a)};I.setBasePath=function(a){w=a};I.getDependancy=function(a,b){var c=[];a=v.isString(a)?[a]:a;b=b||[];v.forEach(a,function(g){g=g.replace(s,"");b=b.concat(c);if(v.indexOf(b,g)==-1){c.unshift(g)}var d=z[g+".js"];if(!d){return}var f=I.getDependancy(d,b);if(f.length){c.unshift.apply(c,f)}});return c};var C=/^\/+|\/+$/ig;I.loadModule=function(b){b=b.replace(C,"");if(!s.test(b)){b+=".js"}var a=G[b];if(a){I.loadJS(w+a)}};I.canonicalURI=function(a){if(/^\/\/\/?/.test(a)){a=location.protocol+a}return a};var F=function(d){var a=y,b,c;for(c=0;c<a.length;c++){b=a[c];for(var f=0;f<b.resources.length;f++){if(d==b.resources[f]){b.resources.splice(f,1);f--}}if(!b.resources.length){b.callback&&b.callback();a.splice(c--,1)}}};var B=function(){var h=document.styleSheets,b=h.length,f=H;while(b--){var j=h[b],a=false;if(!v.Browser.firefox){a=true}else{try{if(j.cssRules){a=true}}catch(c){if(c.name==="SecurityError"||c.name==="NS_ERROR_DOM_SECURITY_ERR"){a=true}}}if(a){var g=j.ownerNode||j.owningElement,d=f.length;if(g){while(d--){if(g==f[d]){F(f[d]["data-href"]);f.splice(d,1)}}}}}if(!f.length){clearInterval(D);D=null}};var u=function(b,a){if(a){y.push({resources:b,callback:a})}for(var c in b){var d=document.createElement("script");var a=function(){d.onload=d.onerror=d.onreadystatechange=null;F(b[c])};v.mix(d,{type:"text/javascript",src:b[c],async:true});d.onload=d.onerror=a;d.onreadystatechange=function(){var f=this.readyState;if(f=="complete"||f=="loaded"){a()}};document.getElementsByTagName("head")[0].appendChild(d)}};var A=function(b,a){if(a){y.push({resources:b,callback:a})}for(var d in b){var c=document.createElement("link");v.mix(c,{type:"text/css",rel:"stylesheet",href:b[d],"data-href":b[d]});document.getElementsByTagName("head")[0].appendChild(c);if(c.attachEvent){var a=function(){F(b[d])};c.onload=a}else{H.push(c);if(!D){D=setInterval(B,20)}}}};var x=function(b,h){var a={},f=[],c=[];b=v.isArray(b)?b:[b];for(var d=0,g=b.length;d<g;d++){if(~b[d].indexOf(".css")){f.push(b[d])}else{c.push(b[d])}}$.get("/ajax/ajax_fetch_cssjs.php",{css_list:f,js_list:c},function(j){j=$.parseJSON(j);if("css_list" in j){A(j.css_list,function(){if("js_list" in j){u(j.js_list,h)}else{if(h){h()}}})}else{if("js_list" in j){u(j.js_list,h)}}})};I.loadJS=function(b,a){x(b,a)};I.loadCSS=function(b,a){x(b,a)};I.loadIMG=function(b,a){var c=new Image();a=typeof a==="function"?a:function(){};c.onload=function(){c.onload=null;a.call(null,c)};if(c.readyState=="complete"){a.call(null,c)}c.src=b}})(K,K.Resource);(function(p){var o=false;var q=false;p.ready=function(a){if(o){a()}else{p.on("Onload:DomContentLoaded",a)}};p.load=function(a){if(q){a()}else{p.on("Onload:Loaded",a)}};var l=function(){if(!o){o=true;p.fire("Onload:DomContentLoaded")}};var m=function(){if(!q){q=true;p.fire("Onload:Loaded")}};var j;if(document.addEventListener){j=function(){document.removeEventListener("DOMContentLoaded",j,false);l()}}else{if(document.attachEvent){j=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",j);l()}}}}var k=function(){if(o){return}try{document.documentElement.doScroll("left")}catch(a){setTimeout(k,1);return}document.detachEvent("onreadystatechange",j);l()};var n=function(){var b=p.global,d=b.document,f=function(){if(!o){o=true;l()}m()};if(d.readyState=="complete"){setTimeout(l,0);return}if(d.addEventListener){d.addEventListener("DOMContentLoaded",j,false);b.addEventListener("load",f,false)}else{if(d.attachEvent){d.attachEvent("onreadystatechange",j);b.attachEvent("onload",f);var c=false;try{c=b.frameElement==null}catch(a){}if(d.documentElement.doScroll&&c){k()}}}};n()})(K);(function(r,u){var o="require getContainer".split(/\s+/ig);var w={};function z(a,c,b){if(w[a]){r.fire("haibei:resource:conflict");throw new Error("App:"+a+" has defined");return}w[a]=this;this.id=a;this.requiredModList=[].concat(c);this.execBeforeDomready=b}r.mix(z.prototype,{define:function(d){var f=r.unique(this.requiredModList),a=u.getDependancy(f),b=this,c=function(){r.fire("App:"+b.id+":Ready",b)};u.wait(a,function(){var k=u.createRequire(f,b.id);if(r.isFunction(d)){d=d.call({},k)}if(!d){return}var j,h,m;for(j=0,h=o.length;j<h;j++){m=o[j];if(d[m]){throw new Error(m+" is a reserve method or property")}}d.require=k;var g=d.require("core/jQuery");b.__jQuery__=g;if(d.container&&g(d.container).length==0){return}var l=A(d,g);if(d.events){v(d,g,l)}if(r.isFunction(d.main)){if(b.execBeforeDomready){d.main();c()}else{r.ready(function(){d.main();c()})}}else{c()}})}});function A(b,a){var c;if(!b.container){b.container=document.body}c=a(b.container);if(!c.length||c.length>1){c=a(document.body)}b.container=c;b.getContainer=function(){return c};return c}var t=/^([\w\.]+)(?:\s+(.*))?$/;function v(a,b,d){var c=a.events;r.map(c,function(h,k){var j=k.match(t),g=j[1],l=j[2],f=r.bind(a[h],a);if(!l){d.bind(g,f)}else{d.delegate(l,g,r.bind(a[h],a))}})}var p=0;function s(){return"__APP__"+(p++)}function x(b){var a=b[0];if(a&&r.isString(a)){if(r.last(a.split(/\//ig)).charAt(0)!="A"){throw new Error(a+" is a invalid name for a App")}}else{a=s()}return a}function y(a){return r.detect(a,function(b){return r.isArray(b)})||[]}function q(b){var a=r.last(b);return r.isBoolean(a)?a:false}r.App=function(a,b,c){return new z(x(arguments),y(arguments),q(arguments))};r.App.get=function(a){return w[a]||null}})(K,K.Module);(function(f){var h=f.mix,j=f.indexOf;var g=f.CustEvent=function(a,b,c){this.target=a;this.type=b;h(this,c||{})};h(g.prototype,{target:null,currentTarget:null,type:null,returnValue:undefined,preventDefault:function(){this.returnValue=false}});f.CustEventTargetH={on:function(b,a,c){var d=(b.__custListeners&&b.__custListeners[a])||f.error("unknown event type",TypeError);if(j(d,c)>-1){return false}d.push(c);return true},once:function(b,a,c){var k=(b.__custListeners&&b.__custListeners[a])||f.error("unknown event type",TypeError);var d=$.proxy(function(l){c.call(b,l);f.CustEventTargetH.un(b,a,d)},this);f.CustEventTargetH.on(b,a,d);return true},un:function(b,a,c){var d=(b.__custListeners&&b.__custListeners[a])||f.error("unknown event type",TypeError);if(c){var k=j(d,c);if(k<0){return false}d.splice(k,1)}else{d.length=0}return true},fire:function(a,r,p){if(r instanceof g){var q=h(r,p);r=r.type}else{q=new g(a,r,p)}var o=(a.__custListeners&&a.__custListeners[r])||f.error("unknown event type",TypeError);if(r!="*"){o=o.concat(a.__custListeners["*"]||[])}q.returnValue=undefined;q.currentTarget=a;var b=q.currentTarget;if(b&&b["on"+q.type]){var c=b["on"+q.type].call(b,q)}for(var d=0;d<o.length;d++){o[d].call(b,q)}return q.returnValue!==false||(c===false&&q.returnValue===undefined)},createEvents:function(a,c){c=c||[];if(typeof c=="string"){c=c.split(",")}var b=a.__custListeners;if(!b){b=a.__custListeners={}}for(var d=0;d<c.length;d++){b[c[d]]=b[c[d]]||[]}b["*"]=b["*"]||[];return a}}}(K));(function(d){var f=function(){};var g={methodize:function(a,j){var c=new f();for(var b in a){if(typeof a[b]=="function"&&!/^_/.test(b)){c[b]=d.methodize(a[b],j)}}return c}};d.Helper=g}(K));(function(g){var j=g.mix;var h=g.CustEventTarget=function(){this.__custListeners={}};var f=g.Helper.methodize(g.CustEventTargetH,null,{on:"operator",un:"operator"});j(h.prototype,f);g.CustEvent.createEvents=h.createEvents=function(a,b){g.CustEventTargetH.createEvents(a,b);return j(a,h.prototype)}}(K));(function(b){b.Env={}})(K);(function(b){b.onbeforeunload=function(d){if(!d){return}if(typeof window.onbeforeunload=="function"){var a=window.onbeforeunload;window.onbeforeunload=function(){var g=d.apply(null,arguments);var c=a.apply(null,arguments);return c?c:g}}else{window.onbeforeunload=d}}})(K);(function(d){d.Performance={timing:{}};var c=window.performance||window.msPerformance||window.webkitPerformance||window.mozPerformance;if(c&&c.timing){d.Performance.timing=c.timing}else{d.Performance.timing.responseStart=d.global.pageStart;d.ready(function(){d.Performance.timing.domContentLoadedEventStart=(new Date()).getTime()});d.load(function(){d.Performance.timing.loadEventStart=(new Date()).getTime()})}})(K);(function(q){var o=function(a,b){b=b.toUpperCase();while(a&&a.nodeName!=b){a=a.parentNode}return a};var r=function(a,b){if("hasAttribute" in a){return a.getAttribute(b)}else{if("getAttributeNode" in a){var c=a.getAttributeNode(b);if(c){return c.value}}}return undefined};var l=function(a){if(!("App" in q)||!q.App.get(a)){q.log(a,"not ready");return false}return true};var n=function(b){var a=r(b,"data-app");if(a&&a.length&&!l(a)){return a}return false};var m=function(b,h,d){var c=n(b),f,a,g;if(c){q.once("App:"+c+":Ready",function(j){j.__jQuery__(d||b)[h]()});return false}else{if(h=="click"){f=b.getAttribute("data-ajax");g=b.getAttribute("data-op-log");if(g&&g.length){Request.apiLog(b)}if(f&&f.length){a=b.getAttribute("data-ajax-url")||b.href;switch(f){case"request-post":case"request":Request.load(a,b);break;case"dialog-post":case"dialog":Request.loadDialog(a,b);break;default:return}return false}}}return};var u=function(a){var b=o(a,"FORM")||a;return m(b,"submit")};var p=function(a){var b=o(a,"A")||a;return m(b,"click",a)};var t=(function(){var a=document.createElement("div");var b=("onsubmit" in a);if(!b){a.setAttribute("onsubmit","return;");b=typeof a.onsubmit==="function"}return b})();var s=function(){var b=q.global.document,a=b.documentElement;var c=null;a.onclick=function(d){d=d||window.event;c=d.target||d.srcElement;if(!t){var f=c.type;if(f=="submit"||f=="image"){return u(c)}}var j=c.href;if(j&&!/#$/.test(j)){var g=(d.which&&d.which!=1),h=(d.altKey||d.ctrlKey||d.metaKey||d.shiftKey);if(g||h){return}}return p(c)};if(!t){a.onkeypress=function(d){d=d||window.event;c=d.target||d.srcElement;var f=c.type;if((f=="text"||f=="password")&&d.keyCode==13){return u(c)}return}}if(t){a.onsubmit=function(d){d=d||window.event;var f=d.target||d.srcElement;return u(f)}}};s()})(K);K.on("login:required",$.proxy(function(){show_login()},this));K.on("hb:incr",$.proxy(function(d){var c=parseInt(d.html(),10);d.UpNum("+1",function(){d.html(c+1)})},this));K.on("hb:decr",$.proxy(function(d){var c=parseInt(d.html(),10);d.UpNum("-1",function(){d.html(c-1)})},this));function showPrompt(f){$.prompt.close();var d={};var g={buttons:d};$.prompt(f,g);$("div.jqiclose").hide();$("div.jqifade").css("background-color","#000")}$(function(){$("body").delegate("._j_add_friend","click",function(f){f.preventDefault();var g=$(this);var d=parseInt(g.data("to_uid"),10);if(d==0){return false}$.post("/ajax/addfriend.php",{action:"addfriend",touid:d,_need_cstk:true},function(a){if(a.ret=="1"){if(g.hasClass("_j_remove")){g.remove()}else{g.replaceWith(a.html)}}else{majaxerr(a)}},"json")}).delegate("._j_write_address","click",function(b){b.preventDefault();$.prompt.close();if(window.__mfw_uid===0){show_login();return false}K.Resource.loadCSS("http://css.mafengwo.net/css/msg_li.css");$.post("/ajax/ajax_user_ext_add.php",{action:"get_float_address"},function(a){if(a.ret==1){$.prompt(a.html,{buttons:{"提交":true},callback:function(k,l,f){if(k){var j={action:"address",true_name:$("#true_name",$(l)).val(),mobile:$("#mobile",$(l)).val(),zip_code:$("#zip_code",$(l)).val(),address:$("#address",$(l)).val()};$.post("/ajax/ajax_user_ext_add.php",j,function(c){if(c.ret==1){mTinyAlert("操作成功！")}else{majaxerr(c)}},"json")}}})}else{majaxerr(a)}},"json")})});var Cache={};var Request=function(b){if(b){this.setURI(b)}this._method="GET";this._dataType="json";this._data={};this._options={};this._xhr=null};K.mix(Request,{load:function(l,k){var h=$(k),j=h.attr("data-ajax")=="request-post"?"POST":"GET";var g=h.find("._j_loading_elem");if(!g.length){g=h}if(g.hasClass("loading")){return}new Request(l).setMethod(j).setRelativeTo(k).setLoadingElement(g).send()},loadDialog:function(l,k){var h=$(k),j=h.attr("data-ajax")=="dialog-post"?"POST":"GET";var g=h.find("._j_loading_elem");if(!g.length){g=h}if(g.hasClass("loading")){return}new Request(l).setMethod(j).setRelativeTo(k).setLoadingElement(g).send().setHandler(function(b){if(b.html.length>0){var a=b.params;a=$.parseJSON(a);$.prompt.close();$.prompt(b.html,a);$("._j_prompt_close").click(function(c){c.preventDefault();$.prompt.close()});K.fire("after:dialog:show",a)}})},apiLog:function(k){var g=$(k),j=g.attr("data-type"),h=g.attr("data-mk");var l="/ajax/ajax_op_log_api.php?type="+encodeURIComponent(j)+"&mk="+encodeURIComponent(h);new Request(l).setMethod("GET").send()},invalidate:function(b){return ResponseCache.invalidate(Request.normalizeURI(b))},normalizeURI:function(h,k){var g=new URI(h);var j={};var l=K.mix({},k,g.getQueryParams());K.forEach(l,function(a,b){if(!/^_/.test(b)){j[b]=a}});g.setQueryParams(j);return g.setProtocol(null).setDomain(null).setFragment(null).toString()}});K.mix(Request.prototype,{setMethod:function(b){this._method=b;return this},getMethod:function(){return this._method},setDataType:function(b){this._dataType=b;return this},getDataType:function(){return this._dataType},setData:function(b){this._data=b;return this},getData:function(){return this._data},setURI:function(b){this._uri=b;return this},getURI:function(){return this._uri},setHandler:function(b){if(K.isFunction(b)){this._handler=b}return this},getHandler:function(){return this._handler},setErrorHandler:function(b){this._errorHandler=b;return this},getErrorHandler:function(){return this._errorHandler},setRelativeTo:function(b){this._relativeTo=b;return this},setFinallyHandler:function(b){this._finallyHandler=b;return this},getFinallyHandler:function(){return this._finallyHandler},getRelativeTo:function(){return this._relativeTo},setLoadingElement:function(b){this._loadingElement=b;return this},getLoadingElement:function(b){return this._loadingElement},setOption:function(d,c){this._options[d]=c;return this},getOption:function(b){return this._options[b]},send:function(){if(this.getMethod()=="GET"){var d=ResponseCache.get(Request.normalizeURI(this.getURI(),this.getData()));if(d){this._invokeResponseHandler(d);return}}this._updateLoadingElement(true);var c=this;this._xhr=$.ajax({type:this._method,url:this._uri,data:this._data,dataType:this._dataType,success:function(b,g,a){if(a.status==204){c._invokeResponseHandler({})}else{if(!b.error){c._invokeResponseHandler(b)}else{c._invokeErrorHandler(b)}}},error:function(a){c._invokeErrorHandler({error:a})},complete:function(){c._updateLoadingElement(false)}});return this},abort:function(){this._xhr&&this._xhr.abort();return this}});K.mix(Request.prototype,{_updateLoadingElement:function(b){if(this._loadingElement){if(b){$(this._loadingElement).addClass("loading")}else{$(this._loadingElement).removeClass("loading")}}},_invokeResponseHandler:function(b){if("redirect" in b){window.location=b.redirect;return}if(this.getMethod()=="GET"&&b.cache){ResponseCache.set(Request.normalizeURI(this.getURI(),this.getData()),b,60000)}if(this.getOption("suppressEval")){this._loadResource(b.resource,function(){});return}if("resource" in b){this._loadResource(b.resource,K.bind(function(){this._dispatchResponse(b)},this))}else{this._dispatchResponse(b)}},_invokeErrorHandler:function(b){if(this.getOption("suppressEval")){return}if(b&&b.resource){this._loadResource(b.resource,K.bind(function(){this._dispatchErrorResponse(b)},this))}else{this._dispatchErrorResponse(b)}},_loadResource:function(j,h){var f=this;var g=function(){h();if("js" in j&&!K.isEmpty(j.js)){K.Resource.loadJS(j.js)}if("map" in j){if(j.map.depends){K.Resource.addResourceDepends(j.map.depends)}if(j.map.uris){K.Resource.addResourceMap(j.map.uris)}}if(!f.getOption("suppressEval")){if("onload" in j){K.forEach(j.onload,function(a){try{(new Function(a)).apply(f)}catch(b){K.log(a)}})}}};if("css" in j&&!K.isEmpty(j.css)){K.Resource.loadCSS(j.css,g)}else{g()}},_dispatchResponse:function(b){if(b.suppressHandler){return}if(this._handler){this._handler(b.payload,this)}if(this._finallyHandler){this._finallyHandler(this)}},_dispatchErrorResponse:function(b){if(b.suppressHandler){return}if(this._errorHandler){this._errorHandler(b.error,this)}if(this._finallyHandler){this._finallyHandler(this)}}});var now=function(){return new Date().getTime()};var ResponseCache={set:function(h,f,g){var j=this._getCacheKey(h);if(j){this._setCache(j,{uri:h,response:f,time:now(),expires:g});return true}return false},get:function(c){var d=this._getCacheKey(c);if(d){return this._getCache(d)}return false},invalidate:function(c){var d=this._getCacheKey(c);if(d){return delete this._cache[d]}return false},clear:function(){this._cache=[]},_getCacheKey:function(b){return b},_setCache:function(d,c){this._cache[d]=c},_getCache:function(d){if(d in this._cache){var c=this._cache[d];if(c.expires>0&&now()<=c.time+c.expires){return c.response}}return false},_cache:{}};var URI=function(n){this.setQueryParams({});if(n){var j=URI._uriPattern.exec(n);this.setProtocol(j[1]||undefined);this.setDomain(j[2]||undefined);this.setPort(j[3]||undefined);var k=j[4];var l=j[5];this.setFragment(j[6]||undefined);this.setPath(k.charAt(0)=="/"?k:"/"+k);if(l){var h={};var m;while((m=URI._queryPattern.exec(l))!=null){h[decodeURIComponent(m[1].replace(/\+/g," "))]=decodeURIComponent(m[2].replace(/\+/g," "))}this.setQueryParams(h)}}};K.mix(URI,{_uriPattern:/(?:([^:\/?#]+):)?(?:\/\/([^:\/?#]*)(?::(\d*))?)?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/,_queryPattern:/(?:^|&)([^&=]*)=?([^&]*)/g,_defaultQuerySerializer:function(c){var d=[];K.forEach(c,function(a,b){if(a!=null){d.push(encodeURIComponent(b)+(a?"="+encodeURIComponent(a):""))}});return d.join("&")}});K.mix(URI.prototype,{getProtocol:function(){return this._protocol},setProtocol:function(b){this._protocol=b;return this},getDomain:function(){return this._domain},setDomain:function(b){this._domain=b;return this},getPort:function(){return this._port},setPort:function(b){this._port=b;return this},getPath:function(b){return this._path},setPath:function(b){this._path=b;return this},getQueryParams:function(){return this._queryParams},addQueryParams:function(b){K.mix(this.getQueryParams(),b);return this},setQueryParams:function(b){this._queryParams=b;return this},setQueryParam:function(f,d){var g={};g[f]=d;return this.addQueryParams(g)},getFragment:function(){return this._fragment},setFragment:function(b){this._fragment=b;return this},getQuerySerializer:function(){return this._querySerializer},setQuerySerializer:function(b){this._querySerializer=b},_getQueryString:function(){var b=(this.getQuerySerializer()||URI._defaultQuerySerializer)(this.getQueryParams());return b?"?"+b:""},go:function(){var b=this.toString();(b&&(window.location=b))||window.location.reload(true)}});URI.prototype.toString=function(){var b="";if(this.getProtocol()){b+=this.getProtocol()+"://"}b+=this.getDomain()||"";b+=this.getPath()||(b?"/":"");b+=this._getQueryString();if(this.getFragment()){b+="#"+this.getFragment()}return b};(function($){var supportedCSS,supportedCSSOrigin,styles=document.getElementsByTagName("head")[0].style,toCheck="transformProperty WebkitTransform OTransform msTransform MozTransform".split(" ");for(var a=0;a<toCheck.length;a++){if(styles[toCheck[a]]!==undefined){supportedCSS=toCheck[a]}}if(supportedCSS){supportedCSSOrigin=supportedCSS.replace(/[tT]ransform/,"TransformOrigin");if(supportedCSSOrigin[0]=="T"){supportedCSSOrigin[0]="t"}}eval('IE = "v"=="\v"');jQuery.fn.extend({rotate:function(parameters){if(this.length===0||typeof parameters=="undefined"){return}if(typeof parameters=="number"){parameters={angle:parameters}}var returned=[];for(var i=0,i0=this.length;i<i0;i++){var element=this.get(i);if(!element.Wilq32||!element.Wilq32.PhotoEffect){var paramClone=$.extend(true,{},parameters);var newRotObject=new Wilq32.PhotoEffect(element,paramClone)._rootObj;returned.push($(newRotObject))}else{element.Wilq32.PhotoEffect._handleRotation(parameters)}}return returned},getRotateAngle:function(){var ret=[];for(var i=0,i0=this.length;i<i0;i++){var element=this.get(i);if(element.Wilq32&&element.Wilq32.PhotoEffect){ret[i]=element.Wilq32.PhotoEffect._angle}}return ret},stopRotate:function(){for(var i=0,i0=this.length;i<i0;i++){var element=this.get(i);if(element.Wilq32&&element.Wilq32.PhotoEffect){clearTimeout(element.Wilq32.PhotoEffect._timer)}}}});Wilq32=window.Wilq32||{};Wilq32.PhotoEffect=(function(){if(supportedCSS){return function(img,parameters){img.Wilq32={PhotoEffect:this};this._img=this._rootObj=this._eventObj=img;this._handleRotation(parameters)}}else{return function(img,parameters){this._img=img;this._onLoadDelegate=[parameters];this._rootObj=document.createElement("span");this._rootObj.style.display="inline-block";this._rootObj.Wilq32={PhotoEffect:this};img.parentNode.insertBefore(this._rootObj,img);if(img.complete){this._Loader()}else{var self=this;jQuery(this._img).bind("load",function(){self._Loader()})}}}})();Wilq32.PhotoEffect.prototype={_setupParameters:function(parameters){this._parameters=this._parameters||{};if(typeof this._angle!=="number"){this._angle=0}if(typeof parameters.angle==="number"){this._angle=parameters.angle}this._parameters.animateTo=(typeof parameters.animateTo==="number")?(parameters.animateTo):(this._angle);this._parameters.step=parameters.step||this._parameters.step||null;this._parameters.easing=parameters.easing||this._parameters.easing||this._defaultEasing;this._parameters.duration=parameters.duration||this._parameters.duration||1000;this._parameters.callback=parameters.callback||this._parameters.callback||this._emptyFunction;this._parameters.center=parameters.center||this._parameters.center||["50%","50%"];if(typeof this._parameters.center[0]=="string"){this._rotationCenterX=(parseInt(this._parameters.center[0],10)/100)*this._imgWidth*this._aspectW}else{this._rotationCenterX=this._parameters.center[0]}if(typeof this._parameters.center[1]=="string"){this._rotationCenterY=(parseInt(this._parameters.center[1],10)/100)*this._imgHeight*this._aspectH}else{this._rotationCenterY=this._parameters.center[1]}if(parameters.bind&&parameters.bind!=this._parameters.bind){this._BindEvents(parameters.bind)}},_emptyFunction:function(){},_defaultEasing:function(x,t,b,c,d){return -c*((t=t/d-1)*t*t*t-1)+b},_handleRotation:function(parameters,dontcheck){if(!supportedCSS&&!this._img.complete&&!dontcheck){this._onLoadDelegate.push(parameters);return}this._setupParameters(parameters);if(this._angle==this._parameters.animateTo){this._rotate(this._angle)}else{this._animateStart()}},_BindEvents:function(events){if(events&&this._eventObj){if(this._parameters.bind){var oldEvents=this._parameters.bind;for(var a in oldEvents){if(oldEvents.hasOwnProperty(a)){jQuery(this._eventObj).unbind(a,oldEvents[a])}}}this._parameters.bind=events;for(var a in events){if(events.hasOwnProperty(a)){jQuery(this._eventObj).bind(a,events[a])}}}},_Loader:(function(){if(IE){return function(){var width=this._img.width;var height=this._img.height;this._imgWidth=width;this._imgHeight=height;this._img.parentNode.removeChild(this._img);this._vimage=this.createVMLNode("image");this._vimage.src=this._img.src;this._vimage.style.height=height+"px";this._vimage.style.width=width+"px";this._vimage.style.position="absolute";this._vimage.style.top="0px";this._vimage.style.left="0px";this._aspectW=this._aspectH=1;this._container=this.createVMLNode("group");this._container.style.width=width;this._container.style.height=height;this._container.style.position="absolute";this._container.style.top="0px";this._container.style.left="0px";this._container.setAttribute("coordsize",width-1+","+(height-1));this._container.appendChild(this._vimage);this._rootObj.appendChild(this._container);this._rootObj.style.position="relative";this._rootObj.style.width=width+"px";this._rootObj.style.height=height+"px";this._rootObj.setAttribute("id",this._img.getAttribute("id"));this._rootObj.className=this._img.className;this._eventObj=this._rootObj;var parameters;while(parameters=this._onLoadDelegate.shift()){this._handleRotation(parameters,true)}}}else{return function(){this._rootObj.setAttribute("id",this._img.getAttribute("id"));this._rootObj.className=this._img.className;this._imgWidth=this._img.naturalWidth;this._imgHeight=this._img.naturalHeight;var _widthMax=Math.sqrt((this._imgHeight)*(this._imgHeight)+(this._imgWidth)*(this._imgWidth));this._width=_widthMax*3;this._height=_widthMax*3;this._aspectW=this._img.offsetWidth/this._img.naturalWidth;this._aspectH=this._img.offsetHeight/this._img.naturalHeight;this._img.parentNode.removeChild(this._img);this._canvas=document.createElement("canvas");this._canvas.setAttribute("width",this._width);this._canvas.style.position="relative";this._canvas.style.left=-this._img.height*this._aspectW+"px";this._canvas.style.top=-this._img.width*this._aspectH+"px";this._canvas.Wilq32=this._rootObj.Wilq32;this._rootObj.appendChild(this._canvas);this._rootObj.style.width=this._img.width*this._aspectW+"px";this._rootObj.style.height=this._img.height*this._aspectH+"px";this._eventObj=this._canvas;this._cnv=this._canvas.getContext("2d");var parameters;while(parameters=this._onLoadDelegate.shift()){this._handleRotation(parameters,true)}}}})(),_animateStart:function(){if(this._timer){clearTimeout(this._timer)}this._animateStartTime=+new Date;this._animateStartAngle=this._angle;this._animate()},_animate:function(){var actualTime=+new Date;var checkEnd=actualTime-this._animateStartTime>this._parameters.duration;if(checkEnd&&!this._parameters.animatedGif){clearTimeout(this._timer)}else{if(this._canvas||this._vimage||this._img){var angle=this._parameters.easing(0,actualTime-this._animateStartTime,this._animateStartAngle,this._parameters.animateTo-this._animateStartAngle,this._parameters.duration);this._rotate((~~(angle*10))/10)}if(this._parameters.step){this._parameters.step(this._angle)}var self=this;this._timer=setTimeout(function(){self._animate.call(self)},10)}if(this._parameters.callback&&checkEnd){this._angle=this._parameters.animateTo;this._rotate(this._angle);this._parameters.callback.call(this._rootObj)}},_rotate:(function(){var rad=Math.PI/180;if(IE){return function(angle){this._angle=angle;this._container.style.rotation=(angle%360)+"deg";this._vimage.style.top=-(this._rotationCenterY-this._imgHeight/2)+"px";this._vimage.style.left=-(this._rotationCenterX-this._imgWidth/2)+"px";this._container.style.top=this._rotationCenterY-this._imgHeight/2+"px";this._container.style.left=this._rotationCenterX-this._imgWidth/2+"px"}}else{if(supportedCSS){return function(angle){this._angle=angle;this._img.style[supportedCSS]="rotate("+(angle%360)+"deg)";this._img.style[supportedCSSOrigin]=this._parameters.center.join(" ")}}else{return function(angle){this._angle=angle;angle=(angle%360)*rad;this._canvas.width=this._width;this._canvas.height=this._height;this._cnv.translate(this._imgWidth*this._aspectW,this._imgHeight*this._aspectH);this._cnv.translate(this._rotationCenterX,this._rotationCenterY);this._cnv.rotate(angle);this._cnv.translate(-this._rotationCenterX,-this._rotationCenterY);this._cnv.scale(this._aspectW,this._aspectH);this._cnv.drawImage(this._img,0,0)}}}})()};if(IE){Wilq32.PhotoEffect.prototype.createVMLNode=(function(){document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!document.namespaces.rvml&&document.namespaces.add("rvml","urn:schemas-microsoft-com:vml");return function(tagName){return document.createElement("<rvml:"+tagName+' class="rvml">')}}catch(e){return function(tagName){return document.createElement("<"+tagName+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}})()}})(jQuery);
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
/*!
 * jQuery Mousewheel 3.1.12
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
(function(b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{if(typeof exports==="object"){module.exports=b}else{b(jQuery)}}}(function(u){var t=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n=("onwheel" in document||document.documentMode>=9)?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],p=Array.prototype.slice,o,v;if(u.event.fixHooks){for(var s=t.length;s;){u.event.fixHooks[t[--s]]=u.event.mouseHooks}}var r=u.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener){for(var a=n.length;a;){this.addEventListener(n[--a],m,false)}}else{this.onmousewheel=m}u.data(this,"mousewheel-line-height",r.getLineHeight(this));u.data(this,"mousewheel-page-height",r.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var a=n.length;a;){this.removeEventListener(n[--a],m,false)}}else{this.onmousewheel=null}u.removeData(this,"mousewheel-line-height");u.removeData(this,"mousewheel-page-height")},getLineHeight:function(a){var b=u(a),c=b["offsetParent" in u.fn?"offsetParent":"parent"]();if(!c.length){c=u("body")}return parseInt(c.css("fontSize"),10)||parseInt(b.css("fontSize"),10)||16},getPageHeight:function(a){return u(a).height()},settings:{adjustOldDeltas:true,normalizeOffset:true}};u.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});function m(h){var d=h||window.event,l=p.call(arguments,1),j=0,b=0,c=0,x=0,y=0,a=0;h=u.event.fix(d);h.type="mousewheel";if("detail" in d){c=d.detail*-1}if("wheelDelta" in d){c=d.wheelDelta}if("wheelDeltaY" in d){c=d.wheelDeltaY}if("wheelDeltaX" in d){b=d.wheelDeltaX*-1}if("axis" in d&&d.axis===d.HORIZONTAL_AXIS){b=c*-1;c=0}j=c===0?b:c;if("deltaY" in d){c=d.deltaY*-1;j=c}if("deltaX" in d){b=d.deltaX;if(c===0){j=b*-1}}if(c===0&&b===0){return}if(d.deltaMode===1){var k=u.data(this,"mousewheel-line-height");j*=k;c*=k;b*=k}else{if(d.deltaMode===2){var f=u.data(this,"mousewheel-page-height");j*=f;c*=f;b*=f}}x=Math.max(Math.abs(c),Math.abs(b));if(!v||x<v){v=x;if(w(d,x)){v/=40}}if(w(d,x)){j/=40;b/=40;c/=40}j=Math[j>=1?"floor":"ceil"](j/v);b=Math[b>=1?"floor":"ceil"](b/v);c=Math[c>=1?"floor":"ceil"](c/v);if(r.settings.normalizeOffset&&this.getBoundingClientRect){var g=this.getBoundingClientRect();y=h.clientX-g.left;a=h.clientY-g.top}h.deltaX=b;h.deltaY=c;h.deltaFactor=v;h.offsetX=y;h.offsetY=a;h.deltaMode=0;l.unshift(h,j,b,c);if(o){clearTimeout(o)}o=setTimeout(q,200);return(u.event.dispatch||u.event.handle).apply(this,l)}function q(){v=null}function w(a,b){return r.settings.adjustOldDeltas&&a.type==="mousewheel"&&b%120===0}}));if(window.M&&typeof window.M.define=="function"){window.M.define("jq-mousewheel",function(){return jQuery})}define("/js/hb/module/ScrollBar",function(g,h,m){var j=15,k=30;function l(a){this.wrap=null;this.container=null;this.dir=1;this.maxHeight=0;this.autoBar=false;this.barTpl='<div class="scroll-thumb"></div>';this.scrollUpTpl='<div class="scroll-up"></div>';this.scrollDownTpl='<div class="scroll-down"></div>';K.mix(this,a);if(this.barTpl==""){this.barTpl='<div style="position:absolute; top:0; right:0; padding:1px"><div style="width:7px; height:100%; background:#bbb"></div></div>';this.scrollUpTpl="";this.scrollDownTpl=""}this.container=$(this.container);this.wrap=$(this.wrap);this.scrollUpBtn=$(this.scrollUpTpl);this.scrollDownBtn=$(this.scrollDownTpl);this.scrollBar=null;K.CustEvent.createEvents(this,"contentchange,scrolltobottom");this.init()}l.prototype={init:function(){if(!this.container.length){K.log("ScrollBar init failed for no scroll container.");return false}this.posDir=this.dir===0?"left":"top";this.lengthDir=this.dir===0?"width":"height";this.scrollDir=this.dir===0?"scrollLeft":"scrollTop";this.initWrap();this.createScrollBar();this.bindEvents();this.setted=false},initWrap:function(){this.container.css({position:"relative",overflow:"hidden"});if(this.maxHeight&&!isNaN(this.maxHeight)){this.container.css("max-"+this.lengthDir,this.maxHeight).addClass("maxh")}if(!this.wrap.length){this.container.wrap('<div style="position:relative;height:100%"></div>');this.wrap=this.container.parent()}},createScrollBar:function(){this.container[0][this.scrollDir]=0;if(this.scrollUpBtn.length>0){this.scrollUpBtn.appendTo(this.wrap)}if(this.scrollDownBtn.length>0){this.scrollDownBtn.appendTo(this.wrap)}this.scrollBar=$(this.barTpl).css("opacity",1).appendTo(this.wrap)},bindEvents:function(){this.container.bind("mouseenter",$.proxy(this.enterWrap,this)).bind("mouseleave",$.proxy(this.leaveWrap,this)).mousewheel($.proxy(this.rollWrap,this));this.wrap.bind("mouseenter",$.proxy(this.enterWrap,this)).bind("mouseleave",$.proxy(this.leaveWrap,this)).mousewheel($.proxy(this.rollWrap,this));this.scrollBar.mousedown($.proxy(this.holdBar,this));this.on("contentchange",$.proxy(this.checkShowScrollBar,this));if(this.scrollDownBtn.length>0){this.scrollUpBtn.bind("click",$.proxy(this.scrollUp,this))}if(this.scrollDownBtn.length>0){this.scrollDownBtn.bind("click",$.proxy(this.scrollDown,this))}},scrollUp:function(a){dir=0.3333333333333333;var b=k*(this.wrapLength-this.barLength)/this.scrollLength;b=b<1?1:b;this.moveScrollBar(-dir*b);a.preventDefault();a.stopPropagation()},scrollDown:function(a){dir=-0.3333333333333333;var b=k*(this.wrapLength-this.barLength)/this.scrollLength;b=b<1?1:b;this.moveScrollBar(-dir*b);a.preventDefault();a.stopPropagation()},setScrollBar:function(){this.checkShowScrollBar()},setDimension:function(){this.wrapStart=this.wrap.offset()[this.posDir]},checkShowScrollBar:function(){var a=this.container[0];this.wrapLength=this.dir===0?this.wrap.width():this.wrap.height();this.scrollLength=this.dir===0?a.scrollWidth:a.scrollHeight;this.clientLength=this.dir===0?a.clientWidth:a.clientHeight;if(this.scrollLength>this.clientLength){this.updateScrollBarLength();this.scrollBar.show();this.scroll(0);this.wrap.show()}else{this.scrollBar.hide();this.wrap.hide()}},updateScrollBarLength:function(){if(this.autoBar){this.barLength=this.wrapLength*(this.clientLength/this.scrollLength);this.barLength=this.barLength<j?j:this.barLength;this.scrollBar.css((this.dir===0?"width":"height"),this.barLength)}this.barLength=this.dir===0?this.scrollBar.outerWidth():this.scrollBar.outerHeight()},enterWrap:function(){if(!this.setted){this.setScrollBar();this.setted=true}this.on=true;this.setDimension()},leaveWrap:function(){this.on=false;if(!this.holded){}},rollWrap:function(a,b){var c=k*(this.wrapLength-this.barLength)/this.scrollLength;c=c<1?1:c;this.moveScrollBar(-b*c);a.preventDefault();a.stopPropagation()},holdBar:function(a){this.holded=true;this.cursorPosition=this.dir===0?a.clientX:a.clientY;this.startCursorOffset=this.cursorPosition-this.scrollBar.offset()[this.posDir];this.listenMouseMove();a.preventDefault()},listenMouseMove:function(){$(document).bind("mousemove",$.proxy(this.moveCursor,this)).bind("mouseup",$.proxy(this.releaseCursor,this))},stopListenMouseMove:function(){$(document).unbind("mousemove",$.proxy(this.moveCursor,this)).unbind("mouseup",$.proxy(this.releaseCursor,this))},moveCursor:function(b){if(this.holded){var n=this.dir===0?b.clientX:b.clientY,c=n-this.cursorPosition,a=this.cursorPosition-this.startCursorOffset-this.wrapStart,d=n-this.startCursorOffset-this.wrapStart,o=this.cursorPosition+(this.barLength-this.startCursorOffset)-this.wrapStart-this.wrapLength,f=n+(this.barLength-this.startCursorOffset)-this.wrapStart-this.wrapLength;if(d>0&&f<0&&c!==0){this.cursorPosition=n;this.moveScrollBar(c)}else{if(d<=0&&a>0&&c!==0){c=-a;this.cursorPosition=this.cursorPosition+c;this.moveScrollBar(c)}else{if(f>=0&&o<0&&c!==0){c=-o;this.cursorPosition=this.cursorPosition+c;this.moveScrollBar(c)}}}}b.preventDefault()},moveScrollBar:function(b){var a=parseInt(this.scrollBar.css(this.posDir),10),c=this.wrapLength-this.barLength-a;if(b<0&&b>-a||b>0&&b<c){a=a+b}else{if(b<0){a=0}else{if(b>0){a=a+c}}}this.scrollBar.css(this.posDir,a);this.container[0][this.scrollDir]=(a/(this.wrapLength-this.barLength))*(this.scrollLength-this.clientLength)},scroll:function(a){this.scrollBar.css(this.posDir,a*(this.wrapLength-this.barLength)/(this.scrollLength-this.clientLength));this.container[0][this.scrollDir]=a},scrollLength:function(){return this.container[0][this.scrollDir]},releaseCursor:function(){this.holded=false;this.stopListenMouseMove();if(!this.on){}}};return l});define("/js/hb/module/Sortable",function(d,f,g){
/*!
         * jQuery UI 1.8.16
         *
         * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
         * Dual licensed under the MIT or GPL Version 2 licenses.
         * http://jquery.org/license
         *
         * http://docs.jquery.com/UI
         */
(function(a,b){function c(l,m){var k=l.nodeName.toLowerCase();if("area"===k){m=l.parentNode;k=m.name;if(!l.href||!k||m.nodeName.toLowerCase()!=="map"){return false}l=a("img[usemap=#"+k+"]")[0];return !!l&&h(l)}return(/input|select|textarea|button|object/.test(k)?!l.disabled:"a"==k?l.href||m:m)&&h(l)}function h(j){return !a(j).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.16",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(j,k){return typeof j==="number"?this.each(function(){var l=this;setTimeout(function(){a(l).focus();k&&k.call(l)},j)}):this._focus.apply(this,arguments)},scrollParent:function(){var j;j=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!j.length?a(document):j},zIndex:function(j){if(j!==b){return this.css("zIndex",j)}if(this.length){j=a(this[0]);for(var k;j.length&&j[0]!==document;){k=j.css("position");if(k==="absolute"||k==="relative"||k==="fixed"){k=parseInt(j.css("zIndex"),10);if(!isNaN(k)&&k!==0){return k}}j=j.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(j){j.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.each(["Width","Height"],function(r,s){function t(m,j,k,l){a.each(u,function(){j-=parseFloat(a.curCSS(m,"padding"+this,true))||0;if(k){j-=parseFloat(a.curCSS(m,"border"+this+"Width",true))||0}if(l){j-=parseFloat(a.curCSS(m,"margin"+this,true))||0}});return j}var u=s==="Width"?["Left","Right"]:["Top","Bottom"],p=s.toLowerCase(),q={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+s]=function(j){if(j===b){return q["inner"+s].call(this)}return this.each(function(){a(this).css(p,t(this,j)+"px")})};a.fn["outer"+s]=function(j,k){if(typeof j!=="number"){return q["outer"+s].call(this,j)}return this.each(function(){a(this).css(p,t(this,j,true,k)+"px")})}});a.extend(a.expr[":"],{data:function(l,m,k){return !!a.data(l,k[3])},focusable:function(j){return c(j,!isNaN(a.attr(j,"tabindex")))},tabbable:function(l){var m=a.attr(l,"tabindex"),k=isNaN(m);return(k||m>=0)&&c(l,!k)}});a(function(){var j=document.body,k=j.appendChild(k=document.createElement("div"));a.extend(k.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=k.offsetHeight===100;a.support.selectstart="onselectstart" in k;j.removeChild(k).style.display="none"});a.extend(a.ui,{plugin:{add:function(n,o,l){n=a.ui[n].prototype;for(var m in l){n.plugins[m]=n.plugins[m]||[];n.plugins[m].push([o,l[m]])}},call:function(n,o,l){if((o=n.plugins[o])&&n.element[0].parentNode){for(var m=0;m<o.length;m++){n.options[o[m][0]]&&o[m][1].apply(n.element,l)}}}},contains:function(j,k){return document.compareDocumentPosition?j.compareDocumentPosition(k)&16:j!==k&&j.contains(k)},hasScroll:function(l,m){if(a(l).css("overflow")==="hidden"){return false}m=m&&m==="left"?"scrollLeft":"scrollTop";var k=false;if(l[m]>0){return true}l[m]=1;k=l[m]>0;l[m]=0;return k},isOverAxis:function(l,m,k){return l>m&&l<m+k},isOver:function(r,s,t,u,p,q){return a.ui.isOverAxis(r,t,p)&&a.ui.isOverAxis(s,u,q)}})}})(jQuery);
/*!
 * jQuery UI Widget 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(h,a){if(h.cleanData){var b=h.cleanData;h.cleanData=function(o){for(var l=0,m;(m=o[l])!=null;l++){try{h(m).triggerHandler("remove")}catch(n){}}b(o)}}else{var c=h.fn.remove;h.fn.remove=function(k,j){return this.each(function(){if(!j){if(!k||h.filter(k,[this]).length){h("*",this).add([this]).each(function(){try{h(this).triggerHandler("remove")}catch(l){}})}}return c.call(h(this),k,j)})}}h.widget=function(q,m,n){var o=q.split(".")[0],p;q=q.split(".")[1];p=o+"-"+q;if(!n){n=m;m=h.Widget}h.expr[":"][p]=function(j){return !!h.data(j,q)};h[o]=h[o]||{};h[o][q]=function(j,k){arguments.length&&this._createWidget(j,k)};m=new m;m.options=h.extend(true,{},m.options);h[o][q].prototype=h.extend(true,m,{namespace:o,widgetName:q,widgetEventPrefix:h[o][q].prototype.widgetEventPrefix||q,widgetBaseClass:p},n);h.widget.bridge(q,h[o][q])};h.widget.bridge=function(k,j){h.fn[k]=function(n){var o=typeof n==="string",p=Array.prototype.slice.call(arguments,1),q=this;n=!o&&p.length?h.extend.apply(null,[true,n].concat(p)):n;if(o&&n.charAt(0)==="_"){return q}o?this.each(function(){var l=h.data(this,k),m=l&&h.isFunction(l[n])?l[n].apply(l,p):l;if(m!==l&&m!==a){q=m;return false}}):this.each(function(){var l=h.data(this,k);l?l.option(n||{})._init():h.data(this,k,new j(n,this))});return q}};h.Widget=function(k,j){arguments.length&&this._createWidget(k,j)};h.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(m,k){h.data(k,this.widgetName,this);this.element=h(k);this.options=h.extend(true,{},this.options,this._getCreateOptions(),m);var l=this;this.element.bind("remove."+this.widgetName,function(){l.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return h.metadata&&h.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(m,k){var l=m;if(arguments.length===0){return h.extend({},this.options)}if(typeof m==="string"){if(k===a){return this.options[m]}l={};l[m]=k}this._setOptions(l);return this},_setOptions:function(k){var j=this;h.each(k,function(l,m){j._setOption(l,m)});return this},_setOption:function(k,j){this.options[k]=j;if(k==="disabled"){this.widget()[j?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",j)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(q,m,n){var o=this.options[q];m=h.Event(m);m.type=(q===this.widgetEventPrefix?q:this.widgetEventPrefix+q).toLowerCase();n=n||{};if(m.originalEvent){q=h.event.props.length;for(var p;q;){p=h.event.props[--q];m[p]=m.originalEvent[p]}}this.element.trigger(m,n);return !(h.isFunction(o)&&o.call(this.element[0],m,n)===false||m.isDefaultPrevented())}}})(jQuery);
/*!
 * jQuery UI Mouse 1.8.16
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(b){var a=false;b(document).mouseup(function(){a=false});b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(h){return c._mouseDown(h)}).bind("click."+this.widgetName,function(h){if(true===b.data(h.target,c.widgetName+".preventClickEvent")){b.removeData(h.target,c.widgetName+".preventClickEvent");h.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(m){if(!a){this._mouseStarted&&this._mouseUp(m);this._mouseDownEvent=m;var c=this,k=m.which==1,l=typeof this.options.cancel=="string"&&m.target.nodeName?b(m.target).closest(this.options.cancel).length:false;if(!k||l||!this._mouseCapture(m)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(m)&&this._mouseDelayMet(m)){this._mouseStarted=this._mouseStart(m)!==false;if(!this._mouseStarted){m.preventDefault();return true}}true===b.data(m.target,this.widgetName+".preventClickEvent")&&b.removeData(m.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(h){return c._mouseMove(h)};this._mouseUpDelegate=function(h){return c._mouseUp(h)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);m.preventDefault();return a=true}},_mouseMove:function(c){if(b.browser.msie&&!(document.documentMode>=9)&&!c.button){return this._mouseUp(c)}if(this._mouseStarted){this._mouseDrag(c);return c.preventDefault()}if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)){(this._mouseStarted=this._mouseStart(this._mouseDownEvent,c)!==false)?this._mouseDrag(c):this._mouseUp(c)}return !this._mouseStarted},_mouseUp:function(c){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;c.target==this._mouseDownEvent.target&&b.data(c.target,this.widgetName+".preventClickEvent",true);this._mouseStop(c)}return false},_mouseDistanceMet:function(c){return Math.max(Math.abs(this._mouseDownEvent.pageX-c.pageX),Math.abs(this._mouseDownEvent.pageY-c.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);(function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var b=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?b.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--){this.items[b].item.removeData("sortable-item")}return this},_setOption:function(b,c){if(b==="disabled"){this.options[b]=c;this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")}else{a.Widget.prototype._setOption.apply(this,arguments)}},_mouseCapture:function(l,m){if(this.reverting){return false}if(this.options.disabled||this.options.type=="static"){return false}this._refreshItems(l);var b=null,c=this;a(l.target).parents().each(function(){if(a.data(this,"sortable-item")==c){b=a(this);return false}});if(a.data(l.target,"sortable-item")==c){b=a(l.target)}if(!b){return false}if(this.options.handle&&!m){var k=false;a(this.options.handle,b).find("*").andSelf().each(function(){if(this==l.target){k=true}});if(!k){return false}}this.currentItem=b;this._removeCurrentsFromItems();return true},_mouseStart:function(j,k,b){k=this.options;var c=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(j);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");a.extend(this.offset,{click:{left:j.pageX-this.offset.left,top:j.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(j);this.originalPageX=j.pageX;this.originalPageY=j.pageY;k.cursorAt&&this._adjustOffsetFromHelper(k.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();k.containment&&this._setContainment();if(k.cursor){if(a("body").css("cursor")){this._storedCursor=a("body").css("cursor")}a("body").css("cursor",k.cursor)}if(k.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",k.opacity)}if(k.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",k.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",j,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!b){for(b=this.containers.length-1;b>=0;b--){this.containers[b]._trigger("activate",j,c._uiHash(this))}}if(a.ui.ddmanager){a.ui.ddmanager.current=this}a.ui.ddmanager&&!k.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,j);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(j);return true},_mouseDrag:function(l){this.position=this._generatePosition(l);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){var m=this.options,b=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-l.pageY<m.scrollSensitivity){this.scrollParent[0].scrollTop=b=this.scrollParent[0].scrollTop+m.scrollSpeed}else{if(l.pageY-this.overflowOffset.top<m.scrollSensitivity){this.scrollParent[0].scrollTop=b=this.scrollParent[0].scrollTop-m.scrollSpeed}}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-l.pageX<m.scrollSensitivity){this.scrollParent[0].scrollLeft=b=this.scrollParent[0].scrollLeft+m.scrollSpeed}else{if(l.pageX-this.overflowOffset.left<m.scrollSensitivity){this.scrollParent[0].scrollLeft=b=this.scrollParent[0].scrollLeft-m.scrollSpeed}}}else{if(l.pageY-a(document).scrollTop()<m.scrollSensitivity){b=a(document).scrollTop(a(document).scrollTop()-m.scrollSpeed)}else{if(a(window).height()-(l.pageY-a(document).scrollTop())<m.scrollSensitivity){b=a(document).scrollTop(a(document).scrollTop()+m.scrollSpeed)}}if(l.pageX-a(document).scrollLeft()<m.scrollSensitivity){b=a(document).scrollLeft(a(document).scrollLeft()-m.scrollSpeed)}else{if(a(window).width()-(l.pageX-a(document).scrollLeft())<m.scrollSensitivity){b=a(document).scrollLeft(a(document).scrollLeft()+m.scrollSpeed)}}}b!==false&&a.ui.ddmanager&&!m.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,l)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(m=this.items.length-1;m>=0;m--){b=this.items[m];var c=b.item[0],k=this._intersectsWithPointer(b);if(k){if(c!=this.currentItem[0]&&this.placeholder[k==1?"next":"prev"]()[0]!=c&&!a.ui.contains(this.placeholder[0],c)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],c):true)){this.direction=k==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(b)){this._rearrange(l,b)}else{break}this._trigger("change",l,this._uiHash());break}}}this._contactContainers(l);a.ui.ddmanager&&a.ui.ddmanager.drag(this,l);this._trigger("sort",l,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(c,h){if(c){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,c);if(this.options.revert){var b=this;h=b.placeholder.offset();b.reverting=true;a(this.helper).animate({left:h.left-this.offset.parent.left-b.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:h.top-this.offset.parent.top-b.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){b._clear(c)})}else{this._clear(c,h)}return false}},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null});this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--){this.containers[c]._trigger("deactivate",null,b._uiHash(this));if(this.containers[c].containerCache.over){this.containers[c]._trigger("out",null,b._uiHash(this));this.containers[c].containerCache.over=0}}}if(this.placeholder){this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();a.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(c){var h=this._getItemsAsjQuery(c&&c.connected),b=[];c=c||{};a(h).each(function(){var j=(a(c.item||this).attr(c.attribute||"id")||"").match(c.expression||/(.+)[-=_](.+)/);if(j){b.push((c.key||j[1]+"[]")+"="+(c.key&&c.expression?j[1]:j[2]))}});!b.length&&c.key&&b.push(c.key+"=");return b.join("&")},toArray:function(c){var h=this._getItemsAsjQuery(c&&c.connected),b=[];c=c||{};h.each(function(){b.push(a(c.item||this).attr(c.attribute||"id")||"")});return b},_intersectsWith:function(x){var y=this.positionAbs.left,z=y+this.helperProportions.width,A=this.positionAbs.top,b=A+this.helperProportions.height,c=x.left,h=c+x.width,j=x.top,l=j+x.height,k=this.offset.click.top,w=this.offset.click.left;k=A+k>j&&A+k<l&&y+w>c&&y+w<h;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>x[this.floating?"width":"height"]?k:c<y+this.helperProportions.width/2&&z-this.helperProportions.width/2<h&&j<A+this.helperProportions.height/2&&b-this.helperProportions.height/2<l},_intersectsWithPointer:function(c){var h=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,c.top,c.height);c=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,c.left,c.width);h=h&&c;c=this._getDragVerticalDirection();var b=this._getDragHorizontalDirection();if(!h){return false}return this.floating?b&&b=="right"||c=="down"?2:1:c&&(c=="down"?2:1)},_intersectsWithSides:function(j){var k=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,j.top+j.height/2,j.height);j=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,j.left+j.width/2,j.width);var b=this._getDragVerticalDirection(),c=this._getDragHorizontalDirection();return this.floating&&c?c=="right"&&j||c=="left"&&!j:b&&(b=="down"&&k||b=="up"&&!k)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left")},refresh:function(b){this._refreshItems(b);this.refreshPositions();return this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(p){var q=[],r=[],b=this._connectWith();if(b&&p){for(p=b.length-1;p>=0;p--){for(var c=a(b[p]),h=c.length-1;h>=0;h--){var o=a.data(c[h],"sortable");if(o&&o!=this&&!o.options.disabled){r.push([a.isFunction(o.options.items)?o.options.items.call(o.element):a(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o])}}}}r.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(p=r.length-1;p>=0;p--){r[p][0].each(function(){q.push(this)})}return a(q)},_removeCurrentsFromItems:function(){for(var c=this.currentItem.find(":data(sortable-item)"),h=0;h<this.items.length;h++){for(var b=0;b<c.length;b++){c[b]==this.items[h].item[0]&&this.items.splice(h,1)}}},_refreshItems:function(q){this.items=[];this.containers=[this];var t=this.items,r=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],q,{item:this.currentItem}):a(this.options.items,this.element),this]],s=this._connectWith();if(s){for(var u=s.length-1;u>=0;u--){for(var b=a(s[u]),c=b.length-1;c>=0;c--){var h=a.data(b[c],"sortable");if(h&&h!=this&&!h.options.disabled){r.push([a.isFunction(h.options.items)?h.options.items.call(h.element[0],q,{item:this.currentItem}):a(h.options.items,h.element),h]);this.containers.push(h)}}}}for(u=r.length-1;u>=0;u--){q=r[u][1];s=r[u][0];c=0;for(b=s.length;c<b;c++){h=a(s[c]);h.data("sortable-item",q);t.push({item:h,instance:q,width:0,height:0,left:0,top:0})}}},refreshPositions:function(j){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}for(var k=this.items.length-1;k>=0;k--){var b=this.items[k];if(!(b.instance!=this.currentContainer&&this.currentContainer&&b.item[0]!=this.currentItem[0])){var c=this.options.toleranceElement?a(this.options.toleranceElement,b.item):b.item;if(!j){b.width=c.outerWidth();b.height=c.outerHeight()}c=c.offset();b.left=c.left;b.top=c.top}}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(k=this.containers.length-1;k>=0;k--){c=this.containers[k].element.offset();this.containers[k].containerCache.left=c.left;this.containers[k].containerCache.top=c.top;this.containers[k].containerCache.width=this.containers[k].element.outerWidth();this.containers[k].containerCache.height=this.containers[k].element.outerHeight()}}return this},_createPlaceholder:function(j){var k=j||this,b=k.options;if(!b.placeholder||b.placeholder.constructor==String){var c=b.placeholder;b.placeholder={element:function(){var h=a(document.createElement(k.currentItem[0].nodeName)).addClass(c||k.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!c){h.style.visibility="hidden"}return h},update:function(h,l){if(!(c&&!b.forcePlaceholderSize)){l.height()||l.height(k.currentItem.innerHeight()-parseInt(k.currentItem.css("paddingTop")||0,10)-parseInt(k.currentItem.css("paddingBottom")||0,10));l.width()||l.width(k.currentItem.innerWidth()-parseInt(k.currentItem.css("paddingLeft")||0,10)-parseInt(k.currentItem.css("paddingRight")||0,10))}}}}k.placeholder=a(b.placeholder.element.call(k.element,k.currentItem));k.currentItem.after(k.placeholder);b.placeholder.update(k,k.placeholder)},_contactContainers:function(p){for(var q=null,r=null,b=this.containers.length-1;b>=0;b--){if(!a.ui.contains(this.currentItem[0],this.containers[b].element[0])){if(this._intersectsWith(this.containers[b].containerCache)){if(!(q&&a.ui.contains(this.containers[b].element[0],q.element[0]))){q=this.containers[b];r=b}}else{if(this.containers[b].containerCache.over){this.containers[b]._trigger("out",p,this._uiHash(this));this.containers[b].containerCache.over=0}}}}if(q){if(this.containers.length===1){this.containers[r]._trigger("over",p,this._uiHash(this));this.containers[r].containerCache.over=1}else{if(this.currentContainer!=this.containers[r]){q=10000;b=null;for(var c=this.positionAbs[this.containers[r].floating?"left":"top"],h=this.items.length-1;h>=0;h--){if(a.ui.contains(this.containers[r].element[0],this.items[h].item[0])){var o=this.items[h][this.containers[r].floating?"left":"top"];if(Math.abs(o-c)<q){q=Math.abs(o-c);b=this.items[h]}}}if(b||this.options.dropOnEmpty){this.currentContainer=this.containers[r];b?this._rearrange(p,b,null,true):this._rearrange(p,null,this.containers[r].element,true);this._trigger("change",p,this._uiHash());this.containers[r]._trigger("change",p,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[r]._trigger("over",p,this._uiHash(this));this.containers[r].containerCache.over=1}}}}},_createHelper:function(b){var c=this.options;b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;b.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]);if(b[0]==this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(b[0].style.width==""||c.forceHelperSize){b.width(this.currentItem.width())}if(b[0].style.height==""||c.forceHelperSize){b.height(this.currentItem.height())}return b},_adjustOffsetFromHelper:function(b){if(typeof b=="string"){b=b.split(" ")}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0}}if("left" in b){this.offset.click.left=b.left+this.margins.left}if("right" in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left}if("top" in b){this.offset.click.top=b.top+this.margins.top}if("bottom" in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie){b={top:0,left:0}}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var c=this.options;if(c.containment=="parent"){c.containment=this.helper[0].parentNode}if(c.containment=="document"||c.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(c.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(c.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(c.containment)){var h=a(c.containment)[0];c=a(c.containment).offset();var b=a(h).css("overflow")!="hidden";this.containment=[c.left+(parseInt(a(h).css("borderLeftWidth"),10)||0)+(parseInt(a(h).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(h).css("borderTopWidth"),10)||0)+(parseInt(a(h).css("paddingTop"),10)||0)-this.margins.top,c.left+(b?Math.max(h.scrollWidth,h.offsetWidth):h.offsetWidth)-(parseInt(a(h).css("borderLeftWidth"),10)||0)-(parseInt(a(h).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(b?Math.max(h.scrollHeight,h.offsetHeight):h.offsetHeight)-(parseInt(a(h).css("borderTopWidth"),10)||0)-(parseInt(a(h).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(j,k){if(!k){k=this.position}j=j=="absolute"?1:-1;var b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,c=/(html|body)/i.test(b[0].tagName);return{top:k.top+this.offset.relative.top*j+this.offset.parent.top*j-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():c?0:b.scrollTop())*j),left:k.left+this.offset.relative.left*j+this.offset.parent.left*j-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():c?0:b.scrollLeft())*j)}},_generatePosition:function(o){var p=this.options,b=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,c=/(html|body)/i.test(b[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}var m=o.pageX,n=o.pageY;if(this.originalPosition){if(this.containment){if(o.pageX-this.offset.click.left<this.containment[0]){m=this.containment[0]+this.offset.click.left}if(o.pageY-this.offset.click.top<this.containment[1]){n=this.containment[1]+this.offset.click.top}if(o.pageX-this.offset.click.left>this.containment[2]){m=this.containment[2]+this.offset.click.left}if(o.pageY-this.offset.click.top>this.containment[3]){n=this.containment[3]+this.offset.click.top}}if(p.grid){n=this.originalPageY+Math.round((n-this.originalPageY)/p.grid[1])*p.grid[1];n=this.containment?!(n-this.offset.click.top<this.containment[1]||n-this.offset.click.top>this.containment[3])?n:!(n-this.offset.click.top<this.containment[1])?n-p.grid[1]:n+p.grid[1]:n;m=this.originalPageX+Math.round((m-this.originalPageX)/p.grid[0])*p.grid[0];m=this.containment?!(m-this.offset.click.left<this.containment[0]||m-this.offset.click.left>this.containment[2])?m:!(m-this.offset.click.left<this.containment[0])?m-p.grid[0]:m+p.grid[0]:m}}return{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():c?0:b.scrollTop()),left:m-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():c?0:b.scrollLeft())}},_rearrange:function(o,p,b,c){b?b[0].appendChild(this.placeholder[0]):p.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?p.item[0]:p.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var m=this,n=this.counter;window.setTimeout(function(){n==m.counter&&m.refreshPositions(!c)},0)},_clear:function(j,k){this.reverting=false;var b=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var c in this._storedCSS){if(this._storedCSS[c]=="auto"||this._storedCSS[c]=="static"){this._storedCSS[c]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.fromOutside&&!k&&b.push(function(h){this._trigger("receive",h,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!k){b.push(function(h){this._trigger("update",h,this._uiHash())})}if(!a.ui.contains(this.element[0],this.currentItem[0])){k||b.push(function(h){this._trigger("remove",h,this._uiHash())});for(c=this.containers.length-1;c>=0;c--){if(a.ui.contains(this.containers[c].element[0],this.currentItem[0])&&!k){b.push(function(h){return function(l){h._trigger("receive",l,this._uiHash(this))}}.call(this,this.containers[c]));b.push(function(h){return function(l){h._trigger("update",l,this._uiHash(this))}}.call(this,this.containers[c]))}}}for(c=this.containers.length-1;c>=0;c--){k||b.push(function(h){return function(l){h._trigger("deactivate",l,this._uiHash(this))}}.call(this,this.containers[c]));if(this.containers[c].containerCache.over){b.push(function(h){return function(l){h._trigger("out",l,this._uiHash(this))}}.call(this,this.containers[c]));this.containers[c].containerCache.over=0}}this._storedCursor&&a("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex)}this.dragging=false;if(this.cancelHelperRemoval){if(!k){this._trigger("beforeStop",j,this._uiHash());for(c=0;c<b.length;c++){b[c].call(this,j)}this._trigger("stop",j,this._uiHash())}return false}k||this._trigger("beforeStop",j,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!k){for(c=0;c<b.length;c++){b[c].call(this,j)}this._trigger("stop",j,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}});a.extend(a.ui.sortable,{version:"1.8.16"})})(jQuery);return $});
/*! jQuery UI - v1.9.1 - 2012-11-06
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */
(function(l,h){function j(d,a){var c,f,b,g=d.nodeName.toLowerCase();return"area"===g?(c=d.parentNode,f=c.name,!d.href||!f||c.nodeName.toLowerCase()!=="map"?!1:(b=l("img[usemap=#"+f+"]")[0],!!b&&n(b))):(/input|select|textarea|button|object/.test(g)?!d.disabled:"a"===g?d.href||a:a)&&n(d)}function n(a){return l.expr.filters.visible(a)&&!l(a).parents().andSelf().filter(function(){return l.css(this,"visibility")==="hidden"}).length}var k=0,m=/^ui-id-\d+$/;l.ui=l.ui||{};if(l.ui.version){return}l.extend(l.ui,{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),l.fn.extend({_focus:l.fn.focus,focus:function(b,a){return typeof b=="number"?this.each(function(){var c=this;setTimeout(function(){l(c).focus(),a&&a.call(c)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;return l.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?a=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(l.css(this,"position"))&&/(auto|scroll)/.test(l.css(this,"overflow")+l.css(this,"overflow-y")+l.css(this,"overflow-x"))}).eq(0):a=this.parents().filter(function(){return/(auto|scroll)/.test(l.css(this,"overflow")+l.css(this,"overflow-y")+l.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!a.length?l(document):a},zIndex:function(a){if(a!==h){return this.css("zIndex",a)}if(this.length){var b=l(this[0]),d,c;while(b.length&&b[0]!==document){d=b.css("position");if(d==="absolute"||d==="relative"||d==="fixed"){c=parseInt(b.css("zIndex"),10);if(!isNaN(c)&&c!==0){return c}}b=b.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++k)})},removeUniqueId:function(){return this.each(function(){m.test(this.id)&&l(this).removeAttr("id")})}}),l("<a>").outerWidth(1).jquery||l.each(["Width","Height"],function(a,c){function g(r,s,t,u){return l.each(f,function(){s-=parseFloat(l.css(r,"padding"+this))||0,t&&(s-=parseFloat(l.css(r,"border"+this+"Width"))||0),u&&(s-=parseFloat(l.css(r,"margin"+this))||0)}),s}var f=c==="Width"?["Left","Right"]:["Top","Bottom"],d=c.toLowerCase(),b={innerWidth:l.fn.innerWidth,innerHeight:l.fn.innerHeight,outerWidth:l.fn.outerWidth,outerHeight:l.fn.outerHeight};l.fn["inner"+c]=function(o){return o===h?b["inner"+c].call(this):this.each(function(){l(this).css(d,g(this,o)+"px")})},l.fn["outer"+c]=function(p,q){return typeof p!="number"?b["outer"+c].call(this,p):this.each(function(){l(this).css(d,g(this,p,!0,q)+"px")})}}),l.extend(l.expr[":"],{data:l.expr.createPseudo?l.expr.createPseudo(function(a){return function(b){return !!l.data(b,a)}}):function(c,a,b){return !!l.data(c,b[3])},focusable:function(a){return j(a,!isNaN(l.attr(a,"tabindex")))},tabbable:function(c){var a=l.attr(c,"tabindex"),b=isNaN(a);return(b||a>=0)&&j(c,!b)}}),l(function(){var b=document.body,a=b.appendChild(a=document.createElement("div"));a.offsetHeight,l.extend(a.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),l.support.minHeight=a.offsetHeight===100,l.support.selectstart="onselectstart" in a,b.removeChild(a).style.display="none"}),function(){var a=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];l.ui.ie=a.length?!0:!1,l.ui.ie6=parseFloat(a[1],10)===6}(),l.fn.extend({disableSelection:function(){return this.bind((l.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),l.extend(l.ui,{plugin:{add:function(d,a,b){var f,c=l.ui[d].prototype;for(f in b){c.plugins[f]=c.plugins[f]||[],c.plugins[f].push([a,b[f]])}},call:function(b,d,a){var c,f=b.plugins[d];if(!f||!b.element[0].parentNode||b.element[0].parentNode.nodeType===11){return}for(c=0;c<f.length;c++){b.options[f[c][0]]&&f[c][1].apply(b.element,a)}}},contains:l.contains,hasScroll:function(c,a){if(l(c).css("overflow")==="hidden"){return !1}var b=a&&a==="left"?"scrollLeft":"scrollTop",d=!1;return c[b]>0?!0:(c[b]=1,d=c[b]>0,c[b]=0,d)},isOverAxis:function(b,c,a){return b>c&&b<c+a},isOver:function(f,a,c,g,d,b){return l.ui.isOverAxis(f,c,d)&&l.ui.isOverAxis(a,g,b)}})})(jQuery);(function(k,g){var j=0,l=Array.prototype.slice,h=k.cleanData;k.cleanData=function(d){for(var a=0,b;(b=d[a])!=null;a++){try{k(b).triggerHandler("remove")}catch(c){}}h(d)},k.widget=function(d,q,b){var f,c,a,n,o=d.split(".")[0];d=d.split(".")[1],f=o+"-"+d,b||(b=q,q=k.Widget),k.expr[":"][f.toLowerCase()]=function(m){return !!k.data(m,f)},k[o]=k[o]||{},c=k[o][d],a=k[o][d]=function(p,m){if(!this._createWidget){return new a(p,m)}arguments.length&&this._createWidget(p,m)},k.extend(a,c,{version:b.version,_proto:k.extend({},b),_childConstructors:[]}),n=new q,n.options=k.widget.extend({},n.options),k.each(b,function(m,p){k.isFunction(p)&&(b[m]=function(){var s=function(){return q.prototype[m].apply(this,arguments)},r=function(t){return q.prototype[m].apply(this,t)};return function(){var x=this._super,t=this._superApply,w;return this._super=s,this._superApply=r,w=p.apply(this,arguments),this._super=x,this._superApply=t,w}}())}),a.prototype=k.widget.extend(n,{widgetEventPrefix:n.widgetEventPrefix||d},b,{constructor:a,namespace:o,widgetName:d,widgetBaseClass:f,widgetFullName:f}),c?(k.each(c._childConstructors,function(m,p){var r=p.prototype;k.widget(r.namespace+"."+r.widgetName,a,p._proto)}),delete c._childConstructors):q._childConstructors.push(a),k.widget.bridge(d,a)},k.widget.extend=function(a){var d=l.call(arguments,1),c=0,b=d.length,f,m;for(;c<b;c++){for(f in d[c]){m=d[c][f],d[c].hasOwnProperty(f)&&m!==g&&(k.isPlainObject(m)?a[f]=k.isPlainObject(a[f])?k.widget.extend({},a[f],m):k.widget.extend({},m):a[f]=m)}}return a},k.widget.bridge=function(a,c){var b=c.prototype.widgetFullName;k.fn[a]=function(d){var m=typeof d=="string",n=l.call(arguments,1),f=this;return d=!m&&n.length?k.widget.extend.apply(null,[d].concat(n)):d,m?this.each(function(){var p,o=k.data(this,b);if(!o){return k.error("cannot call methods on "+a+" prior to initialization; attempted to call method '"+d+"'")}if(!k.isFunction(o[d])||d.charAt(0)==="_"){return k.error("no such method '"+d+"' for "+a+" widget instance")}p=o[d].apply(o,n);if(p!==o&&p!==g){return f=p&&p.jquery?f.pushStack(p.get()):p,!1}}):this.each(function(){var o=k.data(this,b);o?o.option(d||{})._init():new c(d,this)}),f}},k.Widget=function(){},k.Widget._childConstructors=[],k.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,a){a=k(a||this.defaultElement||this)[0],this.element=k(a),this.uuid=j++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=k.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=k(),this.hoverable=k(),this.focusable=k(),a!==this&&(k.data(a,this.widgetName,this),k.data(a,this.widgetFullName,this),this._on(this.element,{remove:function(c){c.target===a&&this.destroy()}}),this.document=k(a.style?a.ownerDocument:a.document||a),this.window=k(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:k.noop,_getCreateEventData:k.noop,_create:k.noop,_init:k.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(k.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:k.noop,widget:function(){return this.element},option:function(a,c){var f=a,d,b,m;if(arguments.length===0){return k.widget.extend({},this.options)}if(typeof a=="string"){f={},d=a.split("."),a=d.shift();if(d.length){b=f[a]=k.widget.extend({},this.options[a]);for(m=0;m<d.length-1;m++){b[d[m]]=b[d[m]]||{},b=b[d[m]]}a=d.pop();if(c===g){return b[a]===g?null:b[a]}b[a]=c}else{if(c===g){return this.options[a]===g?null:this.options[a]}f[a]=c}}return this._setOptions(f),this},_setOptions:function(a){var b;for(b in a){this._setOption(b,a[b])}return this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,a){var b,d=this;a?(c=b=k(c),this.bindings=this.bindings.add(c)):(a=c,c=this.element,b=this.widget()),k.each(a,function(s,n){function t(){if(d.options.disabled===!0||k(this).hasClass("ui-state-disabled")){return}return(typeof n=="string"?d[n]:n).apply(d,arguments)}typeof n!="string"&&(t.guid=n.guid=n.guid||t.guid||k.guid++);var o=s.match(/^(\w+)\s*(.*)$/),r=o[1]+d.eventNamespace,f=o[2];f?b.delegate(f,r,t):c.bind(r,t)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(b,d){function a(){return(typeof b=="string"?c[b]:b).apply(c,arguments)}var c=this;return setTimeout(a,d||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a),this._on(a,{mouseenter:function(b){k(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){k(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a),this._on(a,{focusin:function(b){k(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){k(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(f,a,c){var m,d,b=this.options[f];c=c||{},a=k.Event(a),a.type=(f===this.widgetEventPrefix?f:this.widgetEventPrefix+f).toLowerCase(),a.target=this.element[0],d=a.originalEvent;if(d){for(m in d){m in a||(a[m]=d[m])}}return this.element.trigger(a,c),!(k.isFunction(b)&&b.apply(this.element[0],[a].concat(c))===!1||a.isDefaultPrevented())}},k.each({show:"fadeIn",hide:"fadeOut"},function(b,a){k.Widget.prototype["_"+b]=function(d,n,f){typeof n=="string"&&(n={effect:n});var c,o=n?n===!0||typeof n=="number"?a:n.effect||a:b;n=n||{},typeof n=="number"&&(n={duration:n}),c=!k.isEmptyObject(n),n.complete=f,n.delay&&d.delay(n.delay),c&&k.effects&&(k.effects.effect[o]||k.uiBackCompat!==!1&&k.effects[o])?d[b](n):o!==b&&d[o]?d[o](n.duration,n.easing,f):d.queue(function(m){k(this)[b](),f&&f.call(d[0]),m()})}}),k.uiBackCompat!==!1&&(k.Widget.prototype._getCreateOptions=function(){return k.metadata&&k.metadata.get(this.element[0])[this.widgetName]})})(jQuery);(function(d,f){var g=!1;d(document).mouseup(function(a){g=!1}),d.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(!0===d.data(b.target,a.widgetName+".preventClickEvent")){return d.removeData(b.target,a.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&d(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(g){return}this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var a=this,h=c.which===1,b=typeof this.options.cancel=="string"&&c.target.nodeName?d(c.target).closest(this.options.cancel).length:!1;if(!h||b||!this._mouseCapture(c)){return !0}this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){a.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)){this._mouseStarted=this._mouseStart(c)!==!1;if(!this._mouseStarted){return c.preventDefault(),!0}}return !0===d.data(c.target,this.widgetName+".preventClickEvent")&&d.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(j){return a._mouseMove(j)},this._mouseUpDelegate=function(j){return a._mouseUp(j)},d(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),g=!0,!0},_mouseMove:function(a){return !d.ui.ie||document.documentMode>=9||!!a.button?this._mouseStarted?(this._mouseDrag(a),a.preventDefault()):(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,a)!==!1,this._mouseStarted?this._mouseDrag(a):this._mouseUp(a)),!this._mouseStarted):this._mouseUp(a)},_mouseUp:function(a){return d(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,a.target===this._mouseDownEvent.target&&d.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return !0}})})(jQuery);(function(C,f){function a(g,b,d){return[parseInt(g[0],10)*(l.test(g[0])?b/100:1),parseInt(g[1],10)*(l.test(g[1])?d/100:1)]}function p(b,d){return parseInt(C.css(b,d),10)||0}C.ui=C.ui||{};var n,t=Math.max,h=Math.abs,c=Math.round,o=/left|center|right/,r=/top|center|bottom/,s=/[\+\-]\d+%?/,D=/^\w+/,l=/%$/,u=C.fn.position;C.position={scrollbarWidth:function(){if(n!==f){return n}var g,b,j=C("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),d=j.children()[0];return C("body").append(j),g=d.offsetWidth,j.css("overflow","scroll"),b=d.offsetWidth,g===b&&(b=j[0].clientWidth),j.remove(),n=g-b},getScrollInfo:function(k){var d=k.isWindow?"":k.element.css("overflow-x"),g=k.isWindow?"":k.element.css("overflow-y"),b=d==="scroll"||d==="auto"&&k.width<k.element[0].scrollWidth,j=g==="scroll"||g==="auto"&&k.height<k.element[0].scrollHeight;return{width:b?C.position.scrollbarWidth():0,height:j?C.position.scrollbarWidth():0}},getWithinInfo:function(b){var d=C(b||window),g=C.isWindow(d[0]);return{element:d,isWindow:g,offset:d.offset()||{left:0,top:0},scrollLeft:d.scrollLeft(),scrollTop:d.scrollTop(),width:g?d.width():d.outerWidth(),height:g?d.height():d.outerHeight()}}},C.fn.position=function(y){if(!y||!y.of){return u.apply(this,arguments)}y=C.extend({},y);var x,v,k,z,w,m=C(y.of),g=C.position.getWithinInfo(y.within),j=C.position.getScrollInfo(g),b=m[0],d=(y.collision||"flip").split(" "),q={};return b.nodeType===9?(v=m.width(),k=m.height(),z={top:0,left:0}):C.isWindow(b)?(v=m.width(),k=m.height(),z={top:m.scrollTop(),left:m.scrollLeft()}):b.preventDefault?(y.at="left top",v=k=0,z={top:b.pageY,left:b.pageX}):(v=m.outerWidth(),k=m.outerHeight(),z=m.offset()),w=C.extend({},z),C.each(["my","at"],function(){var B=(y[this]||"").split(" "),E,A;B.length===1&&(B=o.test(B[0])?B.concat(["center"]):r.test(B[0])?["center"].concat(B):["center","center"]),B[0]=o.test(B[0])?B[0]:"center",B[1]=r.test(B[1])?B[1]:"center",E=s.exec(B[0]),A=s.exec(B[1]),q[this]=[E?E[0]:0,A?A[0]:0],y[this]=[D.exec(B[0])[0],D.exec(B[1])[0]]}),d.length===1&&(d[1]=d[0]),y.at[0]==="right"?w.left+=v:y.at[0]==="center"&&(w.left+=v/2),y.at[1]==="bottom"?w.top+=k:y.at[1]==="center"&&(w.top+=k/2),x=a(q.at,v,k),w.left+=x[0],w.top+=x[1],this.each(function(){var B,O,R=C(this),V=R.outerWidth(),S=R.outerHeight(),P=p(this,"marginLeft"),Q=p(this,"marginTop"),A=V+P+p(this,"marginRight")+j.width,U=S+Q+p(this,"marginBottom")+j.height,N=C.extend({},w),T=a(q.my,R.outerWidth(),R.outerHeight());y.my[0]==="right"?N.left-=V:y.my[0]==="center"&&(N.left-=V/2),y.my[1]==="bottom"?N.top-=S:y.my[1]==="center"&&(N.top-=S/2),N.left+=T[0],N.top+=T[1],C.support.offsetFractions||(N.left=c(N.left),N.top=c(N.top)),B={marginLeft:P,marginTop:Q},C.each(["left","top"],function(E,F){C.ui.position[d[E]]&&C.ui.position[d[E]][F](N,{targetWidth:v,targetHeight:k,elemWidth:V,elemHeight:S,collisionPosition:B,collisionWidth:A,collisionHeight:U,offset:[x[0]+T[0],x[1]+T[1]],my:y.my,at:y.at,within:g,elem:R})}),C.fn.bgiframe&&R.bgiframe(),y.using&&(O=function(G){var E=z.left-N.left,H=E+v-V,F=z.top-N.top,J=F+k-S,I={target:{element:m,left:z.left,top:z.top,width:v,height:k},element:{element:R,left:N.left,top:N.top,width:V,height:S},horizontal:H<0?"left":E>0?"right":"center",vertical:J<0?"top":F>0?"bottom":"middle"};v<V&&h(E+H)<v&&(I.horizontal="center"),k<S&&h(F+J)<k&&(I.vertical="middle"),t(h(E),h(H))>t(h(F),h(J))?I.important="horizontal":I.important="vertical",y.using.call(this,G,I)}),R.offset(C.extend(N,{using:O}))})},C.ui.position={fit:{left:function(d,w){var m=w.within,k=m.isWindow?m.scrollLeft:m.offset.left,v=m.width,q=d.left-w.collisionPosition.marginLeft,b=k-q,g=q+w.collisionWidth-v-k,j;w.collisionWidth>v?b>0&&g<=0?(j=d.left+b+w.collisionWidth-v-k,d.left+=b-j):g>0&&b<=0?d.left=k:b>g?d.left=k+v-w.collisionWidth:d.left=k:b>0?d.left+=b:g>0?d.left-=g:d.left=t(d.left-q,d.left)},top:function(d,w){var m=w.within,k=m.isWindow?m.scrollTop:m.offset.top,v=w.within.height,q=d.top-w.collisionPosition.marginTop,b=k-q,g=q+w.collisionHeight-v-k,j;w.collisionHeight>v?b>0&&g<=0?(j=d.top+b+w.collisionHeight-v-k,d.top+=b-j):g>0&&b<=0?d.top=k:b>g?d.top=k+v-w.collisionHeight:d.top=k:b>0?d.top+=b:g>0?d.top-=g:d.top=t(d.top-q,d.top)}},flip:{left:function(x,k){var B=k.within,g=B.offset.left+B.scrollLeft,j=B.width,b=B.isWindow?B.scrollLeft:B.offset.left,m=x.left-k.collisionPosition.marginLeft,q=m-b,y=m+k.collisionWidth-j-b,A=k.my[0]==="left"?-k.elemWidth:k.my[0]==="right"?k.elemWidth:0,v=k.at[0]==="left"?k.targetWidth:k.at[0]==="right"?-k.targetWidth:0,z=-2*k.offset[0],d,w;if(q<0){d=x.left+A+v+z+k.collisionWidth-j-g;if(d<0||d<h(q)){x.left+=A+v+z}}else{if(y>0){w=x.left-k.collisionPosition.marginLeft+A+v+z-b;if(w>0||h(w)<y){x.left+=A+v+z}}}},top:function(y,k){var R=k.within,g=R.offset.top+R.scrollTop,j=R.height,b=R.isWindow?R.scrollTop:R.offset.top,m=y.top-k.collisionPosition.marginTop,v=m-b,z=m+k.collisionHeight-j-b,B=k.my[1]==="top",w=B?-k.elemHeight:k.my[1]==="bottom"?k.elemHeight:0,A=k.at[1]==="top"?k.targetHeight:k.at[1]==="bottom"?-k.targetHeight:0,d=-2*k.offset[1],x,q;v<0?(q=y.top+w+A+d+k.collisionHeight-j-g,y.top+w+A+d>v&&(q<0||q<h(v))&&(y.top+=w+A+d)):z>0&&(x=y.top-k.collisionPosition.marginTop+w+A+d-b,y.top+w+A+d>z&&(x>0||h(x)<z)&&(y.top+=w+A+d))}},flipfit:{left:function(){C.ui.position.flip.left.apply(this,arguments),C.ui.position.fit.left.apply(this,arguments)},top:function(){C.ui.position.flip.top.apply(this,arguments),C.ui.position.fit.top.apply(this,arguments)}}},function(){var m,k,g,q,j,d=document.getElementsByTagName("body")[0],b=document.createElement("div");m=document.createElement(d?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},d&&C.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(j in g){m.style[j]=g[j]}m.appendChild(b),k=d||document.documentElement,k.insertBefore(m,k.firstChild),b.style.cssText="position: absolute; left: 10.7432222px;",q=C(b).offset().left,C.support.offsetFractions=q>10&&q<11,m.innerHTML="",k.removeChild(m)}(),C.uiBackCompat!==!1&&function(b){var d=b.fn.position;b.fn.position=function(g){if(!g||!g.offset){return d.call(this,g)}var k=g.offset.split(" "),j=g.at.split(" ");return k.length===1&&(k[1]=k[0]),/^\d/.test(k[0])&&(k[0]="+"+k[0]),/^\d/.test(k[1])&&(k[1]="+"+k[1]),j.length===1&&(/left|center|right/.test(j[0])?j[1]="center":(j[1]=j[0],j[0]="center")),d.call(this,b.extend(g,{at:j[0]+k[0]+" "+j[1]+k[1],offset:f}))}}(jQuery)})(jQuery);(function(c,d){c.widget("ui.draggable",c.ui.mouse,{version:"1.9.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var a=this.options;return this.helper||a.disabled||c(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(c(a.iframeFix===!0?"iframe":a.iframeFix).each(function(){c('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(c(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var a=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),c.ui.ddmanager&&(c.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},c.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),a.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),c.ui.ddmanager&&!a.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),c.ui.ddmanager&&c.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(f,a){this.position=this._generatePosition(f),this.positionAbs=this._convertPositionTo("absolute");if(!a){var b=this._uiHash();if(this._trigger("drag",f,b)===!1){return this._mouseUp({}),!1}this.position=b.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}return c.ui.ddmanager&&c.ui.ddmanager.drag(this,f),!1},_mouseStop:function(j){var a=!1;c.ui.ddmanager&&!this.options.dropBehaviour&&(a=c.ui.ddmanager.drop(this,j)),this.dropped&&(a=this.dropped,this.dropped=!1);var b=this.element[0],k=!1;while(b&&(b=b.parentNode)){b==document&&(k=!0)}if(!k&&this.options.helper==="original"){return !1}if(this.options.revert=="invalid"&&!a||this.options.revert=="valid"&&a||this.options.revert===!0||c.isFunction(this.options.revert)&&this.options.revert.call(this.element,a)){var h=this;c(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){h._trigger("stop",j)!==!1&&h._clear()})}else{this._trigger("stop",j)!==!1&&this._clear()}return !1},_mouseUp:function(a){return c("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),c.ui.ddmanager&&c.ui.ddmanager.dragStop(this,a),c.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var a=!this.options.handle||!c(this.options.handle,this.element).length?!0:!1;return c(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(a=!0)}),a},_createHelper:function(f){var a=this.options,b=c.isFunction(a.helper)?c(a.helper.apply(this.element[0],[f])):a.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return b.parents("body").length||b.appendTo(a.appendTo=="parent"?this.element[0].parentNode:a.appendTo),b[0]!=this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&b.css("position","absolute"),b},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" ")),c.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left" in a&&(this.offset.click.left=a.left+this.margins.left),"right" in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top" in a&&(this.offset.click.top=a.top+this.margins.top),"bottom" in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&c.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&c.ui.ie){a={top:0,left:0}}return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var j=this.options;j.containment=="parent"&&(j.containment=this.helper[0].parentNode);if(j.containment=="document"||j.containment=="window"){this.containment=[j.containment=="document"?0:c(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,j.containment=="document"?0:c(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(j.containment=="document"?0:c(window).scrollLeft())+c(j.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(j.containment=="document"?0:c(window).scrollTop())+(c(j.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(j.containment)&&j.containment.constructor!=Array){var a=c(j.containment),b=a[0];if(!b){return}var k=a.offset(),h=c(b).css("overflow")!="hidden";this.containment=[(parseInt(c(b).css("borderLeftWidth"),10)||0)+(parseInt(c(b).css("paddingLeft"),10)||0),(parseInt(c(b).css("borderTopWidth"),10)||0)+(parseInt(c(b).css("paddingTop"),10)||0),(h?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(c(b).css("borderLeftWidth"),10)||0)-(parseInt(c(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(h?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(c(b).css("borderTopWidth"),10)||0)-(parseInt(c(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=a}else{j.containment.constructor==Array&&(this.containment=j.containment)}},_convertPositionTo:function(l,a){a||(a=this.position);var j=l=="absolute"?1:-1,m=this.options,k=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!c.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,b=/(html|body)/i.test(k[0].tagName);return{top:a.top+this.offset.relative.top*j+this.offset.parent.top*j-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():b?0:k.scrollTop())*j,left:a.left+this.offset.relative.left*j+this.offset.parent.left*j-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():b?0:k.scrollLeft())*j}},_generatePosition:function(b){var s=this.options,u=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!c.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(u[0].tagName),a=b.pageX,t=b.pageY;if(this.originalPosition){var f;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();f=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else{f=this.containment}b.pageX-this.offset.click.left<f[0]&&(a=f[0]+this.offset.click.left),b.pageY-this.offset.click.top<f[1]&&(t=f[1]+this.offset.click.top),b.pageX-this.offset.click.left>f[2]&&(a=f[2]+this.offset.click.left),b.pageY-this.offset.click.top>f[3]&&(t=f[3]+this.offset.click.top)}if(s.grid){var n=s.grid[1]?this.originalPageY+Math.round((t-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY;t=f?n-this.offset.click.top<f[1]||n-this.offset.click.top>f[3]?n-this.offset.click.top<f[1]?n+s.grid[1]:n-s.grid[1]:n:n;var r=s.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX;a=f?r-this.offset.click.left<f[0]||r-this.offset.click.left>f[2]?r-this.offset.click.left<f[0]?r+s.grid[0]:r-s.grid[0]:r:r}}return{top:t-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:u.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:u.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(f,a,b){return b=b||this._uiHash(),c.ui.plugin.call(this,f,[a,b]),f=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),c.Widget.prototype._trigger.call(this,f,a,b)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),c.ui.plugin.add("draggable","connectToSortable",{start:function(j,a){var b=c(this).data("draggable"),k=b.options,h=c.extend({},a,{item:b.element});b.sortables=[],c(k.connectToSortable).each(function(){var f=c.data(this,"sortable");f&&!f.options.disabled&&(b.sortables.push({instance:f,shouldRevert:f.options.revert}),f.refreshPositions(),f._trigger("activate",j,h))})},stop:function(g,a){var b=c(this).data("draggable"),h=c.extend({},a,{item:b.element});c.each(b.sortables,function(){this.instance.isOver?(this.instance.isOver=0,b.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(g),this.instance.options.helper=this.instance.options._helper,b.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",g,h))})},drag:function(j,a){var b=c(this).data("draggable"),k=this,h=function(x){var r=this.offset.click.top,t=this.offset.click.left,o=this.positionAbs.top,u=this.positionAbs.left,s=x.height,f=x.width,g=x.top,n=x.left;return c.ui.isOver(o+r,u+t,g,n,s,f)};c.each(b.sortables,function(g){var f=!1,l=this;this.instance.positionAbs=b.positionAbs,this.instance.helperProportions=b.helperProportions,this.instance.offset.click=b.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,c.each(b.sortables,function(){return this.instance.positionAbs=b.positionAbs,this.instance.helperProportions=b.helperProportions,this.instance.offset.click=b.offset.click,this!=l&&this.instance._intersectsWith(this.instance.containerCache)&&c.ui.contains(l.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=c(k).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return a.helper[0]},j.target=this.instance.currentItem[0],this.instance._mouseCapture(j,!0),this.instance._mouseStart(j,!0,!0),this.instance.offset.click.top=b.offset.click.top,this.instance.offset.click.left=b.offset.click.left,this.instance.offset.parent.left-=b.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=b.offset.parent.top-this.instance.offset.parent.top,b._trigger("toSortable",j),b.dropped=this.instance.element,b.currentItem=b.element,this.instance.fromOutside=b),this.instance.currentItem&&this.instance._mouseDrag(j)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",j,this.instance._uiHash(this.instance)),this.instance._mouseStop(j,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),b._trigger("fromSortable",j),b.dropped=!1)})}}),c.ui.plugin.add("draggable","cursor",{start:function(g,a){var b=c("body"),h=c(this).data("draggable").options;b.css("cursor")&&(h._cursor=b.css("cursor")),b.css("cursor",h.cursor)},stop:function(f,a){var b=c(this).data("draggable").options;b._cursor&&c("body").css("cursor",b._cursor)}}),c.ui.plugin.add("draggable","opacity",{start:function(g,a){var b=c(a.helper),h=c(this).data("draggable").options;b.css("opacity")&&(h._opacity=b.css("opacity")),b.css("opacity",h.opacity)},stop:function(f,a){var b=c(this).data("draggable").options;b._opacity&&c(a.helper).css("opacity",b._opacity)}}),c.ui.plugin.add("draggable","scroll",{start:function(f,a){var b=c(this).data("draggable");b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"&&(b.overflowOffset=b.scrollParent.offset())},drag:function(j,a){var b=c(this).data("draggable"),k=b.options,h=!1;if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"){if(!k.axis||k.axis!="x"){b.overflowOffset.top+b.scrollParent[0].offsetHeight-j.pageY<k.scrollSensitivity?b.scrollParent[0].scrollTop=h=b.scrollParent[0].scrollTop+k.scrollSpeed:j.pageY-b.overflowOffset.top<k.scrollSensitivity&&(b.scrollParent[0].scrollTop=h=b.scrollParent[0].scrollTop-k.scrollSpeed)}if(!k.axis||k.axis!="y"){b.overflowOffset.left+b.scrollParent[0].offsetWidth-j.pageX<k.scrollSensitivity?b.scrollParent[0].scrollLeft=h=b.scrollParent[0].scrollLeft+k.scrollSpeed:j.pageX-b.overflowOffset.left<k.scrollSensitivity&&(b.scrollParent[0].scrollLeft=h=b.scrollParent[0].scrollLeft-k.scrollSpeed)}}else{if(!k.axis||k.axis!="x"){j.pageY-c(document).scrollTop()<k.scrollSensitivity?h=c(document).scrollTop(c(document).scrollTop()-k.scrollSpeed):c(window).height()-(j.pageY-c(document).scrollTop())<k.scrollSensitivity&&(h=c(document).scrollTop(c(document).scrollTop()+k.scrollSpeed))}if(!k.axis||k.axis!="y"){j.pageX-c(document).scrollLeft()<k.scrollSensitivity?h=c(document).scrollLeft(c(document).scrollLeft()-k.scrollSpeed):c(window).width()-(j.pageX-c(document).scrollLeft())<k.scrollSensitivity&&(h=c(document).scrollLeft(c(document).scrollLeft()+k.scrollSpeed))}}h!==!1&&c.ui.ddmanager&&!k.dropBehaviour&&c.ui.ddmanager.prepareOffsets(b,j)}}),c.ui.plugin.add("draggable","snap",{start:function(g,a){var b=c(this).data("draggable"),h=b.options;b.snapElements=[],c(h.snap.constructor!=String?h.snap.items||":data(draggable)":h.snap).each(function(){var j=c(this),f=j.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:j.outerWidth(),height:j.outerHeight(),top:f.top,left:f.left})})},drag:function(v,u){var l=c(this).data("draggable"),r=l.options,n=r.snapTolerance,y=u.offset.left,N=y+l.helperProportions.width,a=u.offset.top,m=a+l.helperProportions.height;for(var s=l.snapElements.length-1;s>=0;s--){var g=l.snapElements[s].left,p=g+l.snapElements[s].width,f=l.snapElements[s].top,h=f+l.snapElements[s].height;if(!(g-n<y&&y<p+n&&f-n<a&&a<h+n||g-n<y&&y<p+n&&f-n<m&&m<h+n||g-n<N&&N<p+n&&f-n<a&&a<h+n||g-n<N&&N<p+n&&f-n<m&&m<h+n)){l.snapElements[s].snapping&&l.options.snap.release&&l.options.snap.release.call(l.element,v,c.extend(l._uiHash(),{snapItem:l.snapElements[s].item})),l.snapElements[s].snapping=!1;continue}if(r.snapMode!="inner"){var O=Math.abs(f-m)<=n,t=Math.abs(h-a)<=n,o=Math.abs(g-N)<=n,P=Math.abs(p-y)<=n;O&&(u.position.top=l._convertPositionTo("relative",{top:f-l.helperProportions.height,left:0}).top-l.margins.top),t&&(u.position.top=l._convertPositionTo("relative",{top:h,left:0}).top-l.margins.top),o&&(u.position.left=l._convertPositionTo("relative",{top:0,left:g-l.helperProportions.width}).left-l.margins.left),P&&(u.position.left=l._convertPositionTo("relative",{top:0,left:p}).left-l.margins.left)}var b=O||t||o||P;if(r.snapMode!="outer"){var O=Math.abs(f-a)<=n,t=Math.abs(h-m)<=n,o=Math.abs(g-y)<=n,P=Math.abs(p-N)<=n;O&&(u.position.top=l._convertPositionTo("relative",{top:f,left:0}).top-l.margins.top),t&&(u.position.top=l._convertPositionTo("relative",{top:h-l.helperProportions.height,left:0}).top-l.margins.top),o&&(u.position.left=l._convertPositionTo("relative",{top:0,left:g}).left-l.margins.left),P&&(u.position.left=l._convertPositionTo("relative",{top:0,left:p-l.helperProportions.width}).left-l.margins.left)}!l.snapElements[s].snapping&&(O||t||o||P||b)&&l.options.snap.snap&&l.options.snap.snap.call(l.element,v,c.extend(l._uiHash(),{snapItem:l.snapElements[s].item})),l.snapElements[s].snapping=O||t||o||P||b}}}),c.ui.plugin.add("draggable","stack",{start:function(j,a){var b=c(this).data("draggable").options,k=c.makeArray(c(b.stack)).sort(function(g,f){return(parseInt(c(g).css("zIndex"),10)||0)-(parseInt(c(f).css("zIndex"),10)||0)});if(!k.length){return}var h=parseInt(k[0].style.zIndex)||0;c(k).each(function(f){this.style.zIndex=h+f}),this[0].style.zIndex=h+k.length}}),c.ui.plugin.add("draggable","zIndex",{start:function(g,a){var b=c(a.helper),h=c(this).data("draggable").options;b.css("zIndex")&&(h._zIndex=b.css("zIndex")),b.css("zIndex",h.zIndex)},stop:function(f,a){var b=c(this).data("draggable").options;b._zIndex&&c(a.helper).css("zIndex",b._zIndex)}})})(jQuery);(function(c,d){c.widget("ui.droppable",{version:"1.9.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,a=b.accept;this.isover=0,this.isout=1,this.accept=c.isFunction(a)?a:function(g){return g.is(a)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},c.ui.ddmanager.droppables[b.scope]=c.ui.ddmanager.droppables[b.scope]||[],c.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var b=c.ui.ddmanager.droppables[this.options.scope];for(var a=0;a<b.length;a++){b[a]==this&&b.splice(a,1)}this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,a){b=="accept"&&(this.accept=c.isFunction(a)?a:function(g){return g.is(a)}),c.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var a=c.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),a&&this._trigger("activate",b,this.ui(a))},_deactivate:function(b){var a=c.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),a&&this._trigger("deactivate",b,this.ui(a))},_over:function(b){var a=c.ui.ddmanager.current;if(!a||(a.currentItem||a.element)[0]==this.element[0]){return}this.accept.call(this.element[0],a.currentItem||a.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(a)))},_out:function(b){var a=c.ui.ddmanager.current;if(!a||(a.currentItem||a.element)[0]==this.element[0]){return}this.accept.call(this.element[0],a.currentItem||a.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(a)))},_drop:function(g,a){var b=a||c.ui.ddmanager.current;if(!b||(b.currentItem||b.element)[0]==this.element[0]){return !1}var h=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var f=c.data(this,"droppable");if(f.options.greedy&&!f.options.disabled&&f.options.scope==b.options.scope&&f.accept.call(f.element[0],b.currentItem||b.element)&&c.ui.intersect(b,c.extend(f,{offset:f.element.offset()}),f.options.tolerance)){return h=!0,!1}}),h?!1:this.accept.call(this.element[0],b.currentItem||b.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",g,this.ui(b)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),c.ui.intersect=function(f,n,r){if(!n.offset){return !1}var b=(f.positionAbs||f.position.absolute).left,a=b+f.helperProportions.width,o=(f.positionAbs||f.position.absolute).top,h=o+f.helperProportions.height,s=n.offset.left,D=s+n.proportions.width,l=n.offset.top,t=l+n.proportions.height;switch(r){case"fit":return s<=b&&a<=D&&l<=o&&h<=t;case"intersect":return s<b+f.helperProportions.width/2&&a-f.helperProportions.width/2<D&&l<o+f.helperProportions.height/2&&h-f.helperProportions.height/2<t;case"pointer":var E=(f.positionAbs||f.position.absolute).left+(f.clickOffset||f.offset.click).left,p=(f.positionAbs||f.position.absolute).top+(f.clickOffset||f.offset.click).top,u=c.ui.isOver(p,E,l,s,n.proportions.height,n.proportions.width);return u;case"touch":return(o>=l&&o<=t||h>=l&&h<=t||o<l&&h>t)&&(b>=s&&b<=D||a>=s&&a<=D||b<s&&a>D);default:return !1}},c.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(m,a){var k=c.ui.ddmanager.droppables[m.options.scope]||[],n=a?a.type:null,l=(m.currentItem||m.element).find(":data(droppable)").andSelf();c:for(var b=0;b<k.length;b++){if(k[b].options.disabled||m&&!k[b].accept.call(k[b].element[0],m.currentItem||m.element)){continue}for(var o=0;o<l.length;o++){if(l[o]==k[b].element[0]){k[b].proportions.height=0;continue c}}k[b].visible=k[b].element.css("display")!="none";if(!k[b].visible){continue}n=="mousedown"&&k[b]._activate.call(k[b],a),k[b].offset=k[b].element.offset(),k[b].proportions={width:k[b].element[0].offsetWidth,height:k[b].element[0].offsetHeight}}},drop:function(f,a){var b=!1;return c.each(c.ui.ddmanager.droppables[f.options.scope]||[],function(){if(!this.options){return}!this.options.disabled&&this.visible&&c.ui.intersect(f,this,this.options.tolerance)&&(b=this._drop.call(this,a)||b),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],f.currentItem||f.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,a))}),b},dragStart:function(b,a){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||c.ui.ddmanager.prepareOffsets(b,a)})},drag:function(b,a){b.options.refreshPositions&&c.ui.ddmanager.prepareOffsets(b,a),c.each(c.ui.ddmanager.droppables[b.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var l=c.ui.intersect(b,this,this.options.tolerance),n=!l&&this.isover==1?"isout":l&&this.isover==0?"isover":null;if(!n){return}var m;if(this.options.greedy){var k=this.options.scope,o=this.element.parents(":data(droppable)").filter(function(){return c.data(this,"droppable").options.scope===k});o.length&&(m=c.data(o[0],"droppable"),m.greedyChild=n=="isover"?1:0)}m&&n=="isover"&&(m.isover=0,m.isout=1,m._out.call(m,a)),this[n]=1,this[n=="isout"?"isover":"isout"]=0,this[n=="isover"?"_over":"_out"].call(this,a),m&&n=="isout"&&(m.isout=0,m.isover=1,m._over.call(m,a))})},dragStop:function(b,a){b.element.parentsUntil("body").unbind("scroll.droppable"),b.options.refreshPositions||c.ui.ddmanager.prepareOffsets(b,a)}}})(jQuery);(function(j,g){j.widget("ui.resizable",j.ui.mouse,{version:"1.9.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var m=this,a=this.options;this.element.addClass("ui-resizable"),j.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(j('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(j(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var c=this.handles.split(",");this.handles={};for(var n=0;n<c.length;n++){var d=j.trim(c[n]),b="ui-resizable-"+d,o=j('<div class="ui-resizable-handle '+b+'"></div>');o.css({zIndex:a.zIndex}),"se"==d&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(o)}}this._renderAxis=function(t){t=t||this.element;for(var l in this.handles){this.handles[l].constructor==String&&(this.handles[l]=j(this.handles[l],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=j(this.handles[l],this.element),k=0;k=/sw|ne|nw|se|n|s/.test(l)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(l)?"Top":/se|sw|s/.test(l)?"Bottom":/^e$/.test(l)?"Right":"Left"].join("");t.css(s,k),this._proportionallyResize()}if(!j(this.handles[l]).length){continue}}},this._renderAxis(this.element),this._handles=j(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!m.resizing){if(this.className){var k=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}m.axis=k&&k[1]?k[1]:"se"}}),a.autoHide&&(this._handles.hide(),j(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(a.disabled){return}j(this).removeClass("ui-resizable-autohide"),m._handles.show()}).mouseleave(function(){if(a.disabled){return}m.resizing||(j(this).addClass("ui-resizable-autohide"),m._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b=function(c){j(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var a=this.element;this.originalElement.css({position:a.css("position"),width:a.outerWidth(),height:a.outerHeight(),top:a.css("top"),left:a.css("left")}).insertAfter(a),a.remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(c){var a=!1;for(var b in this.handles){j(this.handles[b])[0]==c.target&&(a=!0)}return !this.options.disabled&&a},_mouseStart:function(d){var b=this.options,m=this.element.position(),c=this.element;this.resizing=!0,this.documentScroll={top:j(document).scrollTop(),left:j(document).scrollLeft()},(c.is(".ui-draggable")||/absolute/.test(c.css("position")))&&c.css({position:"absolute",top:m.top,left:m.left}),this._renderProxy();var a=h(this.helper.css("left")),n=h(this.helper.css("top"));b.containment&&(a+=j(b.containment).scrollLeft()||0,n+=j(b.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:a,top:n},this.size=this._helper?{width:c.outerWidth(),height:c.outerHeight()}:{width:c.width(),height:c.height()},this.originalSize=this._helper?{width:c.outerWidth(),height:c.outerHeight()}:{width:c.width(),height:c.height()},this.originalPosition={left:a,top:n},this.sizeDiff={width:c.outerWidth()-c.width(),height:c.outerHeight()-c.height()},this.originalMousePosition={left:d.pageX,top:d.pageY},this.aspectRatio=typeof b.aspectRatio=="number"?b.aspectRatio:this.originalSize.width/this.originalSize.height||1;var o=j(".ui-resizable-"+this.axis).css("cursor");return j("body").css("cursor",o=="auto"?this.axis+"-resize":o),c.addClass("ui-resizable-resizing"),this._propagate("start",d),!0},_mouseDrag:function(a){var s=this.helper,l=this.options,o={},c=this,r=this.originalMousePosition,n=this.axis,t=a.pageX-r.left||0,u=a.pageY-r.top||0,b=this._change[n];if(!b){return !1}var d=b.apply(this,[a,t,u]);this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey){d=this._updateRatio(d,a)}return d=this._respectSize(d,a),this._propagate("resize",a),s.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(d),this._trigger("resize",a,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var d=this._proportionallyResizeElements,s=d.length&&/textarea/i.test(d[0].nodeName),o=s&&j.ui.hasScroll(d[0],"left")?0:r.sizeDiff.height,a=s?0:r.sizeDiff.width,b={width:r.helper.width()-a,height:r.helper.height()-o},c=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,l=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(j.extend(b,{top:l,left:c})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return j("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(c){var n=this.options,a,o,d,b,p;p={minWidth:f(n.minWidth)?n.minWidth:0,maxWidth:f(n.maxWidth)?n.maxWidth:Infinity,minHeight:f(n.minHeight)?n.minHeight:0,maxHeight:f(n.maxHeight)?n.maxHeight:Infinity};if(this._aspectRatio||c){a=p.minHeight*this.aspectRatio,d=p.minWidth/this.aspectRatio,o=p.maxHeight*this.aspectRatio,b=p.maxWidth/this.aspectRatio,a>p.minWidth&&(p.minWidth=a),d>p.minHeight&&(p.minHeight=d),o<p.maxWidth&&(p.maxWidth=o),b<p.maxHeight&&(p.maxHeight=b)}this._vBoundaries=p},_updateCache:function(a){var b=this.options;this.offset=this.helper.offset(),f(a.left)&&(this.position.left=a.left),f(a.top)&&(this.position.top=a.top),f(a.height)&&(this.size.height=a.height),f(a.width)&&(this.size.width=a.width)},_updateRatio:function(c,m){var a=this.options,n=this.position,d=this.size,b=this.axis;return f(c.height)?c.width=c.height*this.aspectRatio:f(c.width)&&(c.height=c.width/this.aspectRatio),b=="sw"&&(c.left=n.left+(d.width-c.width),c.top=null),b=="nw"&&(c.top=n.top+(d.height-c.height),c.left=n.left+(d.width-c.width)),c},_respectSize:function(F,b){var p=this.helper,d=this._vBoundaries,H=this._aspectRatio||b.shiftKey,s=this.axis,c=f(F.width)&&d.maxWidth&&d.maxWidth<F.width,n=f(F.height)&&d.maxHeight&&d.maxHeight<F.height,G=f(F.width)&&d.minWidth&&d.minWidth>F.width,o=f(F.height)&&d.minHeight&&d.minHeight>F.height;G&&(F.width=d.minWidth),o&&(F.height=d.minHeight),c&&(F.width=d.maxWidth),n&&(F.height=d.maxHeight);var u=this.originalPosition.left+this.originalSize.width,a=this.position.top+this.size.height,t=/sw|nw|w/.test(s),v=/nw|ne|n/.test(s);G&&t&&(F.left=u-d.minWidth),c&&t&&(F.left=u-d.maxWidth),o&&v&&(F.top=a-d.minHeight),n&&v&&(F.top=a-d.maxHeight);var l=!F.width&&!F.height;return l&&!F.left&&F.top?F.top=null:l&&!F.top&&F.left&&(F.left=null),F},_proportionallyResize:function(){var l=this.options;if(!this._proportionallyResizeElements.length){return}var a=this.helper||this.element;for(var c=0;c<this._proportionallyResizeElements.length;c++){var m=this._proportionallyResizeElements[c];if(!this.borderDif){var d=[m.css("borderTopWidth"),m.css("borderRightWidth"),m.css("borderBottomWidth"),m.css("borderLeftWidth")],b=[m.css("paddingTop"),m.css("paddingRight"),m.css("paddingBottom"),m.css("paddingLeft")];this.borderDif=j.map(d,function(k,p){var q=parseInt(k,10)||0,n=parseInt(b[p],10)||0;return q+n})}m.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var c=this.element,a=this.options;this.elementOffset=c.offset();if(this._helper){this.helper=this.helper||j('<div style="overflow:hidden;"></div>');var b=j.ui.ie6?1:0,d=j.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+d,height:this.element.outerHeight()+d,position:"absolute",left:this.elementOffset.left-b+"px",top:this.elementOffset.top-b+"px",zIndex:++a.zIndex}),this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(b,c,a){return{width:this.originalSize.width+c}},w:function(b,m,a){var c=this.options,n=this.originalSize,d=this.originalPosition;return{left:d.left+m,width:n.width-m}},n:function(b,m,a){var c=this.options,n=this.originalSize,d=this.originalPosition;return{top:d.top+a,height:n.height-a}},s:function(b,c,a){return{height:this.originalSize.height+a}},se:function(c,a,b){return j.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[c,a,b]))},sw:function(c,a,b){return j.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[c,a,b]))},ne:function(c,a,b){return j.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[c,a,b]))},nw:function(c,a,b){return j.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[c,a,b]))}},_propagate:function(b,a){j.ui.plugin.call(this,b,[a,this.ui()]),b!="resize"&&this._trigger(b,a,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),j.ui.plugin.add("resizable","alsoResize",{start:function(d,a){var b=j(this).data("resizable"),k=b.options,c=function(l){j(l).each(function(){var m=j(this);m.data("resizable-alsoresize",{width:parseInt(m.width(),10),height:parseInt(m.height(),10),left:parseInt(m.css("left"),10),top:parseInt(m.css("top"),10)})})};typeof k.alsoResize=="object"&&!k.alsoResize.parentNode?k.alsoResize.length?(k.alsoResize=k.alsoResize[0],c(k.alsoResize)):j.each(k.alsoResize,function(l){c(l)}):c(k.alsoResize)},resize:function(n,a){var c=j(this).data("resizable"),o=c.options,d=c.originalSize,b=c.originalPosition,p={height:c.size.height-d.height||0,width:c.size.width-d.width||0,top:c.position.top-b.top||0,left:c.position.left-b.left||0},q=function(k,l){j(k).each(function(){var t=j(this),v=j(this).data("resizable-alsoresize"),s={},m=l&&l.length?l:t.parents(a.originalElement[0]).length?["width","height"]:["width","height","top","left"];j.each(m,function(u,w){var r=(v[w]||0)+(p[w]||0);r&&r>=0&&(s[w]=r||null)}),t.css(s)})};typeof o.alsoResize=="object"&&!o.alsoResize.nodeType?j.each(o.alsoResize,function(l,k){q(l,k)}):q(o.alsoResize)},stop:function(b,a){j(this).removeData("resizable-alsoresize")}}),j.ui.plugin.add("resizable","animate",{stop:function(t,n){var r=j(this).data("resizable"),d=r.options,s=r._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),u=o&&j.ui.hasScroll(s[0],"left")?0:r.sizeDiff.height,a=o?0:r.sizeDiff.width,c={width:r.size.width-a,height:r.size.height-u},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,b=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(j.extend(c,b&&l?{top:b,left:l}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var k={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};s&&s.length&&j(s[0]).css({width:k.width,height:k.height}),r._updateCache(k),r._propagate("resize",t)}})}}),j.ui.plugin.add("resizable","containment",{start:function(c,t){var o=j(this).data("resizable"),a=o.options,r=o.element,d=a.containment,v=d instanceof j?d.get(0):/parent/.test(d)?r.parent().get(0):d;if(!v){return}o.containerElement=j(v);if(/document/.test(d)||d==document){o.containerOffset={left:0,top:0},o.containerPosition={left:0,top:0},o.parentData={element:j(document),left:0,top:0,width:j(document).width(),height:j(document).height()||document.body.parentNode.scrollHeight}}else{var b=j(v),p=[];j(["Top","Right","Left","Bottom"]).each(function(k,m){p[k]=h(b.css("padding"+m))}),o.containerOffset=b.offset(),o.containerPosition=b.position(),o.containerSize={height:b.innerHeight()-p[3],width:b.innerWidth()-p[1]};var D=o.containerOffset,l=o.containerSize.height,s=o.containerSize.width,E=j.ui.hasScroll(v,"left")?v.scrollWidth:s,u=j.ui.hasScroll(v)?v.scrollHeight:l;o.parentData={element:v,left:D.left,top:D.top,width:E,height:u}}},resize:function(a,o){var s=j(this).data("resizable"),c=s.options,G=s.containerSize,p=s.containerOffset,b=s.size,l=s.position,v=s._aspectRatio||a.shiftKey,n={top:0,left:0},t=s.containerElement;t[0]!=document&&/static/.test(t.css("position"))&&(n=p),l.left<(s._helper?p.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-p.left:s.position.left-n.left),v&&(s.size.height=s.size.width/s.aspectRatio),s.position.left=c.helper?p.left:0),l.top<(s._helper?p.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-p.top:s.position.top),v&&(s.size.width=s.size.height*s.aspectRatio),s.position.top=s._helper?p.top:0),s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top;var F=Math.abs((s._helper?s.offset.left-n.left:s.offset.left-n.left)+s.sizeDiff.width),r=Math.abs((s._helper?s.offset.top-n.top:s.offset.top-p.top)+s.sizeDiff.height),u=s.containerElement.get(0)==s.element.parent().get(0),d=/relative|absolute/.test(s.containerElement.css("position"));u&&d&&(F-=s.parentData.left),F+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-F,v&&(s.size.height=s.size.width/s.aspectRatio)),r+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-r,v&&(s.size.width=s.size.height*s.aspectRatio))},stop:function(s,l){var o=j(this).data("resizable"),c=o.options,r=o.position,n=o.containerOffset,t=o.containerPosition,u=o.containerElement,a=j(o.helper),d=a.offset(),A=a.outerWidth()-o.sizeDiff.width,b=a.outerHeight()-o.sizeDiff.height;o._helper&&!c.animate&&/relative/.test(u.css("position"))&&j(this).css({left:d.left-t.left-n.left,width:A,height:b}),o._helper&&!c.animate&&/static/.test(u.css("position"))&&j(this).css({left:d.left-t.left-n.left,width:A,height:b})}}),j.ui.plugin.add("resizable","ghost",{start:function(d,a){var b=j(this).data("resizable"),k=b.options,c=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:0.25,display:"block",position:"relative",height:c.height,width:c.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof k.ghost=="string"?k.ghost:""),b.ghost.appendTo(b.helper)},resize:function(c,a){var b=j(this).data("resizable"),d=b.options;b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(c,a){var b=j(this).data("resizable"),d=b.options;b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),j.ui.plugin.add("resizable","grid",{resize:function(t,n){var r=j(this).data("resizable"),d=r.options,s=r.size,o=r.originalSize,u=r.originalPosition,a=r.axis,c=d._aspectRatio||t.shiftKey;d.grid=typeof d.grid=="number"?[d.grid,d.grid]:d.grid;var l=Math.round((s.width-o.width)/(d.grid[0]||1))*(d.grid[0]||1),b=Math.round((s.height-o.height)/(d.grid[1]||1))*(d.grid[1]||1);/^(se|s|e)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+b):/^(ne)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+b,r.position.top=u.top-b):/^(sw)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+b,r.position.left=u.left-l):(r.size.width=o.width+l,r.size.height=o.height+b,r.position.top=u.top-b,r.position.left=u.left-l)}});var h=function(a){return parseInt(a,10)||0},f=function(a){return !isNaN(parseInt(a,10))}})(jQuery);(function(c,d){c.widget("ui.selectable",c.ui.mouse,{version:"1.9.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable"),this.dragged=!1;var a;this.refresh=function(){a=c(b.options.filter,b.element[0]),a.addClass("ui-selectee"),a.each(function(){var h=c(this),g=h.offset();c.data(this,"selectable-item",{element:this,$element:h,left:g.left,top:g.top,right:g.left+h.outerWidth(),bottom:g.top+h.outerHeight(),startselected:!1,selected:h.hasClass("ui-selected"),selecting:h.hasClass("ui-selecting"),unselecting:h.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=a.addClass("ui-selectee"),this._mouseInit(),this.helper=c("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(f){var a=this;this.opos=[f.pageX,f.pageY];if(this.options.disabled){return}var b=this.options;this.selectees=c(b.filter,this.element[0]),this._trigger("start",f),c(b.appendTo).append(this.helper),this.helper.css({left:f.clientX,top:f.clientY,width:0,height:0}),b.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var g=c.data(this,"selectable-item");g.startselected=!0,!f.metaKey&&!f.ctrlKey&&(g.$element.removeClass("ui-selected"),g.selected=!1,g.$element.addClass("ui-unselecting"),g.unselecting=!0,a._trigger("unselecting",f,{unselecting:g.element}))}),c(f.target).parents().andSelf().each(function(){var h=c.data(this,"selectable-item");if(h){var j=!f.metaKey&&!f.ctrlKey||!h.$element.hasClass("ui-selected");return h.$element.removeClass(j?"ui-unselecting":"ui-selected").addClass(j?"ui-selecting":"ui-unselecting"),h.unselecting=!j,h.selecting=j,h.selected=j,j?a._trigger("selecting",f,{selecting:h.element}):a._trigger("unselecting",f,{unselecting:h.element}),!1}})},_mouseDrag:function(n){var a=this;this.dragged=!0;if(this.options.disabled){return}var l=this.options,o=this.opos[0],m=this.opos[1],b=n.pageX,p=n.pageY;if(o>b){var q=b;b=o,o=q}if(m>p){var q=p;p=m,m=q}return this.helper.css({left:o,top:m,width:b-o,height:p-m}),this.selectees.each(function(){var g=c.data(this,"selectable-item");if(!g||g.element==a.element[0]){return}var f=!1;l.tolerance=="touch"?f=!(g.left>b||g.right<o||g.top>p||g.bottom<m):l.tolerance=="fit"&&(f=g.left>o&&g.right<b&&g.top>m&&g.bottom<p),f?(g.selected&&(g.$element.removeClass("ui-selected"),g.selected=!1),g.unselecting&&(g.$element.removeClass("ui-unselecting"),g.unselecting=!1),g.selecting||(g.$element.addClass("ui-selecting"),g.selecting=!0,a._trigger("selecting",n,{selecting:g.element}))):(g.selecting&&((n.metaKey||n.ctrlKey)&&g.startselected?(g.$element.removeClass("ui-selecting"),g.selecting=!1,g.$element.addClass("ui-selected"),g.selected=!0):(g.$element.removeClass("ui-selecting"),g.selecting=!1,g.startselected&&(g.$element.addClass("ui-unselecting"),g.unselecting=!0),a._trigger("unselecting",n,{unselecting:g.element}))),g.selected&&!n.metaKey&&!n.ctrlKey&&!g.startselected&&(g.$element.removeClass("ui-selected"),g.selected=!1,g.$element.addClass("ui-unselecting"),g.unselecting=!0,a._trigger("unselecting",n,{unselecting:g.element})))}),!1},_mouseStop:function(f){var a=this;this.dragged=!1;var b=this.options;return c(".ui-unselecting",this.element[0]).each(function(){var g=c.data(this,"selectable-item");g.$element.removeClass("ui-unselecting"),g.unselecting=!1,g.startselected=!1,a._trigger("unselected",f,{unselected:g.element})}),c(".ui-selecting",this.element[0]).each(function(){var g=c.data(this,"selectable-item");g.$element.removeClass("ui-selecting").addClass("ui-selected"),g.selecting=!1,g.selected=!0,g.startselected=!0,a._trigger("selected",f,{selected:g.element})}),this._trigger("stop",f),this.helper.remove(),!1}})})(jQuery);(function(c,d){c.widget("ui.sortable",c.ui.mouse,{version:"1.9.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?a.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--){this.items[a].item.removeData(this.widgetName+"-item")}return this},_setOption:function(b,a){b==="disabled"?(this.options[b]=a,this.widget().toggleClass("ui-sortable-disabled",!!a)):c.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(l,a){var j=this;if(this.reverting){return !1}if(this.options.disabled||this.options.type=="static"){return !1}this._refreshItems(l);var m=null,k=c(l.target).parents().each(function(){if(c.data(this,j.widgetName+"-item")==j){return m=c(this),!1}});c.data(l.target,j.widgetName+"-item")==j&&(m=c(l.target));if(!m){return !1}if(this.options.handle&&!a){var b=!1;c(this.options.handle,m).find("*").andSelf().each(function(){this==l.target&&(b=!0)});if(!b){return !1}}return this.currentItem=m,this._removeCurrentsFromItems(),!0},_mouseStart:function(j,a,b){var k=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(j),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},c.extend(this.offset,{click:{left:j.pageX-this.offset.left,top:j.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(j),this.originalPageX=j.pageX,this.originalPageY=j.pageY,k.cursorAt&&this._adjustOffsetFromHelper(k.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),k.containment&&this._setContainment(),k.cursor&&(c("body").css("cursor")&&(this._storedCursor=c("body").css("cursor")),c("body").css("cursor",k.cursor)),k.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",k.opacity)),k.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",k.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",j,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!b){for(var h=this.containers.length-1;h>=0;h--){this.containers[h]._trigger("activate",j,this._uiHash(this))}}return c.ui.ddmanager&&(c.ui.ddmanager.current=this),c.ui.ddmanager&&!k.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,j),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(j),!0},_mouseDrag:function(m){this.position=this._generatePosition(m),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var a=this.options,k=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-m.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=k=this.scrollParent[0].scrollTop+a.scrollSpeed:m.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=k=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-m.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=k=this.scrollParent[0].scrollLeft+a.scrollSpeed:m.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=k=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(m.pageY-c(document).scrollTop()<a.scrollSensitivity?k=c(document).scrollTop(c(document).scrollTop()-a.scrollSpeed):c(window).height()-(m.pageY-c(document).scrollTop())<a.scrollSensitivity&&(k=c(document).scrollTop(c(document).scrollTop()+a.scrollSpeed)),m.pageX-c(document).scrollLeft()<a.scrollSensitivity?k=c(document).scrollLeft(c(document).scrollLeft()-a.scrollSpeed):c(window).width()-(m.pageX-c(document).scrollLeft())<a.scrollSensitivity&&(k=c(document).scrollLeft(c(document).scrollLeft()+a.scrollSpeed))),k!==!1&&c.ui.ddmanager&&!a.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,m)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(var n=this.items.length-1;n>=0;n--){var l=this.items[n],b=l.item[0],o=this._intersectsWithPointer(l);if(!o){continue}if(l.instance!==this.currentContainer){continue}if(b!=this.currentItem[0]&&this.placeholder[o==1?"next":"prev"]()[0]!=b&&!c.contains(this.placeholder[0],b)&&(this.options.type=="semi-dynamic"?!c.contains(this.element[0],b):!0)){this.direction=o==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(l)){break}this._rearrange(m,l),this._trigger("change",m,this._uiHash());break}}return this._contactContainers(m),c.ui.ddmanager&&c.ui.ddmanager.drag(this,m),this._trigger("sort",m,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(g,a){if(!g){return}c.ui.ddmanager&&!this.options.dropBehaviour&&c.ui.ddmanager.drop(this,g);if(this.options.revert){var b=this,h=this.placeholder.offset();this.reverting=!0,c(this.helper).animate({left:h.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:h.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){b._clear(g)})}else{this._clear(g,a)}return !1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var a=this.containers.length-1;a>=0;a--){this.containers[a]._trigger("deactivate",null,this._uiHash(this)),this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",null,this._uiHash(this)),this.containers[a].containerCache.over=0)}}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),c.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?c(this.domPosition.prev).after(this.currentItem):c(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(f){var a=this._getItemsAsjQuery(f&&f.connected),b=[];return f=f||{},c(a).each(function(){var g=(c(f.item||this).attr(f.attribute||"id")||"").match(f.expression||/(.+)[-=_](.+)/);g&&b.push((f.key||g[1]+"[]")+"="+(f.key&&f.expression?g[1]:g[2]))}),!b.length&&f.key&&b.push(f.key+"="),b.join("&")},toArray:function(f){var a=this._getItemsAsjQuery(f&&f.connected),b=[];return f=f||{},a.each(function(){b.push(c(f.item||this).attr(f.attribute||"id")||"")}),b},_intersectsWith:function(b){var u=this.positionAbs.left,o=u+this.helperProportions.width,s=this.positionAbs.top,l=s+this.helperProportions.height,t=b.left,r=t+b.width,z=b.top,A=z+b.height,f=this.offset.click.top,n=this.offset.click.left,a=s+f>z&&s+f<A&&u+n>t&&u+n<r;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>b[this.floating?"width":"height"]?a:t<u+this.helperProportions.width/2&&o-this.helperProportions.width/2<r&&z<s+this.helperProportions.height/2&&l-this.helperProportions.height/2<A},_intersectsWithPointer:function(l){var a=this.options.axis==="x"||c.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,l.top,l.height),j=this.options.axis==="y"||c.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,l.left,l.width),m=a&&j,k=this._getDragVerticalDirection(),b=this._getDragHorizontalDirection();return m?this.floating?b&&b=="right"||k=="down"?2:1:k&&(k=="down"?2:1):!1},_intersectsWithSides:function(j){var a=c.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,j.top+j.height/2,j.height),b=c.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,j.left+j.width/2,j.width),k=this._getDragVerticalDirection(),h=this._getDragHorizontalDirection();return this.floating&&h?h=="right"&&b||h=="left"&&!b:k&&(k=="down"&&a||k=="up"&&!a)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!=0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!=0&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(n){var a=[],l=[],o=this._connectWith();if(o&&n){for(var m=o.length-1;m>=0;m--){var b=c(o[m]);for(var p=b.length-1;p>=0;p--){var q=c.data(b[p],this.widgetName);q&&q!=this&&!q.options.disabled&&l.push([c.isFunction(q.options.items)?q.options.items.call(q.element):c(q.options.items,q.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),q])}}}l.push([c.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):c(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var m=l.length-1;m>=0;m--){l[m][0].each(function(){a.push(this)})}return c(a)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=c.grep(this.items,function(g){for(var b=0;b<a.length;b++){if(a[b]==g.item[0]){return !1}}return !0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=[[c.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):c(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready){for(var s=h.length-1;s>=0;s--){var o=c(h[s]);for(var u=o.length-1;u>=0;u--){var z=c.data(o[u],this.widgetName);z&&z!=this&&!z.options.disabled&&(r.push([c.isFunction(z.options.items)?z.options.items.call(z.element[0],t,{item:this.currentItem}):c(z.options.items,z.element),z]),this.containers.push(z))}}}for(var s=r.length-1;s>=0;s--){var b=r[s][1],l=r[s][0];for(var u=0,a=l.length;u<a;u++){var f=c(l[u]);f.data(this.widgetName+"-item",b),n.push({item:f,instance:b,width:0,height:0,left:0,top:0})}}},refreshPositions:function(j){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var a=this.items.length-1;a>=0;a--){var b=this.items[a];if(b.instance!=this.currentContainer&&this.currentContainer&&b.item[0]!=this.currentItem[0]){continue}var k=this.options.toleranceElement?c(this.options.toleranceElement,b.item):b.item;j||(b.width=k.outerWidth(),b.height=k.outerHeight());var h=k.offset();b.left=h.left,b.top=h.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(var a=this.containers.length-1;a>=0;a--){var h=this.containers[a].element.offset();this.containers[a].containerCache.left=h.left,this.containers[a].containerCache.top=h.top,this.containers[a].containerCache.width=this.containers[a].element.outerWidth(),this.containers[a].containerCache.height=this.containers[a].element.outerHeight()}}return this},_createPlaceholder:function(f){f=f||this;var a=f.options;if(!a.placeholder||a.placeholder.constructor==String){var b=a.placeholder;a.placeholder={element:function(){var g=c(document.createElement(f.currentItem[0].nodeName)).addClass(b||f.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return b||(g.style.visibility="hidden"),g},update:function(h,j){if(b&&!a.forcePlaceholderSize){return}j.height()||j.height(f.currentItem.innerHeight()-parseInt(f.currentItem.css("paddingTop")||0,10)-parseInt(f.currentItem.css("paddingBottom")||0,10)),j.width()||j.width(f.currentItem.innerWidth()-parseInt(f.currentItem.css("paddingLeft")||0,10)-parseInt(f.currentItem.css("paddingRight")||0,10))}}}f.placeholder=c(a.placeholder.element.call(f.element,f.currentItem)),f.currentItem.after(f.placeholder),a.placeholder.update(f,f.placeholder)},_contactContainers:function(t){var n=null,r=null;for(var h=this.containers.length-1;h>=0;h--){if(c.contains(this.currentItem[0],this.containers[h].element[0])){continue}if(this._intersectsWith(this.containers[h].containerCache)){if(n&&c.contains(this.containers[h].element[0],n.element[0])){continue}n=this.containers[h],r=h}else{this.containers[h].containerCache.over&&(this.containers[h]._trigger("out",t,this._uiHash(this)),this.containers[h].containerCache.over=0)}}if(!n){return}if(this.containers.length===1){this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}else{var s=10000,o=null,u=this.containers[r].floating?"left":"top",z=this.containers[r].floating?"width":"height",b=this.positionAbs[u]+this.offset.click[u];for(var l=this.items.length-1;l>=0;l--){if(!c.contains(this.containers[r].element[0],this.items[l].item[0])){continue}if(this.items[l].item[0]==this.currentItem[0]){continue}var a=this.items[l].item.offset()[u],f=!1;Math.abs(a-b)>Math.abs(a+this.items[l][z]-b)&&(f=!0,a+=this.items[l][z]),Math.abs(a-b)<s&&(s=Math.abs(a-b),o=this.items[l],this.direction=f?"up":"down")}if(!o&&!this.options.dropOnEmpty){return}this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(f){var a=this.options,b=c.isFunction(a.helper)?c(a.helper.apply(this.element[0],[f,this.currentItem])):a.helper=="clone"?this.currentItem.clone():this.currentItem;return b.parents("body").length||c(a.appendTo!="parent"?a.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]),b[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(b[0].style.width==""||a.forceHelperSize)&&b.width(this.currentItem.width()),(b[0].style.height==""||a.forceHelperSize)&&b.height(this.currentItem.height()),b},_adjustOffsetFromHelper:function(a){typeof a=="string"&&(a=a.split(" ")),c.isArray(a)&&(a={left:+a[0],top:+a[1]||0}),"left" in a&&(this.offset.click.left=a.left+this.margins.left),"right" in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left),"top" in a&&(this.offset.click.top=a.top+this.margins.top),"bottom" in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&c.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&c.ui.ie){a={top:0,left:0}}return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var g=this.options;g.containment=="parent"&&(g.containment=this.helper[0].parentNode);if(g.containment=="document"||g.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,c(g.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(c(g.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(g.containment)){var a=c(g.containment)[0],b=c(g.containment).offset(),h=c(a).css("overflow")!="hidden";this.containment=[b.left+(parseInt(c(a).css("borderLeftWidth"),10)||0)+(parseInt(c(a).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(c(a).css("borderTopWidth"),10)||0)+(parseInt(c(a).css("paddingTop"),10)||0)-this.margins.top,b.left+(h?Math.max(a.scrollWidth,a.offsetWidth):a.offsetWidth)-(parseInt(c(a).css("borderLeftWidth"),10)||0)-(parseInt(c(a).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(h?Math.max(a.scrollHeight,a.offsetHeight):a.offsetHeight)-(parseInt(c(a).css("borderTopWidth"),10)||0)-(parseInt(c(a).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(l,a){a||(a=this.position);var j=l=="absolute"?1:-1,m=this.options,k=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!c.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,b=/(html|body)/i.test(k[0].tagName);return{top:a.top+this.offset.relative.top*j+this.offset.parent.top*j-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():b?0:k.scrollTop())*j,left:a.left+this.offset.relative.left*j+this.offset.parent.left*j-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():b?0:k.scrollLeft())*j}},_generatePosition:function(n){var a=this.options,l=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!c.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(l[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var m=n.pageX,b=n.pageY;if(this.originalPosition){this.containment&&(n.pageX-this.offset.click.left<this.containment[0]&&(m=this.containment[0]+this.offset.click.left),n.pageY-this.offset.click.top<this.containment[1]&&(b=this.containment[1]+this.offset.click.top),n.pageX-this.offset.click.left>this.containment[2]&&(m=this.containment[2]+this.offset.click.left),n.pageY-this.offset.click.top>this.containment[3]&&(b=this.containment[3]+this.offset.click.top));if(a.grid){var p=this.originalPageY+Math.round((b-this.originalPageY)/a.grid[1])*a.grid[1];b=this.containment?p-this.offset.click.top<this.containment[1]||p-this.offset.click.top>this.containment[3]?p-this.offset.click.top<this.containment[1]?p+a.grid[1]:p-a.grid[1]:p:p;var q=this.originalPageX+Math.round((m-this.originalPageX)/a.grid[0])*a.grid[0];m=this.containment?q-this.offset.click.left<this.containment[0]||q-this.offset.click.left>this.containment[2]?q-this.offset.click.left<this.containment[0]?q+a.grid[0]:q-a.grid[0]:q:q}}return{top:b-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:l.scrollTop()),left:m-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:l.scrollLeft())}},_rearrange:function(b,k,a,j){a?a[0].appendChild(this.placeholder[0]):k.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?k.item[0]:k.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var l=this.counter;this._delay(function(){l==this.counter&&this.refreshPositions(!j)})},_clear:function(g,a){this.reverting=!1;var b=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var h in this._storedCSS){if(this._storedCSS[h]=="auto"||this._storedCSS[h]=="static"){this._storedCSS[h]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.fromOutside&&!a&&b.push(function(f){this._trigger("receive",f,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!a&&b.push(function(f){this._trigger("update",f,this._uiHash())}),this!==this.currentContainer&&(a||(b.push(function(f){this._trigger("remove",f,this._uiHash())}),b.push(function(f){return function(j){f._trigger("receive",j,this._uiHash(this))}}.call(this,this.currentContainer)),b.push(function(f){return function(j){f._trigger("update",j,this._uiHash(this))}}.call(this,this.currentContainer))));for(var h=this.containers.length-1;h>=0;h--){a||b.push(function(f){return function(j){f._trigger("deactivate",j,this._uiHash(this))}}.call(this,this.containers[h])),this.containers[h].containerCache.over&&(b.push(function(f){return function(j){f._trigger("out",j,this._uiHash(this))}}.call(this,this.containers[h])),this.containers[h].containerCache.over=0)}this._storedCursor&&c("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!a){this._trigger("beforeStop",g,this._uiHash());for(var h=0;h<b.length;h++){b[h].call(this,g)}this._trigger("stop",g,this._uiHash())}return this.fromOutside=!1,!1}a||this._trigger("beforeStop",g,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!a){for(var h=0;h<b.length;h++){b[h].call(this,g)}this._trigger("stop",g,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){c.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var a=b||this;return{helper:a.helper,placeholder:a.placeholder||c([]),position:a.position,originalPosition:a.originalPosition,offset:a.positionAbs,item:a.currentItem,sender:b?b.element:null}}})})(jQuery);(function(k,g){var j=0,l={},h={};l.height=l.paddingTop=l.paddingBottom=l.borderTopWidth=l.borderBottomWidth="hide",h.height=h.paddingTop=h.paddingBottom=h.borderTopWidth=h.borderBottomWidth="show",k.widget("ui.accordion",{version:"1.9.1",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var b=this.accordionId="ui-accordion-"+(this.element.attr("id")||++j),a=this.options;this.prevShow=this.prevHide=k(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(a.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),!a.collapsible&&(a.active===!1||a.active==null)&&(a.active=0),a.active<0&&(a.active+=this.headers.length),this.active=this._findActive(a.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(c){var f=k(this),o=f.attr("id"),n=f.next(),d=n.attr("id");o||(o=b+"-header-"+c,f.attr("id",o)),d||(d=b+"-panel-"+c,n.attr("id",d)),f.attr("aria-controls",d),n.attr("aria-labelledby",o)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(a.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():k()}},_createIcons:function(){var a=this.options.icons;a&&(k("<span>").addClass("ui-accordion-header-icon ui-icon "+a.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(a.header).addClass(a.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),a=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this.options.heightStyle!=="content"&&a.css("height","")},_setOption:function(a,b){if(a==="active"){this._activate(b);return}a==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(b)),this._super(a,b),a==="collapsible"&&!b&&this.options.active===!1&&this._activate(0),a==="icons"&&(this._destroyIcons(),b&&this._createIcons()),a==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b)},_keydown:function(d){if(d.altKey||d.ctrlKey){return}var a=k.ui.keyCode,b=this.headers.length,f=this.headers.index(d.target),c=!1;switch(d.keyCode){case a.RIGHT:case a.DOWN:c=this.headers[(f+1)%b];break;case a.LEFT:case a.UP:c=this.headers[(f-1+b)%b];break;case a.SPACE:case a.ENTER:this._eventHandler(d);break;case a.HOME:c=this.headers[0];break;case a.END:c=this.headers[b-1]}c&&(k(d.target).attr("tabIndex",-1),k(c).attr("tabIndex",0),c.focus(),d.preventDefault())},_panelKeyDown:function(a){a.keyCode===k.ui.keyCode.UP&&a.ctrlKey&&k(a.currentTarget).prev().focus()},refresh:function(){var c,a,b=this.options.heightStyle,d=this.element.parent();b==="fill"?(k.support.minHeight||(a=d.css("overflow"),d.css("overflow","hidden")),c=d.height(),this.element.siblings(":visible").each(function(){var f=k(this),m=f.css("position");if(m==="absolute"||m==="fixed"){return}c-=f.outerHeight(!0)}),a&&d.css("overflow",a),this.headers.each(function(){c-=k(this).outerHeight(!0)}),this.headers.next().each(function(){k(this).height(Math.max(0,c-k(this).innerHeight()+k(this).height()))}).css("overflow","auto")):b==="auto"&&(c=0,this.headers.next().each(function(){c=Math.max(c,k(this).height("").height())}).height(c))},_activate:function(b){var a=this._findActive(b)[0];if(a===this.active[0]){return}a=a||this.active[0],this._eventHandler({target:a,currentTarget:a,preventDefault:k.noop})},_findActive:function(a){return typeof a=="number"?this.headers.eq(a):k()},_setupEvents:function(b){var a={};if(!b){return}k.each(b.split(" "),function(c,d){a[d]="_eventHandler"}),this._on(this.headers,a)},_eventHandler:function(b){var o=this.options,s=this.active,n=k(b.currentTarget),a=n[0]===s[0],r=a&&o.collapsible,c=r?k():n.next(),d=s.next(),f={oldHeader:s,oldPanel:d,newHeader:r?k():n,newPanel:c};b.preventDefault();if(a&&!o.collapsible||this._trigger("beforeActivate",b,f)===!1){return}o.active=r?!1:this.headers.index(n),this.active=a?k():n,this._toggle(f),s.removeClass("ui-accordion-header-active ui-state-active"),o.icons&&s.children(".ui-accordion-header-icon").removeClass(o.icons.activeHeader).addClass(o.icons.header),a||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),o.icons&&n.children(".ui-accordion-header-icon").removeClass(o.icons.header).addClass(o.icons.activeHeader),n.next().addClass("ui-accordion-content-active"))},_toggle:function(c){var a=c.newPanel,b=this.prevShow.length?this.prevShow:c.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=a,this.prevHide=b,this.options.animate?this._animate(a,b,c):(b.hide(),a.show(),this._toggleComplete(c)),b.attr({"aria-expanded":"false","aria-hidden":"true"}),b.prev().attr("aria-selected","false"),a.length&&b.length?b.prev().attr("tabIndex",-1):a.length&&this.headers.filter(function(){return k(this).attr("tabIndex")===0}).attr("tabIndex",-1),a.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(a,s,f){var p,n,t,u=this,b=0,d=a.length&&(!s.length||a.index()<s.index()),A=this.options.animate||{},c=d&&A.down||A,o=function(){u._toggleComplete(f)};typeof c=="number"&&(t=c),typeof c=="string"&&(n=c),n=n||c.easing||A.easing,t=t||c.duration||A.duration;if(!s.length){return a.animate(h,t,n,o)}if(!a.length){return s.animate(l,t,n,o)}p=a.show().outerHeight(),s.animate(l,{duration:t,easing:n,step:function(m,q){q.now=Math.round(m)}}),a.hide().animate(h,{duration:t,easing:n,complete:o,step:function(q,m){m.now=Math.round(q),m.prop!=="height"?b+=m.now:u.options.heightStyle!=="content"&&(m.now=Math.round(p-s.outerHeight()-b),b=0)}})},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),b.length&&(b.parent()[0].className=b.parent()[0].className),this._trigger("activate",null,a)}}),k.uiBackCompat!==!1&&(function(b,c){b.extend(c.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var a=c._create;c._create=function(){if(this.options.navigation){var m=this,d=this.element.find(this.options.header),n=d.next(),f=d.add(n).find("a").filter(this.options.navigationFilter)[0];f&&d.add(n).each(function(o){if(b.contains(this,f)){return m.options.active=Math.floor(o/2),!1}})}a.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(b,d){b.extend(d.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var a=d._create,c=d._setOption;b.extend(d,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),a.call(this)},_setOption:function(f){if(f==="autoHeight"||f==="clearStyle"||f==="fillSpace"){this.options.heightStyle=this._mergeHeightStyle()}c.apply(this,arguments)},_mergeHeightStyle:function(){var f=this.options;if(f.fillSpace){return"fill"}if(f.clearStyle){return"content"}if(f.autoHeight){return"auto"}}})}(jQuery,jQuery.ui.accordion.prototype),function(b,c){b.extend(c.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var a=c._createIcons;c._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),a.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(b,c){c.activate=c._activate;var a=c._findActive;c._findActive=function(d){return d===-1&&(d=!1),d&&typeof d!="number"&&(d=this.headers.index(this.headers.filter(d)),d===-1&&(d=!1)),a.call(this,d)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(b,c){b.extend(c.options,{change:null,changestart:null});var a=c._trigger;c._trigger=function(d,n,f){var o=a.apply(this,arguments);return o?(d==="beforeActivate"?o=a.call(this,"changestart",n,{oldHeader:f.oldHeader,oldContent:f.oldPanel,newHeader:f.newHeader,newContent:f.newPanel}):d==="activate"&&(o=a.call(this,"change",n,{oldHeader:f.oldHeader,oldContent:f.oldPanel,newHeader:f.newHeader,newContent:f.newPanel})),o):!1}}(jQuery,jQuery.ui.accordion.prototype),function(b,c){b.extend(c.options,{animate:null,animated:"slide"});var a=c._create;c._create=function(){var d=this.options;d.animate===null&&(d.animated?d.animated==="slide"?d.animate=300:d.animated==="bounceslide"?d.animate={duration:200,down:{easing:"easeOutBounce",duration:1000}}:d.animate=d.animated:d.animate=!1),a.call(this)}}(jQuery,jQuery.ui.accordion.prototype))})(jQuery);(function(d,f){var g=0;d.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var c,a,b;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(k){if(this.element.prop("readOnly")){c=!0,b=!0,a=!0;return}c=!1,b=!1,a=!1;var j=d.ui.keyCode;switch(k.keyCode){case j.PAGE_UP:c=!0,this._move("previousPage",k);break;case j.PAGE_DOWN:c=!0,this._move("nextPage",k);break;case j.UP:c=!0,this._keyEvent("previous",k);break;case j.DOWN:c=!0,this._keyEvent("next",k);break;case j.ENTER:case j.NUMPAD_ENTER:this.menu.active&&(c=!0,k.preventDefault(),this.menu.select(k));break;case j.TAB:this.menu.active&&this.menu.select(k);break;case j.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(k),k.preventDefault());break;default:a=!0,this._searchTimeout(k)}},keypress:function(j){if(c){c=!1,j.preventDefault();return}if(a){return}var k=d.ui.keyCode;switch(j.keyCode){case k.PAGE_UP:this._move("previousPage",j);break;case k.PAGE_DOWN:this._move("nextPage",j);break;case k.UP:this._keyEvent("previous",j);break;case k.DOWN:this._keyEvent("next",j)}},input:function(h){if(b){b=!1,h.preventDefault();return}this._searchTimeout(h)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(h){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(h),this._change(h)}}),this._initSource(),this.menu=d("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:d(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(k){k.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var j=this.menu.element[0];d(k.target).closest(".ui-menu-item").length||this._delay(function(){var h=this;this.document.one("mousedown",function(l){l.target!==h.element[0]&&l.target!==j&&!d.contains(j,l.target)&&h.close()})})},menufocus:function(l,j){if(this.isNewMenu){this.isNewMenu=!1;if(l.originalEvent&&/^mouse/.test(l.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){d(l.target).trigger(l.originalEvent)});return}}var k=j.item.data("ui-autocomplete-item")||j.item.data("item.autocomplete");!1!==this._trigger("focus",l,{item:k})?l.originalEvent&&/^key/.test(l.originalEvent.type)&&this._value(k.value):this.liveRegion.text(k.value)},menuselect:function(l,n){var k=n.item.data("ui-autocomplete-item")||n.item.data("item.autocomplete"),m=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=m,this._delay(function(){this.previous=m,this.selectedItem=k})),!1!==this._trigger("select",l,{item:k})&&this._value(k.value),this.term=this._value(),this.close(l),this.selectedItem=k}}),this.liveRegion=d("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),d.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b),a==="source"&&this._initSource(),a==="appendTo"&&this.menu.element.appendTo(this.document.find(b||"body")[0]),a==="disabled"&&b&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var c,a,b=this;d.isArray(this.options.source)?(c=this.options.source,this.source=function(j,k){k(d.ui.autocomplete.filter(c,j.term))}):typeof this.options.source=="string"?(a=this.options.source,this.source=function(j,k){b.xhr&&b.xhr.abort(),b.xhr=d.ajax({url:a,data:j,dataType:"json",success:function(h){k(h)},error:function(){k([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){a=a!=null?a:this._value(),this.term=this._value();if(a.length<this.options.minLength){return this.close(b)}if(this._trigger("search",b)===!1){return}return this._search(a)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var a=this,b=++g;return function(c){b===g&&a.__response(c),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(a){return a.length&&a[0].label&&a[0].value?a:d.map(a,function(b){return typeof b=="string"?{label:b,value:b}:d.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var a=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(a,b),this.menu.refresh(),a.show(),this._resizeMenu(),a.position(d.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(c,a){var b=this;d.each(a,function(k,j){b._renderItemData(c,j)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,a){return d("<li>").append(d("<a>").html(a.label)).appendTo(b)},_move:function(a,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)){this._value(this.term),this.menu.blur();return}this.menu[a](b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(a,b),b.preventDefault()}}}),d.extend(d.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(c,a){var b=new RegExp(d.ui.autocomplete.escapeRegex(a),"i");return d.grep(c,function(h){return b.test(h.label||h.value||h)})}}),d.widget("ui.autocomplete",d.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){var b;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return}a&&a.length?b=this.options.messages.results(a.length):b=this.options.messages.noResults,this.liveRegion.text(b)}})})(jQuery);(function(n,a){var t,w,r,x,u="ui-button ui-widget ui-state-default ui-corner-all",f="ui-state-hover ui-state-active ",l="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",o=function(){var b=n(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},s=function(g){var c=g.name,d=g.form,b=n([]);return c&&(d?b=n(d).find("[name='"+c+"']"):b=n("[name='"+c+"']",g.ownerDocument).filter(function(){return !this.form})),b};n.widget("ui.button",{version:"1.9.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,o),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var c=this,d=this.options,g=this.type==="checkbox"||this.type==="radio",h="ui-state-hover"+(g?"":" ui-state-active"),b="ui-state-focus";d.label===null&&(d.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this.buttonElement.addClass(u).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(d.disabled){return}n(this).addClass("ui-state-hover"),this===t&&n(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(d.disabled){return}n(this).removeClass(h)}).bind("click"+this.eventNamespace,function(j){d.disabled&&(j.preventDefault(),j.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){c.buttonElement.addClass(b)}).bind("blur"+this.eventNamespace,function(){c.buttonElement.removeClass(b)}),g&&(this.element.bind("change"+this.eventNamespace,function(){if(x){return}c.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(j){if(d.disabled){return}x=!1,w=j.pageX,r=j.pageY}).bind("mouseup"+this.eventNamespace,function(j){if(d.disabled){return}if(w!==j.pageX||r!==j.pageY){x=!0}})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(d.disabled||x){return !1}n(this).toggleClass("ui-state-active"),c.buttonElement.attr("aria-pressed",c.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(d.disabled||x){return !1}n(this).addClass("ui-state-active"),c.buttonElement.attr("aria-pressed","true");var j=c.element[0];s(j).not(j).map(function(){return n(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(d.disabled){return !1}n(this).addClass("ui-state-active"),t=this,c.document.one("mouseup",function(){t=null})}).bind("mouseup"+this.eventNamespace,function(){if(d.disabled){return !1}n(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(j){if(d.disabled){return !1}(j.keyCode===n.ui.keyCode.SPACE||j.keyCode===n.ui.keyCode.ENTER)&&n(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){n(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(j){j.keyCode===n.ui.keyCode.SPACE&&n(this).click()})),this._setOption("disabled",d.disabled),this._resetButton()},_determineButtonType:function(){var d,b,c;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(d=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=d.find(b),this.buttonElement.length||(d=d.length?d.siblings():this.element.siblings(),this.buttonElement=d.filter(b),this.buttonElement.length||(this.buttonElement=d.find(b))),this.element.addClass("ui-helper-hidden-accessible"),c=this.element.is(":checked"),c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(u+" "+f+" "+l).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(c,b){this._super(c,b);if(c==="disabled"){b?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var b=this.element.is(":disabled")||this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b),this.type==="radio"?s(this.element[0]).each(function(){n(this).is(":checked")?n(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):n(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var g=this.buttonElement.removeClass(l),h=n("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(g.empty()).text(),c=this.options.icons,b=c.primary&&c.secondary,d=[];c.primary||c.secondary?(this.options.text&&d.push("ui-button-text-icon"+(b?"s":c.primary?"-primary":"-secondary")),c.primary&&g.prepend("<span class='ui-button-icon-primary ui-icon "+c.primary+"'></span>"),c.secondary&&g.append("<span class='ui-button-icon-secondary ui-icon "+c.secondary+"'></span>"),this.options.text||(d.push(b?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||g.attr("title",n.trim(h)))):d.push("ui-button-text-only"),g.addClass(d.join(" "))}}),n.widget("ui.buttonset",{version:"1.9.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(c,b){c==="disabled"&&this.buttons.button("option",c,b),this._super(c,b)},refresh:function(){var b=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return n(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return n(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);(function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t){if(t[n]==null||t[n]==undefined){e[n]=t[n]}}return e}$.extend($.ui,{datepicker:{version:"1.9.1"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName)){return}this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++){e[r].length>t&&(t=e[r].length,n=r)}return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName)){return}n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName)){return}var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName)){return}var r=e.nodeName.toLowerCase();if(r=="input"){e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName)){return}var r=e.nodeName.toLowerCase();if(r=="input"){e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e){return !1}for(var t=0;t<this._disabledInputs.length;t++){if(this._disabledInputs[t]==e){return !0}}return !1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string"){return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null}var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing){switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else{$.datepicker._hideDatepicker()}return !1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}}else{e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1}n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal){try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}}return !0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e){return}var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1){return}extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),i=r[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),a=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e))){e=e[n?"previousSibling":"nextSibling"]}var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME)){return}if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst){return}var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0])){return}this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay){n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear}else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0])){return}var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/86400000)/7)+1},parseDate:function(e,t,n){if(e==null||t==null){throw"Invalid arguments"}t=typeof t=="object"?t.toString():t+"";if(t==""){return null}var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s){throw"Missing number at position "+g}return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return -(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase()){return s=n[0],g+=r.length,!1}});if(s!=-1){return s+1}throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y)){throw"Unexpected literal at position "+g}g++},g=0;for(var y=0;y<e.length;y++){if(h){e.charAt(y)=="'"&&!p("'")?h=!1:m()}else{switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/10000);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}}}if(g<t.length){var w=t.substr(g);if(!/^\s+/.test(w)){throw"Extra/unparsed characters found in date: "+w}}a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var E=this._getDaysInMonth(a,f-1);if(l<=E){break}f++,l-=E}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l){throw"Invalid date"}return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*10000000,formatDate:function(e,t,n){if(!t){return""}var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e)){while(r.length<n){r="0"+r}}return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t){for(var h=0;h<e.length;h++){if(c){e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h)}else{switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/86400000),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*10000+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}}}}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++){if(n){e.charAt(i)=="'"&&!r("'")?n=!1:t+=e.charAt(i)}else{switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}}}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal){return}var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);while(a){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=parseInt(a[1],10)*7;break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v){p--,p<0&&(p=11,d--)}}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+='<div class="ui-datepicker-group';if(o[1]>1){switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!tt||_)&&et[2]?' title="'+et[2]+'"':"")+(nt?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a){h+='<span class="ui-datepicker-month">'+o[t]+"</span>"}else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var v=0;v<12;v++){(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>")}h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f){c+='<span class="ui-datepicker-year">'+n+"</span>"}else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;b<=w;b++){e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>"}e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length){return this}$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.1",window["DP_jQuery_"+dpuuid]=$})(jQuery);(function(k,g){var j="ui-dialog ui-widget ui-widget-content ui-corner-all ",l={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},h={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};k.widget("ui.dialog",{version:"1.9.1",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var a=k(this).css(b).offset().top;a<0&&k(this).css("top",b.top-a)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var d=this,b=this.options,f=b.title||"&#160;",c,q,o,p,a;c=(this.uiDialog=k("<div>")).addClass(j+b.dialogClass).css({display:"none",outline:0,zIndex:b.zIndex}).attr("tabIndex",-1).keydown(function(m){b.closeOnEscape&&!m.isDefaultPrevented()&&m.keyCode&&m.keyCode===k.ui.keyCode.ESCAPE&&(d.close(m),m.preventDefault())}).mousedown(function(m){d.moveToTop(!1,m)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(c),q=(this.uiDialogTitlebar=k("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){c.focus()}).prependTo(c),o=k("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(m){m.preventDefault(),d.close(m)}).appendTo(q),(this.uiDialogTitlebarCloseText=k("<span>")).addClass("ui-icon ui-icon-closethick").text(b.closeText).appendTo(o),p=k("<span>").uniqueId().addClass("ui-dialog-title").html(f).prependTo(q),a=(this.uiDialogButtonPane=k("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=k("<div>")).addClass("ui-dialog-buttonset").appendTo(a),c.attr({role:"dialog","aria-labelledby":p.attr("id")}),q.find("*").add(q).disableSelection(),this._hoverable(o),this._focusable(o),b.draggable&&k.fn.draggable&&this._makeDraggable(),b.resizable&&k.fn.resizable&&this._makeResizable(),this._createButtons(b.buttons),this._isOpen=!1,k.fn.bgiframe&&c.bgiframe(),this._on(c,{keydown:function(t){if(!b.modal||t.keyCode!==k.ui.keyCode.TAB){return}var m=k(":tabbable",c),u=m.filter(":first"),n=m.filter(":last");if(t.target===n[0]&&!t.shiftKey){return u.focus(1),!1}if(t.target===u[0]&&t.shiftKey){return n.focus(1),!1}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var a,b=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),a=b.parent.children().eq(b.index),a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(c){var a=this,b,d;if(!this._isOpen){return}if(!1===this._trigger("beforeClose",c)){return}return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){a._trigger("close",c)}):(this.uiDialog.hide(),this._trigger("close",c)),k.ui.dialog.overlay.resize(),this.options.modal&&(b=0,k(".ui-dialog").each(function(){this!==a.uiDialog[0]&&(d=k(this).css("z-index"),isNaN(d)||(b=Math.max(b,d)))}),k.ui.dialog.maxZ=b),this},isOpen:function(){return this._isOpen},moveToTop:function(c,a){var b=this.options,d;return b.modal&&!c||!b.stack&&!b.modal?this._trigger("focus",a):(b.zIndex>k.ui.dialog.maxZ&&(k.ui.dialog.maxZ=b.zIndex),this.overlay&&(k.ui.dialog.maxZ+=1,k.ui.dialog.overlay.maxZ=k.ui.dialog.maxZ,this.overlay.$el.css("z-index",k.ui.dialog.overlay.maxZ)),d={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},k.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",k.ui.dialog.maxZ),this.element.attr(d),this._trigger("focus",a),this)},open:function(){if(this._isOpen){return}var c,a=this.options,b=this.uiDialog;return this._size(),this._position(a.position),b.show(a.show),this.overlay=a.modal?new k.ui.dialog.overlay(this):null,this.moveToTop(!0),c=this.element.find(":tabbable"),c.length||(c=this.uiDialogButtonPane.find(":tabbable"),c.length||(c=b)),c.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this},_createButtons:function(c){var a=this,b=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),typeof c=="object"&&c!==null&&k.each(c,function(){return !(b=!0)}),b?(k.each(c,function(f,d){d=k.isFunction(d)?{click:d,text:f}:d;var m=k("<button type='button'></button>").attr(d,!0).unbind("click").click(function(){d.click.apply(a.element[0],arguments)}).appendTo(a.uiButtonSet);k.fn.button&&m.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function b(d){return{position:d.position,offset:d.offset}}var c=this,a=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,f){k(this).addClass("ui-dialog-dragging"),c._trigger("dragStart",d,b(f))},drag:function(f,d){c._trigger("drag",f,b(d))},stop:function(f,d){a.position=[d.position.left-c.document.scrollLeft(),d.position.top-c.document.scrollTop()],k(this).removeClass("ui-dialog-dragging"),c._trigger("dragStop",f,b(d)),k.ui.dialog.overlay.resize()}})},_makeResizable:function(a){function m(n){return{originalPosition:n.originalPosition,originalSize:n.originalSize,position:n.position,size:n.size}}a=a===g?this.options.resizable:a;var c=this,f=this.options,d=this.uiDialog.css("position"),b=typeof a=="string"?a:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:f.maxWidth,maxHeight:f.maxHeight,minWidth:f.minWidth,minHeight:this._minHeight(),handles:b,start:function(o,n){k(this).addClass("ui-dialog-resizing"),c._trigger("resizeStart",o,m(n))},resize:function(n,o){c._trigger("resize",n,m(o))},stop:function(o,n){k(this).removeClass("ui-dialog-resizing"),f.height=k(this).height(),f.width=k(this).width(),c._trigger("resizeStop",o,m(n)),k.ui.dialog.overlay.resize()}}).css("position",d).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return a.height==="auto"?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(c){var a=[],b=[0,0],d;if(c){if(typeof c=="string"||typeof c=="object"&&"0" in c){a=c.split?c.split(" "):[c[0],c[1]],a.length===1&&(a[1]=a[0]),k.each(["left","top"],function(f,m){+a[f]===a[f]&&(b[f]=a[f],a[f]=m)}),c={my:a[0]+(b[0]<0?b[0]:"+"+b[0])+" "+a[1]+(b[1]<0?b[1]:"+"+b[1]),at:a.join(" ")}}c=k.extend({},k.ui.dialog.prototype.options.position,c)}else{c=k.ui.dialog.prototype.options.position}d=this.uiDialog.is(":visible"),d||this.uiDialog.show(),this.uiDialog.position(c),d||this.uiDialog.hide()},_setOptions:function(d){var a=this,c={},b=!1;k.each(d,function(f,m){a._setOption(f,m),f in l&&(b=!0),f in h&&(c[f]=m)}),b&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",c)},_setOption:function(d,b){var f,c,a=this.uiDialog;switch(d){case"buttons":this._createButtons(b);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+b);break;case"dialogClass":a.removeClass(this.options.dialogClass).addClass(j+b);break;case"disabled":b?a.addClass("ui-dialog-disabled"):a.removeClass("ui-dialog-disabled");break;case"draggable":f=a.is(":data(draggable)"),f&&!b&&a.draggable("destroy"),!f&&b&&this._makeDraggable();break;case"position":this._position(b);break;case"resizable":c=a.is(":data(resizable)"),c&&!b&&a.resizable("destroy"),c&&typeof b=="string"&&a.resizable("option","handles",b),!c&&b!==!1&&this._makeResizable(b);break;case"title":k(".ui-dialog-title",this.uiDialogTitlebar).html(""+(b||"&#160;"))}this._super(d,b)},_size:function(){var d,a,b,f=this.options,c=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),f.minWidth>f.width&&(f.width=f.minWidth),d=this.uiDialog.css({height:"auto",width:f.width}).outerHeight(),a=Math.max(0,f.minHeight-d),f.height==="auto"?k.support.minHeight?this.element.css({minHeight:a,height:"auto"}):(this.uiDialog.show(),b=this.element.css("height","auto").height(),c||this.uiDialog.hide(),this.element.height(Math.max(b,a))):this.element.height(Math.max(f.height-d,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),k.extend(k.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");return b||(this.uuid+=1,b=this.uuid),"ui-dialog-title-"+b},overlay:function(a){this.$el=k.ui.dialog.overlay.create(a)}}),k.extend(k.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:k.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){this.instances.length===0&&(setTimeout(function(){k.ui.dialog.overlay.instances.length&&k(document).bind(k.ui.dialog.overlay.events,function(c){if(k(c.target).zIndex()<k.ui.dialog.overlay.maxZ){return !1}})},1),k(window).bind("resize.dialog-overlay",k.ui.dialog.overlay.resize));var a=this.oldInstances.pop()||k("<div>").addClass("ui-widget-overlay");return k(document).bind("keydown.dialog-overlay",function(c){var d=k.ui.dialog.overlay.instances;d.length!==0&&d[d.length-1]===a&&b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===k.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a.appendTo(document.body).css({width:this.width(),height:this.height()}),k.fn.bgiframe&&a.bgiframe(),this.instances.push(a),a},destroy:function(c){var a=k.inArray(c,this.instances),b=0;a!==-1&&this.oldInstances.push(this.instances.splice(a,1)[0]),this.instances.length===0&&k([document,window]).unbind(".dialog-overlay"),c.height(0).width(0).remove(),k.each(this.instances,function(){b=Math.max(b,this.css("z-index"))}),this.maxZ=b},height:function(){var b,a;return k.ui.ie?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),a=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),b<a?k(window).height()+"px":b+"px"):k(document).height()+"px"},width:function(){var b,a;return k.ui.ie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),a=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b<a?k(window).width()+"px":b+"px"):k(document).width()+"px"},resize:function(){var a=k([]);k.each(k.ui.dialog.overlay.instances,function(){a=a.add(this)}),a.css({width:0,height:0}).css({width:k.ui.dialog.overlay.width(),height:k.ui.dialog.overlay.height()})}}),k.extend(k.ui.dialog.overlay.prototype,{destroy:function(){k.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);(function(d,f){var g=!1;d.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,d.proxy(function(a){this.options.disabled&&a.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(b){var a=d(b.target).closest(".ui-menu-item");!g&&a.not(".ui-state-disabled").length&&(g=!0,this.select(b),a.has(".ui-menu").length?this.expand(b):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var a=d(b.currentTarget);a.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(b,a)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(b,c){var a=this.active||this.element.children(".ui-menu-item").eq(0);c||this.focus(b,a)},blur:function(a){this._delay(function(){d.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(a)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(a){d(a.target).closest(".ui-menu").length||this.collapseAll(a),g=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var a=d(this);a.data("ui-menu-submenu-carat")&&a.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(n){function q(h){return h.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var a,c,o,m,b,p=!0;switch(n.keyCode){case d.ui.keyCode.PAGE_UP:this.previousPage(n);break;case d.ui.keyCode.PAGE_DOWN:this.nextPage(n);break;case d.ui.keyCode.HOME:this._move("first","first",n);break;case d.ui.keyCode.END:this._move("last","last",n);break;case d.ui.keyCode.UP:this.previous(n);break;case d.ui.keyCode.DOWN:this.next(n);break;case d.ui.keyCode.LEFT:this.collapse(n);break;case d.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(n);break;case d.ui.keyCode.ENTER:case d.ui.keyCode.SPACE:this._activate(n);break;case d.ui.keyCode.ESCAPE:this.collapse(n);break;default:p=!1,c=this.previousFilter||"",o=String.fromCharCode(n.keyCode),m=!1,clearTimeout(this.filterTimer),o===c?m=!0:o=c+o,b=new RegExp("^"+q(o),"i"),a=this.activeMenu.children(".ui-menu-item").filter(function(){return b.test(d(this).children("a").text())}),a=m&&a.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):a,a.length||(o=String.fromCharCode(n.keyCode),b=new RegExp("^"+q(o),"i"),a=this.activeMenu.children(".ui-menu-item").filter(function(){return b.test(d(this).children("a").text())})),a.length?(this.focus(n,a),a.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1000)):delete this.previousFilter):delete this.previousFilter}p&&n.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var c,a=this.options.icons.submenu,b=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});c=b.add(this.element),c.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),c.children(":not(.ui-menu-item)").each(function(){var h=d(this);/[^\-—–\s]/.test(h.text())||h.addClass("ui-widget-content ui-menu-divider")}),c.children(".ui-state-disabled").attr("aria-disabled","true"),b.each(function(){var l=d(this),k=l.prev("a"),m=d("<span>").addClass("ui-menu-icon ui-icon "+a).data("ui-menu-submenu-carat",!0);k.attr("aria-haspopup","true").prepend(m),l.attr("aria-labelledby",k.attr("id"))}),this.active&&!d.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(b,j){var a,c;this.blur(b,b&&b.type==="focus"),this._scrollIntoView(j),this.active=j.first(),c=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",c.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),b&&b.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),a=j.children(".ui-menu"),a.length&&/^mouse/.test(b.type)&&this._startOpening(a),this.activeMenu=j.parent(),this._trigger("focus",b,{item:j})},_scrollIntoView:function(m){var a,c,n,l,b,o;this._hasScroll()&&(a=parseFloat(d.css(this.activeMenu[0],"borderTopWidth"))||0,c=parseFloat(d.css(this.activeMenu[0],"paddingTop"))||0,n=m.offset().top-this.activeMenu.offset().top-a-c,l=this.activeMenu.scrollTop(),b=this.activeMenu.height(),o=m.height(),n<0?this.activeMenu.scrollTop(l+n):n+o>b&&this.activeMenu.scrollTop(l+n-b+o))},blur:function(a,b){b||clearTimeout(this.timer);if(!this.active){return}this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active})},_startOpening:function(a){clearTimeout(this.timer);if(a.attr("aria-hidden")!=="true"){return}this.timer=this._delay(function(){this._close(),this._open(a)},this.delay)},_open:function(b){var a=d.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(a)},collapseAll:function(b,a){clearTimeout(this.timer),this.timer=this._delay(function(){var c=a?this.element:d(b&&b.target).closest(this.element.find(".ui-menu"));c.length||(c=this.element),this._close(c),this.blur(b),this.activeMenu=c},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(b,j,a){var c;this.active&&(b==="first"||b==="last"?c=this.active[b==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):c=this.active[b+"All"](".ui-menu-item").eq(0));if(!c||!c.length||!this.active){c=this.activeMenu.children(".ui-menu-item")[j]()}this.focus(a,c)},nextPage:function(c){var a,b,h;if(!this.active){this.next(c);return}if(this.isLastItem()){return}this._hasScroll()?(b=this.active.offset().top,h=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return a=d(this),a.offset().top-b-h<0}),this.focus(c,a)):this.focus(c,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(c){var a,b,h;if(!this.active){this.next(c);return}if(this.isFirstItem()){return}this._hasScroll()?(b=this.active.offset().top,h=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return a=d(this),a.offset().top-b+h>0}),this.focus(c,a)):this.focus(c,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||d(b.target).closest(".ui-menu-item");var a={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,a)}})})(jQuery);(function(c,d){c.widget("ui.progressbar",{version:"1.9.1",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=c("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(a){return a===d?this._value():(this._setOption("value",a),this)},_setOption:function(a,b){a==="value"&&(this.options.value=b,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(a,b)},_value:function(){var a=this.options.value;return typeof a!="number"&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}})})(jQuery);(function(d,f){var g=5;d.widget("ui.slider",d.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var k,b,l=this.options,c=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",m=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(l.disabled?" ui-slider-disabled ui-disabled":"")),this.range=d([]),l.range&&(l.range===!0&&(l.values||(l.values=[this._valueMin(),this._valueMin()]),l.values.length&&l.values.length!==2&&(l.values=[l.values[0],l.values[0]])),this.range=d("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(l.range==="min"||l.range==="max"?" ui-slider-range-"+l.range:""))),b=l.values&&l.values.length||1;for(k=c.length;k<b;k++){m.push(a)}this.handles=c.add(d(m.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(h){h.preventDefault()}).mouseenter(function(){l.disabled||d(this).addClass("ui-state-hover")}).mouseleave(function(){d(this).removeClass("ui-state-hover")}).focus(function(){l.disabled?d(this).blur():(d(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),d(this).addClass("ui-state-focus"))}).blur(function(){d(this).removeClass("ui-state-focus")}),this.handles.each(function(h){d(this).data("ui-slider-handle-index",h)}),this._on(this.handles,{keydown:function(h){var s,j,t,r,o=d(h.target).data("ui-slider-handle-index");switch(h.keyCode){case d.ui.keyCode.HOME:case d.ui.keyCode.END:case d.ui.keyCode.PAGE_UP:case d.ui.keyCode.PAGE_DOWN:case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:h.preventDefault();if(!this._keySliding){this._keySliding=!0,d(h.target).addClass("ui-state-active"),s=this._start(h,o);if(s===!1){return}}}r=this.options.step,this.options.values&&this.options.values.length?j=t=this.values(o):j=t=this.value();switch(h.keyCode){case d.ui.keyCode.HOME:t=this._valueMin();break;case d.ui.keyCode.END:t=this._valueMax();break;case d.ui.keyCode.PAGE_UP:t=this._trimAlignValue(j+(this._valueMax()-this._valueMin())/g);break;case d.ui.keyCode.PAGE_DOWN:t=this._trimAlignValue(j-(this._valueMax()-this._valueMin())/g);break;case d.ui.keyCode.UP:case d.ui.keyCode.RIGHT:if(j===this._valueMax()){return}t=this._trimAlignValue(j+r);break;case d.ui.keyCode.DOWN:case d.ui.keyCode.LEFT:if(j===this._valueMin()){return}t=this._trimAlignValue(j-r)}this._slide(h,o,t)},keyup:function(j){var h=d(j.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(j,h),this._change(j,h),d(j.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(x){var r,t,n,u,s,a,b,l,o=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),r={x:x.pageX,y:x.pageY},t=this._normValueFromMouse(r),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(j){var h=Math.abs(t-o.values(j));n>h&&(n=h,u=d(this),s=j)}),c.range===!0&&this.values(1)===c.min&&(s+=1,u=d(this.handles[s])),a=this._start(x,s),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=s,u.addClass("ui-state-active").focus(),b=u.offset(),l=!d(x.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:x.pageX-b.left-u.width()/2,top:x.pageY-b.top-u.height()/2-(parseInt(u.css("borderTopWidth"),10)||0)-(parseInt(u.css("borderBottomWidth"),10)||0)+(parseInt(u.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(x,s,t),this._animateOff=!0,!0))},_mouseStart:function(){return !0},_mouseDrag:function(b){var c={x:b.pageX,y:b.pageY},a=this._normValueFromMouse(c);return this._slide(b,this._handleIndex,a),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(b){var m,a,c,n,l;return this.orientation==="horizontal"?(m=this.elementSize.width,a=b.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(m=this.elementSize.height,a=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),c=a/m,c>1&&(c=1),c<0&&(c=0),this.orientation==="vertical"&&(c=1-c),n=this._valueMax()-this._valueMin(),l=this._valueMin()+c*n,this._trimAlignValue(l)},_start:function(b,c){var a={handle:this.handles[c],value:this.value()};return this.options.values&&this.options.values.length&&(a.value=this.values(c),a.values=this.values()),this._trigger("start",b,a)},_slide:function(b,m,a){var c,n,l;this.options.values&&this.options.values.length?(c=this.values(m?0:1),this.options.values.length===2&&this.options.range===!0&&(m===0&&a>c||m===1&&a<c)&&(a=c),a!==this.values(m)&&(n=this.values(),n[m]=a,l=this._trigger("slide",b,{handle:this.handles[m],value:a,values:n}),c=this.values(m?0:1),l!==!1&&this.values(m,a,!0))):a!==this.value()&&(l=this._trigger("slide",b,{handle:this.handles[m],value:a}),l!==!1&&this.value(a))},_stop:function(b,c){var a={handle:this.handles[c],value:this.value()};this.options.values&&this.options.values.length&&(a.value=this.values(c),a.values=this.values()),this._trigger("stop",b,a)},_change:function(b,c){if(!this._keySliding&&!this._mouseSliding){var a={handle:this.handles[c],value:this.value()};this.options.values&&this.options.values.length&&(a.value=this.values(c),a.values=this.values()),this._trigger("change",b,a)}},value:function(a){if(arguments.length){this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(j,a){var b,k,c;if(arguments.length>1){this.options.values[j]=this._trimAlignValue(a),this._refreshValue(),this._change(null,j);return}if(!arguments.length){return this._values()}if(!d.isArray(arguments[0])){return this.options.values&&this.options.values.length?this._values(j):this.value()}b=this.options.values,k=arguments[0];for(c=0;c<b.length;c+=1){b[c]=this._trimAlignValue(k[c]),this._change(null,c)}this._refreshValue()},_setOption:function(c,a){var b,h=0;d.isArray(this.options.values)&&(h=this.options.values.length),d.Widget.prototype._setOption.apply(this,arguments);switch(c){case"disabled":a?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(b=0;b<h;b+=1){this._change(null,b)}this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a),a},_values:function(b){var j,a,c;if(arguments.length){return j=this.options.values[b],j=this._trimAlignValue(j),j}a=this.options.values.slice();for(c=0;c<a.length;c+=1){a[c]=this._trimAlignValue(a[c])}return a},_trimAlignValue:function(b){if(b<=this._valueMin()){return this._valueMin()}if(b>=this._valueMax()){return this._valueMax()}var j=this.options.step>0?this.options.step:1,a=(b-this._valueMin())%j,c=b-a;return Math.abs(a)*2>=j&&(c+=a>0?j:-j),parseFloat(c.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var a,r,t,n,u,s=this.options.range,b=this.options,c=this,l=this._animateOff?!1:b.animate,o={};this.options.values&&this.options.values.length?this.handles.each(function(h){r=(c.values(h)-c._valueMin())/(c._valueMax()-c._valueMin())*100,o[c.orientation==="horizontal"?"left":"bottom"]=r+"%",d(this).stop(1,1)[l?"animate":"css"](o,b.animate),c.options.range===!0&&(c.orientation==="horizontal"?(h===0&&c.range.stop(1,1)[l?"animate":"css"]({left:r+"%"},b.animate),h===1&&c.range[l?"animate":"css"]({width:r-a+"%"},{queue:!1,duration:b.animate})):(h===0&&c.range.stop(1,1)[l?"animate":"css"]({bottom:r+"%"},b.animate),h===1&&c.range[l?"animate":"css"]({height:r-a+"%"},{queue:!1,duration:b.animate}))),a=r}):(t=this.value(),n=this._valueMin(),u=this._valueMax(),r=u!==n?(t-n)/(u-n)*100:0,o[this.orientation==="horizontal"?"left":"bottom"]=r+"%",this.handle.stop(1,1)[l?"animate":"css"](o,b.animate),s==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[l?"animate":"css"]({width:r+"%"},b.animate),s==="max"&&this.orientation==="horizontal"&&this.range[l?"animate":"css"]({width:100-r+"%"},{queue:!1,duration:b.animate}),s==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[l?"animate":"css"]({height:r+"%"},b.animate),s==="max"&&this.orientation==="vertical"&&this.range[l?"animate":"css"]({height:100-r+"%"},{queue:!1,duration:b.animate}))}})})(jQuery);(function(c){function d(a){return function(){var b=this.element.val();a.apply(this,arguments),this._refresh(),b!==this.element.val()&&this._trigger("change")}}c.widget("ui.spinner",{version:"1.9.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b={},a=this.element;return c.each(["min","max","step"],function(j,k){var l=a.attr(k);l!==undefined&&l.length&&(b[k]=l)}),b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){if(this.cancelBlur){delete this.cancelBlur;return}this._refresh(),this.previous!==this.element.val()&&this._trigger("change",a)},mousewheel:function(a,b){if(!b){return}if(!this.spinning&&!this._start(a)){return !1}this._spin((b>0?1:-1)*this.options.step,a),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100),a.preventDefault()},"mousedown .ui-spinner-button":function(f){function b(){var g=this.element[0]===this.document[0].activeElement;g||(this.element.focus(),this.previous=a,this._delay(function(){this.previous=a}))}var a;a=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),f.preventDefault(),b.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,b.call(this)});if(this._start(f)===!1){return}this._repeat(null,c(f.currentTarget).hasClass("ui-spinner-up")?1:-1,f)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(a){if(!c(a.currentTarget).hasClass("ui-state-active")){return}if(this._start(a)===!1){return !1}this._repeat(null,c(a.currentTarget).hasClass("ui-spinner-up")?1:-1,a)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(a.height()*0.5)&&a.height()>0&&a.height(a.height()),this.options.disabled&&this.disable()},_keydown:function(f){var a=this.options,b=c.ui.keyCode;switch(f.keyCode){case b.UP:return this._repeat(null,1,f),!0;case b.DOWN:return this._repeat(null,-1,f),!0;case b.PAGE_UP:return this._repeat(null,a.page,f),!0;case b.PAGE_DOWN:return this._repeat(null,-a.page,f),!0}return !1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){return !this.spinning&&this._trigger("start",a)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(b,g,a){b=b||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,g,a)},b),this._spin(g*this.options.step,a)},_spin:function(b,g){var a=this.value()||0;this.counter||(this.counter=1),a=this._adjustValue(a+b*this._increment(this.counter));if(!this.spinning||this._trigger("spin",g,{value:a})!==!1){this._value(a),this.counter++}},_increment:function(b){var a=this.options.incremental;return a?c.isFunction(a)?a(b):Math.floor(b*b*b/50000-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);return this.options.min!==null&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(b){var g=b.toString(),a=g.indexOf(".");return a===-1?0:g.length-a-1},_adjustValue:function(b){var j,a,h=this.options;return j=h.min!==null?h.min:0,a=b-j,a=Math.round(a/h.step)*h.step,b=j+a,b=parseFloat(b.toFixed(this._precision())),h.max!==null&&b>h.max?h.max:h.min!==null&&b<h.min?h.min:b},_stop:function(a){if(!this.spinning){return}clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a)},_setOption:function(b,g){if(b==="culture"||b==="numberFormat"){var a=this._parse(this.element.val());this.options[b]=g,this.element.val(this._format(a));return}(b==="max"||b==="min"||b==="step")&&typeof g=="string"&&(g=this._parse(g)),this._super(b,g),b==="disabled"&&(g?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:d(function(a){this._super(a),this._value(this.element.val())}),_parse:function(a){return typeof a=="string"&&a!==""&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a),a===""||isNaN(a)?null:a},_format:function(a){return a===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(b,g){var a;b!==""&&(a=this._parse(b),a!==null&&(g||(a=this._adjustValue(a)),b=this._format(a))),this.element.val(b),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:d(function(a){this._stepUp(a)}),_stepUp:function(a){this._spin((a||1)*this.options.step)},stepDown:d(function(a){this._stepDown(a)}),_stepDown:function(a){this._spin((a||1)*-this.options.step)},pageUp:d(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:d(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){if(!arguments.length){return this._parse(this.element.val())}d(this._value).call(this,a)},widget:function(){return this.uiSpinner}})})(jQuery);(function(l,h){function j(){return ++k}function n(a){return a.hash.length>1&&a.href.replace(m,"")===location.href.replace(m,"")}var k=0,m=/#.*$/;l.widget("ui.tabs",{version:"1.9.1",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var c=this,a=this.options,b=a.active,d=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",a.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(f){l(this).is(".ui-state-disabled")&&f.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){l(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs();if(b===null){d&&this.tabs.each(function(g,f){if(l(f).attr("aria-controls")===d){return b=g,!1}}),b===null&&(b=this.tabs.index(this.tabs.filter(".ui-tabs-active")));if(b===null||b===-1){b=this.tabs.length?0:!1}}b!==!1&&(b=this.tabs.index(this.tabs.eq(b)),b===-1&&(b=a.collapsible?!1:0)),a.active=b,!a.collapsible&&a.active===!1&&this.anchors.length&&(a.active=0),l.isArray(a.disabled)&&(a.disabled=l.unique(a.disabled.concat(l.map(this.tabs.filter(".ui-state-disabled"),function(f){return c.tabs.index(f)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(this.options.active):this.active=l(),this._refresh(),this.active.length&&this.load(a.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):l()}},_tabKeydown:function(c){var a=l(this.document[0].activeElement).closest("li"),b=this.tabs.index(a),d=!0;if(this._handlePageNav(c)){return}switch(c.keyCode){case l.ui.keyCode.RIGHT:case l.ui.keyCode.DOWN:b++;break;case l.ui.keyCode.UP:case l.ui.keyCode.LEFT:d=!1,b--;break;case l.ui.keyCode.END:b=this.anchors.length-1;break;case l.ui.keyCode.HOME:b=0;break;case l.ui.keyCode.SPACE:c.preventDefault(),clearTimeout(this.activating),this._activate(b);return;case l.ui.keyCode.ENTER:c.preventDefault(),clearTimeout(this.activating),this._activate(b===this.options.active?!1:b);return;default:return}c.preventDefault(),clearTimeout(this.activating),b=this._focusNextTab(b,d),c.ctrlKey||(a.attr("aria-selected","false"),this.tabs.eq(b).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",b)},this.delay))},_panelKeydown:function(a){if(this._handlePageNav(a)){return}a.ctrlKey&&a.keyCode===l.ui.keyCode.UP&&(a.preventDefault(),this.active.focus())},_handlePageNav:function(a){if(a.altKey&&a.keyCode===l.ui.keyCode.PAGE_UP){return this._activate(this._focusNextTab(this.options.active-1,!1)),!0}if(a.altKey&&a.keyCode===l.ui.keyCode.PAGE_DOWN){return this._activate(this._focusNextTab(this.options.active+1,!0)),!0}},_findNextTab:function(c,a){function d(){return c>b&&(c=0),c<0&&(c=b),c}var b=this.tabs.length-1;while(l.inArray(d(),this.options.disabled)!==-1){c=a?c+1:c-1}return c},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).focus(),a},_setOption:function(a,b){if(a==="active"){this._activate(b);return}if(a==="disabled"){this._setupDisabled(b);return}this._super(a,b),a==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",b),!b&&this.options.active===!1&&this._activate(0)),a==="event"&&this._setupEvents(b),a==="heightStyle"&&this._setupHeightStyle(b)},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+j()},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,a=this.tablist.children(":has(a[href])");b.disabled=l.map(a.filter(".ui-state-disabled"),function(c){return a.index(c)}),this._processTabs(),b.active===!1||!this.anchors.length?(b.active=!1,this.active=l()):this.active.length&&!l.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=l()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var a=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return l("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=l(),this.anchors.each(function(f,u){var b,o,c,d=l(u).uniqueId().attr("id"),r=l(u).closest("li"),g=r.attr("aria-controls");n(u)?(b=u.hash,o=a.element.find(a._sanitizeSelector(b))):(c=a._tabId(r),b="#"+c,o=a.element.find(b),o.length||(o=a._createPanel(c),o.insertAfter(a.panels[f-1]||a.tablist)),o.attr("aria-live","polite")),o.length&&(a.panels=a.panels.add(o)),g&&r.data("ui-tabs-aria-controls",g),r.attr({"aria-controls":b.substring(1),"aria-labelledby":d}),o.attr("aria-labelledby",d)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(a){return l("<div>").attr("id",a).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(c){l.isArray(c)&&(c.length?c.length===this.anchors.length&&(c=!0):c=!1);for(var a=0,b;b=this.tabs[a];a++){c===!0||l.inArray(a,c)!==-1?l(b).addClass("ui-state-disabled").attr("aria-disabled","true"):l(b).removeClass("ui-state-disabled").removeAttr("aria-disabled")}this.options.disabled=c},_setupEvents:function(b){var a={click:function(c){c.preventDefault()}};b&&l.each(b.split(" "),function(c,d){a[d]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,a),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(c){var a,b,d=this.element.parent();c==="fill"?(l.support.minHeight||(b=d.css("overflow"),d.css("overflow","hidden")),a=d.height(),this.element.siblings(":visible").each(function(){var g=l(this),f=g.css("position");if(f==="absolute"||f==="fixed"){return}a-=g.outerHeight(!0)}),b&&d.css("overflow",b),this.element.children().not(this.panels).each(function(){a-=l(this).outerHeight(!0)}),this.panels.each(function(){l(this).height(Math.max(0,a-l(this).innerHeight()+l(this).height()))}).css("overflow","auto")):c==="auto"&&(a=0,this.panels.each(function(){a=Math.max(a,l(this).height("").height())}).height(a))},_eventHandler:function(s){var f=this.options,o=this.active,c=l(s.currentTarget),r=c.closest("li"),g=r[0]===o[0],t=g&&f.collapsible,a=t?l():this._getPanelForTab(r),b=o.length?this._getPanelForTab(o):l(),d={oldTab:o,oldPanel:b,newTab:t?l():r,newPanel:a};s.preventDefault();if(r.hasClass("ui-state-disabled")||r.hasClass("ui-tabs-loading")||this.running||g&&!f.collapsible||this._trigger("beforeActivate",s,d)===!1){return}f.active=t?!1:this.tabs.index(r),this.active=g?l():r,this.xhr&&this.xhr.abort(),!b.length&&!a.length&&l.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(r),s),this._toggle(s,d)},_toggle:function(d,o){function a(){b.running=!1,b._trigger("activate",d,o)}function g(){o.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),f.length&&b.options.show?b._show(f,b.options.show,a):(f.show(),a())}var b=this,f=o.newPanel,c=o.oldPanel;this.running=!0,c.length&&this.options.hide?this._hide(c,this.options.hide,function(){o.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),g()}):(o.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),c.hide(),g()),c.attr({"aria-expanded":"false","aria-hidden":"true"}),o.oldTab.attr("aria-selected","false"),f.length&&c.length?o.oldTab.attr("tabIndex",-1):f.length&&this.tabs.filter(function(){return l(this).attr("tabIndex")===0}).attr("tabIndex",-1),f.attr({"aria-expanded":"true","aria-hidden":"false"}),o.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(c){var a,b=this._findActive(c);if(b[0]===this.active[0]){return}b.length||(b=this.active),a=b.find(".ui-tabs-anchor")[0],this._eventHandler({target:a,currentTarget:a,preventDefault:l.noop})},_findActive:function(a){return a===!1?l():this.tabs.eq(a)},_getIndex:function(a){return typeof a=="string"&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){l.data(this,"ui-tabs-destroy")?l(this).remove():l(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var b=l(this),a=b.data("ui-tabs-aria-controls");a?b.attr("aria-controls",a):b.removeAttr("aria-controls")}),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(a){var b=this.options.disabled;if(b===!1){return}a===h?b=!1:(a=this._getIndex(a),l.isArray(b)?b=l.map(b,function(c){return c!==a?c:null}):b=l.map(this.tabs,function(c,d){return d!==a?d:null})),this._setupDisabled(b)},disable:function(a){var b=this.options.disabled;if(b===!0){return}if(a===h){b=!0}else{a=this._getIndex(a);if(l.inArray(a,b)!==-1){return}l.isArray(b)?b=l.merge([a],b).sort():b=[a]}this._setupDisabled(b)},load:function(c,o){c=this._getIndex(c);var b=this,d=this.tabs.eq(c),a=d.find(".ui-tabs-anchor"),f=this._getPanelForTab(d),g={tab:d,panel:f};if(n(a[0])){return}this.xhr=l.ajax(this._ajaxSettings(a,o,g)),this.xhr&&this.xhr.statusText!=="canceled"&&(d.addClass("ui-tabs-loading"),f.attr("aria-busy","true"),this.xhr.success(function(p){setTimeout(function(){f.html(p),b._trigger("load",o,g)},1)}).complete(function(q,p){setTimeout(function(){p==="abort"&&b.panels.stop(!1,!0),d.removeClass("ui-tabs-loading"),f.removeAttr("aria-busy"),q===b.xhr&&delete b.xhr},1)}))},_ajaxSettings:function(c,a,b){var d=this;return{url:c.attr("href"),beforeSend:function(g,f){return d._trigger("beforeLoad",a,l.extend({jqXHR:g,ajaxSettings:f},b))}}},_getPanelForTab:function(b){var a=l(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+a))}}),l.uiBackCompat!==!1&&(l.ui.tabs.prototype._ui=function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},l.widget("ui.tabs",l.ui.tabs,{url:function(a,b){this.anchors.eq(a).attr("href",b)}}),l.widget("ui.tabs",l.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var a=this;this._on({tabsbeforeload:function(b,c){if(l.data(c.tab[0],"cache.tabs")){b.preventDefault();return}c.jqXHR.success(function(){a.options.cache&&l.data(c.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(c,a,b){var d=this.options.ajaxOptions;return l.extend({},d,{error:function(g,o){try{d.error(g,o,b.tab.closest("li").index(),b.tab[0])}catch(f){}}},this._superApply(arguments))},_setOption:function(a,b){a==="cache"&&b===!1&&this.anchors.removeData("cache.tabs"),this._super(a,b)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(a){this.anchors.eq(a).removeData("cache.tabs"),this._superApply(arguments)}}),l.widget("ui.tabs",l.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),l.widget("ui.tabs",l.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(b,d){if(b.target!==this.element[0]||!this.options.spinner){return}var a=d.tab.find("span"),c=a.html();a.html(this.options.spinner),d.jqXHR.complete(function(){a.html(c)})}})}}),l.widget("ui.tabs",l.ui.tabs,{options:{enable:null,disable:null},enable:function(c){var a=this.options,b;if(c&&a.disabled===!0||l.isArray(a.disabled)&&l.inArray(c,a.disabled)!==-1){b=!0}this._superApply(arguments),b&&this._trigger("enable",null,this._ui(this.anchors[c],this.panels[c]))},disable:function(c){var a=this.options,b;if(c&&a.disabled===!1||l.isArray(a.disabled)&&l.inArray(c,a.disabled)===-1){b=!0}this._superApply(arguments),b&&this._trigger("disable",null,this._ui(this.anchors[c],this.panels[c]))}}),l.widget("ui.tabs",l.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(g,b,d){d===h&&(d=this.anchors.length);var c,r,f=this.options,o=l(f.tabTemplate.replace(/#\{href\}/g,g).replace(/#\{label\}/g,b)),a=g.indexOf("#")?this._tabId(o):g.replace("#","");return o.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),o.attr("aria-controls",a),c=d>=this.tabs.length,r=this.element.find("#"+a),r.length||(r=this._createPanel(a),c?d>0?r.insertAfter(this.panels.eq(-1)):r.appendTo(this.element):r.insertBefore(this.panels[d])),r.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),c?o.appendTo(this.tablist):o.insertBefore(this.tabs[d]),f.disabled=l.map(f.disabled,function(p){return p>=d?++p:p}),this.refresh(),this.tabs.length===1&&f.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[d],this.panels[d])),this},remove:function(c){c=this._getIndex(c);var a=this.options,b=this.tabs.eq(c).remove(),d=this._getPanelForTab(b).remove();return b.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(c+(c+1<this.anchors.length?1:-1)),a.disabled=l.map(l.grep(a.disabled,function(f){return f!==c}),function(f){return f>=c?--f:f}),this.refresh(),this._trigger("remove",null,this._ui(b.find("a")[0],d[0])),this}}),l.widget("ui.tabs",l.ui.tabs,{length:function(){return this.anchors.length}}),l.widget("ui.tabs",l.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(b){var a=b.is("li")?b.find("a[href]"):b;return a=a[0],l(a).closest("li").attr("aria-controls")||a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+j()}}),l.widget("ui.tabs",l.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(a){return l(this.options.panelTemplate).attr("id",a).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),l.widget("ui.tabs",l.ui.tabs,{_create:function(){var a=this.options;a.active===null&&a.selected!==h&&(a.active=a.selected===-1?!1:a.selected),this._super(),a.selected=a.active,a.selected===!1&&(a.selected=-1)},_setOption:function(b,c){if(b!=="selected"){return this._super(b,c)}var a=this.options;this._super("active",c===-1?!1:c),a.selected=a.active,a.selected===!1&&(a.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),l.widget("ui.tabs",l.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(b,d,a){var c=this._superApply(arguments);return c?(b==="beforeActivate"&&a.newTab.length?c=this._super("select",d,{tab:a.newTab.find(".ui-tabs-anchor")[0],panel:a.newPanel[0],index:a.newTab.closest("li").index()}):b==="activate"&&a.newTab.length&&(c=this._super("show",d,{tab:a.newTab.find(".ui-tabs-anchor")[0],panel:a.newPanel[0],index:a.newTab.closest("li").index()})),c):!1}}),l.widget("ui.tabs",l.ui.tabs,{select:function(a){a=this._getIndex(a);if(a===-1){if(!this.options.collapsible||this.options.selected===-1){return}a=this.options.selected}this.anchors.eq(a).trigger(this.options.event+this.eventNamespace)}}),function(){var a=0;l.widget("ui.tabs",l.ui.tabs,{options:{cookie:null},_create:function(){var b=this.options,c;b.active==null&&b.cookie&&(c=parseInt(this._cookie(),10),c===-1&&(c=!1),b.active=c),this._super()},_cookie:function(b){var c=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++a)];return arguments.length&&(c.push(b===!1?-1:b),c.push(this.options.cookie)),l.cookie.apply(null,c)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),l.widget("ui.tabs",l.ui.tabs,{_trigger:function(c,a,b){var d=l.extend({},b);return c==="load"&&(d.panel=d.panel[0],d.tab=d.tab.find(".ui-tabs-anchor")[0]),this._super(c,a,d)}}),l.widget("ui.tabs",l.ui.tabs,{options:{fx:null},_getFx:function(){var c,a,b=this.options.fx;return b&&(l.isArray(b)?(c=b[0],a=b[1]):c=a=b),b?{show:a,hide:c}:null},_toggle:function(r,d){function o(){c.running=!1,c._trigger("activate",r,d)}function g(){d.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&b.show?a.animate(b.show,b.show.duration,function(){o()}):(a.show(),o())}var c=this,a=d.newPanel,f=d.oldPanel,b=this._getFx();if(!b){return this._super(r,d)}c.running=!0,f.length&&b.hide?f.animate(b.hide,b.hide.duration,function(){d.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),g()}):(d.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),f.hide(),g())}}))})(jQuery);(function(j){function h(c,a){var b=(c.attr("aria-describedby")||"").split(/\s+/);b.push(a),c.data("ui-tooltip-id",a).attr("aria-describedby",j.trim(b.join(" ")))}function f(c){var a=c.data("ui-tooltip-id"),b=(c.attr("aria-describedby")||"").split(/\s+/),d=j.inArray(a,b);d!==-1&&b.splice(d,1),c.removeData("ui-tooltip-id"),b=j.trim(b.join(" ")),b?c.attr("aria-describedby",b):c.removeAttr("aria-describedby")}var g=0;j.widget("ui.tooltip",{version:"1.9.1",options:{content:function(){return j(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flipfit"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(c,a){var b=this;if(c==="disabled"){this[a?"_disable":"_enable"](),this.options[c]=a;return}this._super(c,a),c==="content"&&j.each(this.tooltips,function(d,k){b._updateContent(k)})},_disable:function(){var a=this;j.each(this.tooltips,function(b,c){var d=j.Event("blur");d.target=d.currentTarget=c[0],a.close(d,!0)}),this.element.find(this.options.items).andSelf().each(function(){var b=j(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var a=j(this);a.data("ui-tooltip-title")&&a.attr("title",a.data("ui-tooltip-title"))})},open:function(c){var a=this,b=j(c?c.target:this.element).closest(this.options.items);if(!b.length){return}if(this.options.track&&b.data("ui-tooltip-id")){this._find(b).position(j.extend({of:b},this.options.position)),this._off(this.document,"mousemove");return}b.attr("title")&&b.data("ui-tooltip-title",b.attr("title")),b.data("tooltip-open",!0),c&&c.type==="mouseover"&&b.parents().each(function(){var d;j(this).data("tooltip-open")&&(d=j.Event("blur"),d.target=d.currentTarget=this,a.close(d,!0)),this.title&&(j(this).uniqueId(),a.parents[this.id]={element:this,title:this.title},this.title="")}),this._updateContent(b,c)},_updateContent:function(b,d){var a,c=this.options.content,l=this;if(typeof c=="string"){return this._open(d,b,c)}a=c.call(b[0],function(k){if(!b.data("tooltip-open")){return}l._delay(function(){this._open(d,b,k)})}),a&&this._open(d,b,a)},_open:function(d,b,o){function a(k){q.of=k;if(c.is(":hidden")){return}c.position(q)}var c,r,p,q=j.extend({},this.options.position);if(!o){return}c=this._find(b);if(c.length){c.find(".ui-tooltip-content").html(o);return}b.is("[title]")&&(d&&d.type==="mouseover"?b.attr("title",""):b.removeAttr("title")),c=this._tooltip(b),h(b,c.attr("id")),c.find(".ui-tooltip-content").html(o),this.options.track&&d&&/^mouse/.test(d.originalEvent.type)?(this._on(this.document,{mousemove:a}),a(d)):c.position(j.extend({of:b},this.options.position)),c.hide(),this._show(c,this.options.show),this.options.show&&this.options.show.delay&&(p=setInterval(function(){c.is(":visible")&&(a(q.of),clearInterval(p))},j.fx.interval)),this._trigger("open",d,{tooltip:c}),r={keyup:function(l){if(l.keyCode===j.ui.keyCode.ESCAPE){var k=j.Event(l);k.currentTarget=b[0],this.close(k,!0)}},remove:function(){this._removeTooltip(c)}};if(!d||d.type==="mouseover"){r.mouseleave="close"}if(!d||d.type==="focusin"){r.focusout="close"}this._on(b,r)},close:function(c){var a=this,d=j(c?c.currentTarget:this.element),b=this._find(d);if(this.closing){return}d.data("ui-tooltip-title")&&d.attr("title",d.data("ui-tooltip-title")),f(d),b.stop(!0),this._hide(b,this.options.hide,function(){a._removeTooltip(j(this))}),d.removeData("tooltip-open"),this._off(d,"mouseleave focusout keyup"),d[0]!==this.element[0]&&this._off(d,"remove"),this._off(this.document,"mousemove"),c&&c.type==="mouseleave"&&j.each(this.parents,function(k,l){l.element.title=l.title,delete a.parents[k]}),this.closing=!0,this._trigger("close",c,{tooltip:b}),this.closing=!1},_tooltip:function(a){var b="ui-tooltip-"+g++,c=j("<div>").attr({id:b,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return j("<div>").addClass("ui-tooltip-content").appendTo(c),c.appendTo(this.document[0].body),j.fn.bgiframe&&c.bgiframe(),this.tooltips[b]=a,c},_find:function(b){var a=b.data("ui-tooltip-id");return a?j("#"+a):j()},_removeTooltip:function(a){a.remove(),delete this.tooltips[a.attr("id")]},_destroy:function(){var a=this;j.each(this.tooltips,function(b,c){var d=j.Event("blur");d.target=d.currentTarget=c[0],a.close(d,!0),j("#"+b).remove(),c.data("ui-tooltip-title")&&(c.attr("title",c.data("ui-tooltip-title")),c.removeData("ui-tooltip-title"))})}})})(jQuery);jQuery.effects||function(j,g){var h=j.uiBackCompat!==!1,f="ui-effects-";j.effects={effect:{}},function(a,o){function r(m,w,k){var q=l[w.type]||{};return m==null?k||!w.def?null:w.def:(m=q.floor?~~m:parseFloat(m),isNaN(m)?w.def:q.mod?(m+q.mod)%q.mod:0>m?0:q.max<m?q.max:m)}function u(m){var k=p(),q=k._rgba=[];return m=m.toLowerCase(),F(G,function(A,B){var z,x=B.re.exec(m),w=x&&B.parse(x),y=B.space||"rgba";if(w){return z=k[y](w),k[b[y].cache]=z[b[y].cache],q=k._rgba=z._rgba,!1}}),q.length?(q.join()==="0,0,0,0"&&a.extend(q,t.transparent),k):t[m]}function d(m,q,k){return k=(k+1)%1,k*6<1?m+(q-m)*k*6:k*2<1?q:k*3<2?m+(q-m)*(2/3-k)*6:m}var s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),c=/^([\-+])=\s*(\d+\.?\d*)/,G=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(k){return[k[1],k[2],k[3],k[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(k){return[k[1]*2.55,k[2]*2.55,k[3]*2.55,k[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(k){return[parseInt(k[1],16),parseInt(k[2],16),parseInt(k[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(k){return[parseInt(k[1]+k[1],16),parseInt(k[2]+k[2],16),parseInt(k[3]+k[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(k){return[k[1],k[2]/100,k[3]/100,k[4]]}}],p=a.Color=function(k,w,m,q){return new a.Color.fn.parse(k,w,m,q)},b={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},v=p.support={},n=a("<p>")[0],t,F=a.each;n.style.cssText="background-color:rgba(1,1,1,.5)",v.rgba=n.style.backgroundColor.indexOf("rgba")>-1,F(b,function(k,m){m.cache="_"+k,m.props.alpha={idx:3,type:"percent",def:1}}),p.fn=a.extend(p.prototype,{parse:function(k,x,m,z){if(k===o){return this._rgba=[null,null,null,null],this}if(k.jquery||k.nodeType){k=a(k).css(x),x=o}var w=this,q=a.type(k),y=this._rgba=[];x!==o&&(k=[k,x,m,z],q="array");if(q==="string"){return this.parse(u(k)||t._default)}if(q==="array"){return F(b.rgba.props,function(A,B){y[B.idx]=r(k[B.idx],B)}),this}if(q==="object"){return k instanceof p?F(b,function(A,B){k[B.cache]&&(w[B.cache]=k[B.cache].slice())}):F(b,function(A,B){var C=B.cache;F(B.props,function(E,D){if(!w[C]&&B.to){if(E==="alpha"||k[E]==null){return}w[C]=B.to(w._rgba)}w[C][D.idx]=r(k[E],D,!0)}),w[C]&&j.inArray(null,w[C].slice(0,3))<0&&(w[C][3]=1,B.from&&(w._rgba=B.from(w[C])))}),this}},is:function(m){var w=p(m),k=!0,q=this;return F(b,function(y,A){var z,x=w[A.cache];return x&&(z=q[A.cache]||A.to&&A.to(q._rgba)||[],F(A.props,function(B,C){if(x[C.idx]!=null){return k=x[C.idx]===z[C.idx],k}})),k}),k},_space:function(){var k=[],m=this;return F(b,function(q,w){m[w.cache]&&k.push(q)}),k.pop()},transition:function(x,z){var q=p(x),k=q._space(),A=b[k],m=this.alpha()===0?p("transparent"):this,y=m[A.cache]||A.to(m._rgba),w=y.slice();return q=q[A.cache],F(A.props,function(D,E){var B=E.idx,L=y[B],C=q[B],H=l[E.type]||{};if(C===null){return}L===null?w[B]=C:(H.mod&&(C-L>H.mod/2?L+=H.mod:L-C>H.mod/2&&(L-=H.mod)),w[B]=r((C-L)*z+L,E))}),this[k](w)},blend:function(k){if(this._rgba[3]===1){return this}var w=this._rgba.slice(),m=w.pop(),q=p(k)._rgba;return p(a.map(w,function(y,x){return(1-m)*q[x]+m*y}))},toRgbaString:function(){var m="rgba(",k=a.map(this._rgba,function(q,w){return q==null?w>2?1:0:q});return k[3]===1&&(k.pop(),m="rgb("),m+k.join()+")"},toHslaString:function(){var m="hsla(",k=a.map(this.hsla(),function(q,w){return q==null&&(q=w>2?1:0),w&&w<3&&(q=Math.round(q*100)+"%"),q});return k[3]===1&&(k.pop(),m="hsl("),m+k.join()+")"},toHexString:function(m){var k=this._rgba.slice(),q=k.pop();return m&&k.push(~~(q*255)),"#"+a.map(k,function(w){return w=(w||0).toString(16),w.length===1?"0"+w:w}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),p.fn.parse.prototype=p.fn,b.hsla.to=function(A){if(A[0]==null||A[1]==null||A[2]==null){return[null,null,null,A[3]]}var w=A[0]/255,C=A[1]/255,m=A[2]/255,D=A[3],q=Math.max(w,C,m),k=Math.min(w,C,m),x=q-k,y=q+k,B=y*0.5,E,z;return k===q?E=0:w===q?E=60*(C-m)/x+360:C===q?E=60*(m-w)/x+120:E=60*(w-C)/x+240,B===0||B===1?z=B:B<=0.5?z=x/y:z=x/(2-y),[Math.round(E)%360,z,B,D==null?1:D]},b.hsla.from=function(q){if(q[0]==null||q[1]==null||q[2]==null){return[null,null,null,q[3]]}var w=q[0]/360,x=q[1],z=q[2],y=q[3],k=z<=0.5?z*(1+x):z+x-z*x,m=2*z-k;return[Math.round(d(m,k,w+1/3)*255),Math.round(d(m,k,w)*255),Math.round(d(m,k,w-1/3)*255),y]},F(b,function(w,y){var k=y.props,m=y.cache,q=y.to,x=y.from;p.fn[w]=function(A){q&&!this[m]&&(this[m]=q(this._rgba));if(A===o){return this[m].slice()}var B,C=a.type(A),D=C==="array"||C==="object"?A:arguments,z=this[m].slice();return F(k,function(I,H){var E=D[C==="object"?I:H.idx];E==null&&(E=z[H.idx]),z[H.idx]=r(E,H)}),x?(B=p(x(z)),B[m]=z,B):p(z)},F(k,function(z,A){if(p.fn[z]){return}p.fn[z]=function(J){var D=a.type(J),B=z==="alpha"?this._hsla?"hsla":"rgba":w,C=this[B](),E=C[A.idx],I;return D==="undefined"?E:(D==="function"&&(J=J.call(this,E),D=a.type(J)),J==null&&A.empty?this:(D==="string"&&(I=c.exec(J),I&&(J=E+parseFloat(I[2])*(I[1]==="+"?1:-1))),C[A.idx]=J,this[B](C)))}})}),F(s,function(m,k){a.cssHooks[k]={set:function(x,y){var w,q,z="";if(a.type(y)!=="string"||(w=u(y))){y=p(w||y);if(!v.rgba&&y._rgba[3]!==1){q=k==="backgroundColor"?x.parentNode:x;while((z===""||z==="transparent")&&q&&q.style){try{z=a.css(q,"backgroundColor"),q=q.parentNode}catch(A){}}y=y.blend(z&&z!=="transparent"?z:"_default")}y=y.toRgbaString()}try{x.style[k]=y}catch(B){}}},a.fx.step[k]=function(q){q.colorInit||(q.start=p(q.elem,k),q.end=p(q.end),q.colorInit=!0),a.cssHooks[k].set(q.elem,q.start.transition(q.end,q.pos))}}),a.cssHooks.borderColor={expand:function(k){var m={};return F(["Top","Right","Bottom","Left"],function(q,w){m["border"+w+"Color"]=k}),m}},t=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function d(){var p=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,n={},o,q;if(p&&p.length&&p[0]&&p[p[0]]){q=p.length;while(q--){o=p[q],typeof p[o]=="string"&&(n[j.camelCase(o)]=p[o])}}else{for(o in p){typeof p[o]=="string"&&(n[o]=p[o])}}return n}function c(q,s){var r={},o,n;for(o in s){n=s[o],q[o]!==n&&!b[o]&&(j.fx.step[o]||!isNaN(parseFloat(n)))&&(r[o]=n)}return r}var a=["add","remove","toggle"],b={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};j.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(l,k){j.fx.step[k]=function(m){if(m.end!=="none"&&!m.setAttr||m.pos===1&&!m.setAttr){jQuery.style(m.elem,k,m.end),m.setAttr=!0}}}),j.effects.animateClass=function(p,o,n,q){var r=j.speed(o,n,q);return this.queue(function(){var m=j(this),k=m.attr("class")||"",t,l=r.children?m.find("*").andSelf():m;l=l.map(function(){var s=j(this);return{el:s,start:d.call(this)}}),t=function(){j.each(a,function(u,s){p[s]&&m[s+"Class"](p[s])})},t(),l=l.map(function(){return this.end=d.call(this.el[0]),this.diff=c(this.start,this.end),this}),m.attr("class",k),l=l.map(function(){var x=this,s=j.Deferred(),w=jQuery.extend({},r,{queue:!1,complete:function(){s.resolve(x)}});return this.el.animate(this.diff,w),s.promise()}),j.when.apply(j,l.get()).done(function(){t(),j.each(arguments,function(){var s=this.el;j.each(this.diff,function(u){s.css(u,"")})}),r.complete.call(m[0])})})},j.fn.extend({_addClass:j.fn.addClass,addClass:function(p,n,o,q){return n?j.effects.animateClass.call(this,{add:p},n,o,q):this._addClass(p)},_removeClass:j.fn.removeClass,removeClass:function(p,n,o,q){return n?j.effects.animateClass.call(this,{remove:p},n,o,q):this._removeClass(p)},_toggleClass:j.fn.toggleClass,toggleClass:function(s,o,r,q,n){return typeof o=="boolean"||o===g?r?j.effects.animateClass.call(this,o?{add:s}:{remove:s},r,q,n):this._toggleClass(s,o):j.effects.animateClass.call(this,{toggle:s},o,r,q)},switchClass:function(q,s,n,r,p){return j.effects.animateClass.call(this,{add:s,remove:q},n,r,p)}})}(),function(){function b(l,c,d,m){j.isPlainObject(l)&&(c=l,l=l.effect),l={effect:l},c==null&&(c={}),j.isFunction(c)&&(m=c,d=null,c={});if(typeof c=="number"||j.fx.speeds[c]){m=d,d=c,c={}}return j.isFunction(d)&&(m=d,d=null),c&&j.extend(l,c),d=d||c.duration,l.duration=j.fx.off?0:typeof d=="number"?d:d in j.fx.speeds?j.fx.speeds[d]:j.fx.speeds._default,l.complete=m||c.complete,l}function a(c){return !c||typeof c=="number"||j.fx.speeds[c]?!0:typeof c=="string"&&!j.effects.effect[c]?h&&j.effects[c]?!1:!0:!1}j.extend(j.effects,{version:"1.9.1",save:function(d,k){for(var c=0;c<k.length;c++){k[c]!==null&&d.data(f+k[c],d[0].style[k[c]])}},restore:function(d,c){var m,l;for(l=0;l<c.length;l++){c[l]!==null&&(m=d.data(f+c[l]),m===g&&(m=""),d.css(c[l],m))}},setMode:function(c,d){return d==="toggle"&&(d=c.is(":hidden")?"show":"hide"),d},getBaseline:function(d,l){var c,k;switch(d[0]){case"top":c=0;break;case"middle":c=0.5;break;case"bottom":c=1;break;default:c=d[0]/l.height}switch(d[1]){case"left":k=0;break;case"center":k=0.5;break;case"right":k=1;break;default:k=d[1]/l.width}return{x:k,y:c}},createWrapper:function(p){if(p.parent().is(".ui-effects-wrapper")){return p.parent()}var c={width:p.outerWidth(!0),height:p.outerHeight(!0),"float":p.css("float")},n=j("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),q={width:p.width(),height:p.height()},o=document.activeElement;try{o.id}catch(d){o=document.body}return p.wrap(n),(p[0]===o||j.contains(p[0],o))&&j(o).focus(),n=p.parent(),p.css("position")==="static"?(n.css({position:"relative"}),p.css({position:"relative"})):(j.extend(c,{position:p.css("position"),zIndex:p.css("z-index")}),j.each(["top","left","bottom","right"],function(l,k){c[k]=p.css(k),isNaN(parseInt(c[k],10))&&(c[k]="auto")}),p.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),p.css(q),n.css(c).show()},removeWrapper:function(d){var c=document.activeElement;return d.parent().is(".ui-effects-wrapper")&&(d.parent().replaceWith(d),(d[0]===c||j.contains(d[0],c))&&j(c).focus()),d},setTransition:function(l,c,d,m){return m=m||{},j.each(c,function(n,k){var o=l.cssUnit(k);o[0]>0&&(m[k]=o[0]*d+o[1])}),m}}),j.fn.extend({effect:function(){function p(l){function k(){j.isFunction(u)&&u.call(r[0]),j.isFunction(l)&&l()}var r=j(this),u=n.complete,s=n.mode;(r.is(":hidden")?s==="hide":s==="show")?k():c.call(r[0],n,k)}var n=b.apply(this,arguments),d=n.mode,m=n.queue,c=j.effects.effect[n.effect],o=!c&&h&&j.effects[n.effect];return j.fx.off||!c&&!o?d?this[d](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):c?m===!1?this.each(p):this.queue(m||"fx",p):o.call(this,{options:n,duration:n.duration,callback:n.complete,mode:n.mode})},_show:j.fn.show,show:function(c){if(a(c)){return this._show.apply(this,arguments)}var d=b.apply(this,arguments);return d.mode="show",this.effect.call(this,d)},_hide:j.fn.hide,hide:function(c){if(a(c)){return this._hide.apply(this,arguments)}var d=b.apply(this,arguments);return d.mode="hide",this.effect.call(this,d)},__toggle:j.fn.toggle,toggle:function(d){if(a(d)||typeof d=="boolean"||j.isFunction(d)){return this.__toggle.apply(this,arguments)}var c=b.apply(this,arguments);return c.mode="toggle",this.effect.call(this,c)},cssUnit:function(k){var c=this.css(k),d=[];return j.each(["em","px","%","pt"],function(l,m){c.indexOf(m)>0&&(d=[parseFloat(c),m])}),d}})}(),function(){var a={};j.each(["Quad","Cubic","Quart","Quint","Expo"],function(c,b){a[b]=function(d){return Math.pow(d,c+2)}}),j.extend(a,{Sine:function(b){return 1-Math.cos(b*Math.PI/2)},Circ:function(b){return 1-Math.sqrt(1-b*b)},Elastic:function(b){return b===0||b===1?b:-Math.pow(2,8*(b-1))*Math.sin(((b-1)*80-7.5)*Math.PI/15)},Back:function(b){return b*b*(3*b-2)},Bounce:function(c){var d,b=4;while(c<((d=Math.pow(2,--b))-1)/11){}return 1/Math.pow(4,3-b)-7.5625*Math.pow((d*3-2)/22-c,2)}}),j.each(a,function(c,b){j.easing["easeIn"+c]=b,j.easing["easeOut"+c]=function(d){return 1-b(1-d)},j.easing["easeInOut"+c]=function(d){return d<0.5?b(d*2)/2:1-b(d*-2+2)/2}})}()}(jQuery);(function(j,g){var h=/up|down|vertical/,f=/up|left|vertical|horizontal/;j.effects.effect.blind=function(b,d){var H=j(this),s=["position","top","bottom","left","right","height","width"],c=j.effects.setMode(H,b.mode||"hide"),m=b.direction||"up",F=h.test(m),o=F?"height":"width",u=F?"top":"left",a=f.test(m),t={},v=c==="show",l,p,G;H.parent().is(".ui-effects-wrapper")?j.effects.save(H.parent(),s):j.effects.save(H,s),H.show(),l=j.effects.createWrapper(H).css({overflow:"hidden"}),p=l[o](),G=parseFloat(l.css(u))||0,t[o]=v?p:0,a||(H.css(F?"bottom":"right",0).css(F?"top":"left","auto").css({position:"absolute"}),t[u]=v?G:p+G),v&&(l.css(o,0),a||l.css(u,G+p)),l.animate(t,{duration:b.duration,easing:b.easing,queue:!1,complete:function(){c==="hide"&&H.hide(),j.effects.restore(H,s),j.effects.removeWrapper(H),d()}})}})(jQuery);(function(c,d){c.effects.effect.bounce=function(n,t){var y=c(this),p=["position","top","bottom","left","right","height","width"],h=c.effects.setMode(y,n.mode||"effect"),u=h==="hide",w=h==="show",a=n.direction||"up",l=n.distance,r=n.times||5,f=r*2+(w||u?1:0),o=n.duration/f,v=n.easing,g=a==="up"||a==="down"?"top":"left",P=a==="up"||a==="left",s,m,R,b=y.queue(),Q=b.length;(w||u)&&p.push("opacity"),c.effects.save(y,p),y.show(),c.effects.createWrapper(y),l||(l=y[g==="top"?"outerHeight":"outerWidth"]()/3),w&&(R={opacity:1},R[g]=0,y.css("opacity",0).css(g,P?-l*2:l*2).animate(R,o,v)),u&&(l/=Math.pow(2,r-1)),R={},R[g]=0;for(s=0;s<r;s++){m={},m[g]=(P?"-=":"+=")+l,y.animate(m,o,v).animate(R,o,v),l=u?l*2:l/2}u&&(m={opacity:0},m[g]=(P?"-=":"+=")+l,y.animate(m,o,v)),y.queue(function(){u&&y.hide(),c.effects.restore(y,p),c.effects.removeWrapper(y),t()}),Q>1&&b.splice.apply(b,[1,0].concat(b.splice(Q,f+1))),y.dequeue()}})(jQuery);(function(c,d){c.effects.effect.clip=function(f,n){var r=c(this),b=["position","top","bottom","left","right","height","width"],a=c.effects.setMode(r,f.mode||"hide"),o=a==="show",h=f.direction||"vertical",s=h==="vertical",D=s?"height":"width",l=s?"top":"left",t={},E,p,u;c.effects.save(r,b),r.show(),E=c.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?E:r,u=p[D](),o&&(p.css(D,0),p.css(l,u/2)),t[D]=o?u:0,t[l]=o?0:u/2,p.animate(t,{queue:!1,duration:f.duration,easing:f.easing,complete:function(){o||r.hide(),c.effects.restore(r,b),c.effects.removeWrapper(r),n()}})}})(jQuery);(function(c,d){c.effects.effect.drop=function(x,r){var t=c(this),n=["position","top","bottom","left","right","opacity","height","width"],u=c.effects.setMode(t,x.mode||"hide"),s=u==="show",a=x.direction||"left",b=a==="up"||a==="down"?"top":"left",l=a==="up"||a==="left"?"pos":"neg",o={opacity:s?1:0},f;c.effects.save(t,n),t.show(),c.effects.createWrapper(t),f=x.distance||t[b==="top"?"outerHeight":"outerWidth"](!0)/2,s&&t.css("opacity",0).css(b,l==="pos"?-f:f),o[b]=(s?l==="pos"?"+=":"-=":l==="pos"?"-=":"+=")+f,t.animate(o,{queue:!1,duration:x.duration,easing:x.easing,complete:function(){u==="hide"&&t.hide(),c.effects.restore(t,n),c.effects.removeWrapper(t),r()}})}})(jQuery);(function(c,d){c.effects.effect.explode=function(v,u){function P(){g.push(this),g.length===l*r&&b()}function b(){n.css({visibility:"visible"}),c(g).remove(),N||n.hide(),u()}var l=v.pieces?Math.round(Math.sqrt(v.pieces)):3,r=l,n=c(this),y=c.effects.setMode(n,v.mode||"hide"),N=y==="show",a=n.show().css("visibility","hidden").offset(),m=Math.ceil(n.outerWidth()/r),s=Math.ceil(n.outerHeight()/l),g=[],p,f,h,O,t,o;for(p=0;p<l;p++){O=a.top+p*s,o=p-(l-1)/2;for(f=0;f<r;f++){h=a.left+f*m,t=f-(r-1)/2,n.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-f*m,top:-p*s}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:m,height:s,left:h+(N?t*m:0),top:O+(N?o*s:0),opacity:N?0:1}).animate({left:h+(N?0:t*m),top:O+(N?0:o*s),opacity:N?1:0},v.duration||500,v.easing,P)}}}})(jQuery);(function(c,d){c.effects.effect.fade=function(g,a){var b=c(this),h=c.effects.setMode(b,g.mode||"toggle");b.animate({opacity:h},{queue:!1,duration:g.duration,easing:g.easing,complete:a})}})(jQuery);(function(c,d){c.effects.effect.fold=function(u,f){var n=c(this),p=["position","top","bottom","left","right","height","width"],t=c.effects.setMode(n,u.mode||"hide"),l=t==="show",v=t==="hide",L=u.size||15,g=/([0-9]+)%/.exec(L),r=!!u.horizFirst,a=l!==r,o=a?["width","height"]:["height","width"],m=u.duration/2,b,J,s={},h={};c.effects.save(n,p),n.show(),b=c.effects.createWrapper(n).css({overflow:"hidden"}),J=a?[b.width(),b.height()]:[b.height(),b.width()],g&&(L=parseInt(g[1],10)/100*J[v?0:1]),l&&b.css(r?{height:0,width:L}:{height:L,width:0}),s[o[0]]=l?J[0]:L,h[o[1]]=l?J[1]:0,b.animate(s,m,u.easing).animate(h,m,u.easing,function(){v&&n.hide(),c.effects.restore(n,p),c.effects.removeWrapper(n),f()})}})(jQuery);(function(c,d){c.effects.effect.highlight=function(l,a){var j=c(this),m=["backgroundImage","backgroundColor","opacity"],k=c.effects.setMode(j,l.mode||"show"),b={backgroundColor:j.css("backgroundColor")};k==="hide"&&(b.opacity=0),c.effects.save(j,m),j.show().css({backgroundImage:"none",backgroundColor:l.color||"#ffff99"}).animate(b,{queue:!1,duration:l.duration,easing:l.easing,complete:function(){k==="hide"&&j.hide(),c.effects.restore(j,m),a()}})}})(jQuery);(function(c,d){c.effects.effect.pulsate=function(r,l){var p=c(this),f=c.effects.setMode(p,r.mode||"show"),b=f==="show",n=f==="hide",s=b||f==="hide",t=(r.times||5)*2+(s?1:0),B=r.duration/t,h=0,u=p.queue(),a=u.length,o;if(b||!p.is(":visible")){p.css("opacity",0).show(),h=1}for(o=1;o<t;o++){p.animate({opacity:h},B,r.easing),h=1-h}p.animate({opacity:h},B,r.easing),p.queue(function(){n&&p.hide(),l()}),a>1&&u.splice.apply(u,[1,0].concat(u.splice(a,t+1))),p.dequeue()}})(jQuery);(function(c,d){c.effects.effect.puff=function(n,a){var l=c(this),o=c.effects.setMode(l,n.mode||"hide"),m=o==="hide",b=parseInt(n.percent,10)||150,p=b/100,q={height:l.height(),width:l.width()};c.extend(n,{effect:"scale",queue:!1,fade:!0,mode:o,complete:a,percent:m?b:100,from:m?q:{height:q.height*p,width:q.width*p}}),l.effect(n)},c.effects.effect.scale=function(b,s){var u=c(this),o=c.extend(!0,{},b),a=c.effects.setMode(u,b.mode||"effect"),t=parseInt(b.percent,10)||(parseInt(b.percent,10)===0?0:a==="hide"?0:100),f=b.direction||"both",l=b.origin,n={height:u.height(),width:u.width(),outerHeight:u.outerHeight(),outerWidth:u.outerWidth()},r={y:f!=="horizontal"?t/100:1,x:f!=="vertical"?t/100:1};o.effect="size",o.queue=!1,o.complete=s,a!=="effect"&&(o.origin=l||["middle","center"],o.restore=!0),o.from=b.from||(a==="show"?{height:0,width:0}:n),o.to={height:n.height*r.y,width:n.width*r.x,outerHeight:n.outerHeight*r.y,outerWidth:n.outerWidth*r.x},o.fade&&(a==="show"&&(o.from.opacity=0,o.to.opacity=1),a==="hide"&&(o.from.opacity=1,o.to.opacity=0)),u.effect(o)},c.effects.effect.size=function(v,u){var l,r,n,y=c(this),N=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],m=["width","height","overflow"],s=["fontSize"],g=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],p=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],f=c.effects.setMode(y,v.mode||"effect"),h=v.restore||f!=="effect",O=v.scale||"both",t=v.origin||["middle","center"],o=y.css("position"),P=h?N:a,b={height:0,width:0};f==="show"&&y.show(),l={height:y.height(),width:y.width(),outerHeight:y.outerHeight(),outerWidth:y.outerWidth()},v.mode==="toggle"&&f==="show"?(y.from=v.to||b,y.to=v.from||l):(y.from=v.from||(f==="show"?b:l),y.to=v.to||(f==="hide"?b:l)),n={from:{y:y.from.height/l.height,x:y.from.width/l.width},to:{y:y.to.height/l.height,x:y.to.width/l.width}};if(O==="box"||O==="both"){n.from.y!==n.to.y&&(P=P.concat(g),y.from=c.effects.setTransition(y,g,n.from.y,y.from),y.to=c.effects.setTransition(y,g,n.to.y,y.to)),n.from.x!==n.to.x&&(P=P.concat(p),y.from=c.effects.setTransition(y,p,n.from.x,y.from),y.to=c.effects.setTransition(y,p,n.to.x,y.to))}(O==="content"||O==="both")&&n.from.y!==n.to.y&&(P=P.concat(s).concat(m),y.from=c.effects.setTransition(y,s,n.from.y,y.from),y.to=c.effects.setTransition(y,s,n.to.y,y.to)),c.effects.save(y,P),y.show(),c.effects.createWrapper(y),y.css("overflow","hidden").css(y.from),t&&(r=c.effects.getBaseline(t,l),y.from.top=(l.outerHeight-y.outerHeight())*r.y,y.from.left=(l.outerWidth-y.outerWidth())*r.x,y.to.top=(l.outerHeight-y.to.outerHeight)*r.y,y.to.left=(l.outerWidth-y.to.outerWidth)*r.x),y.css(y.from);if(O==="content"||O==="both"){g=g.concat(["marginTop","marginBottom"]).concat(s),p=p.concat(["marginLeft","marginRight"]),m=N.concat(g).concat(p),y.find("*[width]").each(function(){var j=c(this),k={height:j.height(),width:j.width()};h&&c.effects.save(j,m),j.from={height:k.height*n.from.y,width:k.width*n.from.x},j.to={height:k.height*n.to.y,width:k.width*n.to.x},n.from.y!==n.to.y&&(j.from=c.effects.setTransition(j,g,n.from.y,j.from),j.to=c.effects.setTransition(j,g,n.to.y,j.to)),n.from.x!==n.to.x&&(j.from=c.effects.setTransition(j,p,n.from.x,j.from),j.to=c.effects.setTransition(j,p,n.to.x,j.to)),j.css(j.from),j.animate(j.to,v.duration,v.easing,function(){h&&c.effects.restore(j,m)})})}y.animate(y.to,{queue:!1,duration:v.duration,easing:v.easing,complete:function(){y.to.opacity===0&&y.css("opacity",y.from.opacity),f==="hide"&&y.hide(),c.effects.restore(y,P),h||(o==="static"?y.css({position:"relative",top:y.to.top,left:y.to.left}):c.each(["top","left"],function(j,k){y.css(k,function(x,q){var w=parseInt(q,10),z=j?y.to.left:y.to.top;return q==="auto"?z+"px":w+z+"px"})})),c.effects.removeWrapper(y),u()}})}})(jQuery);(function(c,d){c.effects.effect.shake=function(u,t){var h=c(this),p=["position","top","bottom","left","right","height","width"],m=c.effects.setMode(h,u.mode||"effect"),v=u.direction||"left",y=u.distance||20,a=u.times||3,l=a*2+1,r=Math.round(u.duration/l),f=v==="up"||v==="down"?"top":"left",o=v==="up"||v==="left",b={},g={},N={},s,n=h.queue(),O=n.length;c.effects.save(h,p),h.show(),c.effects.createWrapper(h),b[f]=(o?"-=":"+=")+y,g[f]=(o?"+=":"-=")+y*2,N[f]=(o?"-=":"+=")+y*2,h.animate(b,r,u.easing);for(s=1;s<a;s++){h.animate(g,r,u.easing).animate(N,r,u.easing)}h.animate(g,r,u.easing).animate(b,r/2,u.easing).queue(function(){m==="hide"&&h.hide(),c.effects.restore(h,p),c.effects.removeWrapper(h),t()}),O>1&&n.splice.apply(n,[1,0].concat(n.splice(O,l+1))),h.dequeue()}})(jQuery);(function(c,d){c.effects.effect.slide=function(x,r){var t=c(this),n=["position","top","bottom","left","right","width","height"],u=c.effects.setMode(t,x.mode||"show"),s=u==="show",a=x.direction||"left",b=a==="up"||a==="down"?"top":"left",l=a==="up"||a==="left",o,f={};c.effects.save(t,n),t.show(),o=x.distance||t[b==="top"?"outerHeight":"outerWidth"](!0),c.effects.createWrapper(t).css({overflow:"hidden"}),s&&t.css(b,l?isNaN(o)?"-"+o:-o:o),f[b]=(s?l?"+=":"-=":l?"-=":"+=")+o,t.animate(f,{queue:!1,duration:x.duration,easing:x.easing,complete:function(){u==="hide"&&t.hide(),c.effects.restore(t,n),c.effects.removeWrapper(t),r()}})}})(jQuery);(function(c,d){c.effects.effect.transfer=function(t,n){var r=c(this),h=c(t.to),s=h.css("position")==="fixed",o=c("body"),u=s?o.scrollTop():0,z=s?o.scrollLeft():0,b=h.offset(),l={top:b.top-u,left:b.left-z,height:h.innerHeight(),width:h.innerWidth()},a=r.offset(),f=c('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.className).css({top:a.top-u,left:a.left-z,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){f.remove(),n()})}})(jQuery);var SWFUpload;var swfobject;if(SWFUpload==undefined){SWFUpload=function(b){this.initSWFUpload(b)}}SWFUpload.prototype.initSWFUpload=function(c){try{this.customSettings={};this.settings={};this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings(c);this.loadSupport();if(this.swfuploadPreload()){this.loadFlash()}this.displayDebugInfo()}catch(d){delete SWFUpload.instances[this.movieName];throw d}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.5.0 2010-01-15 Beta 2";SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290,RESIZE:-300};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};SWFUpload.UPLOAD_TYPE={NORMAL:-1,RESIZED:-2};SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120,JAVASCRIPT:-130,NONE:-130};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.RESIZE_ENCODING={JPEG:-1,PNG:-2};SWFUpload.completeURL=function(g){try{var h="",j=-1;if(typeof(g)!=="string"||g.match(/^https?:\/\//i)||g.match(/^\//)||g===""){return g}j=window.location.pathname.lastIndexOf("/");if(j<=0){h="/"}else{h=window.location.pathname.substr(0,j)+"/"}return h+g}catch(f){return g}};SWFUpload.onload=function(){};SWFUpload.prototype.initSettings=function(b){this.ensureDefault=function(g,a){var f=b[g];if(f!=undefined){this.settings[g]=f}else{this.settings[g]=a}};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types","*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("flash9_url","swfupload_fp9.swf");this.ensureDefault("prevent_swf_caching",false);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_preload_handler",null);this.ensureDefault("swfupload_load_failed_handler",null);this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_resize_start_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("mouse_click_handler",null);this.ensureDefault("mouse_out_handler",null);this.ensureDefault("mouse_over_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(!!this.settings.prevent_swf_caching){this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime();this.settings.flash9_url=this.settings.flash9_url+(this.settings.flash9_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+new Date().getTime()}if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)}delete this.ensureDefault};SWFUpload.prototype.loadSupport=function(){this.support={loading:swfobject.hasFlashPlayerVersion("9.0.28"),imageResize:swfobject.hasFlashPlayerVersion("10.0.0")}};SWFUpload.prototype.loadFlash=function(){var g,j,k,h,l;if(!this.support.loading){this.queueEvent("swfupload_load_failed_handler",["Flash Player doesn't support SWFUpload"]);return}if(document.getElementById(this.movieName)!==null){this.support.loading=false;this.queueEvent("swfupload_load_failed_handler",["Element ID already in use"]);return}g=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(g==undefined){this.support.loading=false;this.queueEvent("swfupload_load_failed_handler",["button place holder not found"]);return}k=(g.currentStyle&&g.currentStyle.display||window.getComputedStyle&&document.defaultView.getComputedStyle(g,null).getPropertyValue("display"))!=="block"?"span":"div";j=document.createElement(k);h=this.getFlashHTML();try{j.innerHTML=h}catch(m){this.support.loading=false;this.queueEvent("swfupload_load_failed_handler",["Exception loading Flash HTML into placeholder"]);return}l=j.getElementsByTagName("object");if(!l||l.length>1||l.length===0){this.support.loading=false;this.queueEvent("swfupload_load_failed_handler",["Unable to find movie after adding to DOM"]);return}else{if(l.length===1){this.movieElement=l[0]}}g.parentNode.replaceChild(j.firstChild,g);if(window[this.movieName]==undefined){window[this.movieName]=this.getMovieElement()}};SWFUpload.prototype.getFlashHTML=function(b){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',(this.support.imageResize?this.settings.flash_url:this.settings.flash9_url),'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',(this.support.imageResize?this.settings.flash_url:this.settings.flash9_url),'" />','<param name="quality" value="high" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")};SWFUpload.prototype.getFlashVars=function(){var d,c;c=this.buildParamString();d=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(d),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(c),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined){this.movieElement=document.getElementById(this.movieName)}if(this.movieElement===null){throw"Could not find Flash element"}return this.movieElement};SWFUpload.prototype.buildParamString=function(){var f,g,d=[];g=this.settings.post_params;if(typeof(g)==="object"){for(f in g){if(g.hasOwnProperty(f)){d.push(encodeURIComponent(f.toString())+"="+encodeURIComponent(g[f].toString()))}}}return d.join("&amp;")};SWFUpload.prototype.destroy=function(){var f;try{this.cancelUpload(null,false);f=this.cleanUp();if(f){try{f.parentNode.removeChild(f)}catch(d){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieElement=null;this.settings=null;this.customSettings=null;this.eventQueue=null;this.movieName=null;return true}catch(g){return false}};SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","flash9_url:                ",this.settings.flash9_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",(this.settings.button_placeholder?"Set":"Not Set"),"\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_cursor:            ",this.settings.button_cursor.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_preload_handler assigned:  ",(typeof this.settings.swfupload_preload_handler==="function").toString(),"\n","\t","swfupload_load_failed_handler assigned:  ",(typeof this.settings.swfupload_load_failed_handler==="function").toString(),"\n","\t","swfupload_loaded_handler assigned:  ",(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n","\t","mouse_click_handler assigned:       ",(typeof this.settings.mouse_click_handler==="function").toString(),"\n","\t","mouse_over_handler assigned:        ",(typeof this.settings.mouse_over_handler==="function").toString(),"\n","\t","mouse_out_handler assigned:         ",(typeof this.settings.mouse_out_handler==="function").toString(),"\n","\t","file_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n","\t","file_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n","\t","file_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n","\t","upload_resize_start_handler assigned:      ",(typeof this.settings.upload_resize_start_handler==="function").toString(),"\n","\t","upload_start_handler assigned:      ",(typeof this.settings.upload_start_handler==="function").toString(),"\n","\t","upload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n","\t","upload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n","\t","upload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n","\t","upload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n","\t","debug_handler assigned:             ",(typeof this.settings.debug_handler==="function").toString(),"\n","Support:\n","\t","Load:                     ",(this.support.loading?"Yes":"No"),"\n","\t","Image Resize:             ",(this.support.imageResize?"Yes":"No"),"\n"].join(""))};SWFUpload.prototype.addSetting=function(d,g,f){if(g==undefined){return(this.settings[d]=f)}else{return(this.settings[d]=g)}};SWFUpload.prototype.getSetting=function(b){if(this.settings[b]!=undefined){return this.settings[b]}return""};SWFUpload.prototype.callFlash=function(functionName,argumentArray){var movieElement,returnValue,returnString;argumentArray=argumentArray||[];movieElement=this.getMovieElement();try{if(movieElement!=undefined){returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>");returnValue=eval(returnString)}else{this.debug("Can't call flash because the movie wasn't found.")}}catch(ex){this.debug("Exception calling flash function '"+functionName+"': "+ex.message)}if(returnValue!=undefined&&typeof returnValue.post==="object"){returnValue=this.unescapeFilePostParams(returnValue)}return returnValue};SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")};SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")};SWFUpload.prototype.startUpload=function(b){this.callFlash("StartUpload",[b])};SWFUpload.prototype.startResizedUpload=function(g,l,h,k,j,m){this.callFlash("StartUpload",[g,{width:l,height:h,encoding:k,quality:j,allowEnlarging:m}])};SWFUpload.prototype.cancelUpload=function(d,c){if(c!==false){c=true}this.callFlash("CancelUpload",[d,c])};SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")};SWFUpload.prototype.requeueUpload=function(b){return this.callFlash("RequeueUpload",[b])};SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")};SWFUpload.prototype.setStats=function(b){this.callFlash("SetStats",[b])};SWFUpload.prototype.getFile=function(b){if(typeof(b)==="number"){return this.callFlash("GetFileByIndex",[b])}else{return this.callFlash("GetFile",[b])}};SWFUpload.prototype.getQueueFile=function(b){if(typeof(b)==="number"){return this.callFlash("GetFileByQueueIndex",[b])}else{return this.callFlash("GetFile",[b])}};SWFUpload.prototype.addFileParam=function(f,d,g){return this.callFlash("AddFileParam",[f,d,g])};SWFUpload.prototype.removeFileParam=function(d,c){this.callFlash("RemoveFileParam",[d,c])};SWFUpload.prototype.setUploadURL=function(b){this.settings.upload_url=b.toString();this.callFlash("SetUploadURL",[b])};SWFUpload.prototype.setPostParams=function(b){this.settings.post_params=b;this.callFlash("SetPostParams",[b])};SWFUpload.prototype.addPostParam=function(d,c){this.settings.post_params[d]=c;this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.removePostParam=function(b){delete this.settings.post_params[b];this.callFlash("SetPostParams",[this.settings.post_params])};SWFUpload.prototype.setFileTypes=function(d,c){this.settings.file_types=d;this.settings.file_types_description=c;this.callFlash("SetFileTypes",[d,c])};SWFUpload.prototype.setFileSizeLimit=function(b){this.settings.file_size_limit=b;this.callFlash("SetFileSizeLimit",[b])};SWFUpload.prototype.setFileUploadLimit=function(b){this.settings.file_upload_limit=b;this.callFlash("SetFileUploadLimit",[b])};SWFUpload.prototype.setFileQueueLimit=function(b){this.settings.file_queue_limit=b;this.callFlash("SetFileQueueLimit",[b])};SWFUpload.prototype.setFilePostName=function(b){this.settings.file_post_name=b;this.callFlash("SetFilePostName",[b])};SWFUpload.prototype.setUseQueryString=function(b){this.settings.use_query_string=b;this.callFlash("SetUseQueryString",[b])};SWFUpload.prototype.setRequeueOnError=function(b){this.settings.requeue_on_error=b;this.callFlash("SetRequeueOnError",[b])};SWFUpload.prototype.setHTTPSuccess=function(b){if(typeof b==="string"){b=b.replace(" ","").split(",")}this.settings.http_success=b;this.callFlash("SetHTTPSuccess",[b])};SWFUpload.prototype.setAssumeSuccessTimeout=function(b){this.settings.assume_success_timeout=b;this.callFlash("SetAssumeSuccessTimeout",[b])};SWFUpload.prototype.setDebugEnabled=function(b){this.settings.debug_enabled=b;this.callFlash("SetDebugEnabled",[b])};SWFUpload.prototype.setButtonImageURL=function(b){if(b==undefined){b=""}this.settings.button_image_url=b;this.callFlash("SetButtonImageURL",[b])};SWFUpload.prototype.setButtonDimensions=function(g,f){this.settings.button_width=g;this.settings.button_height=f;var d=this.getMovieElement();if(d!=undefined){d.style.width=g+"px";d.style.height=f+"px"}this.callFlash("SetButtonDimensions",[g,f])};SWFUpload.prototype.setButtonText=function(b){this.settings.button_text=b;this.callFlash("SetButtonText",[b])};SWFUpload.prototype.setButtonTextPadding=function(c,d){this.settings.button_text_top_padding=d;this.settings.button_text_left_padding=c;this.callFlash("SetButtonTextPadding",[c,d])};SWFUpload.prototype.setButtonTextStyle=function(b){this.settings.button_text_style=b;this.callFlash("SetButtonTextStyle",[b])};SWFUpload.prototype.setButtonDisabled=function(b){this.settings.button_disabled=b;this.callFlash("SetButtonDisabled",[b])};SWFUpload.prototype.setButtonAction=function(b){this.settings.button_action=b;this.callFlash("SetButtonAction",[b])};SWFUpload.prototype.setButtonCursor=function(b){this.settings.button_cursor=b;this.callFlash("SetButtonCursor",[b])};SWFUpload.prototype.queueEvent=function(d,g){var f=this;if(g==undefined){g=[]}else{if(!(g instanceof Array)){g=[g]}}if(typeof this.settings[d]==="function"){this.eventQueue.push(function(){this.settings[d].apply(this,g)});setTimeout(function(){f.executeNextEvent()},0)}else{if(this.settings[d]!==null){throw"Event handler "+d+" is unknown or is not a function"}}};SWFUpload.prototype.executeNextEvent=function(){var b=this.eventQueue?this.eventQueue.shift():null;if(typeof(b)==="function"){b.apply(this)}};SWFUpload.prototype.unescapeFilePostParams=function(m){var k=/[$]([0-9a-f]{4})/i,j={},l,h,g;if(m!=undefined){for(h in m.post){if(m.post.hasOwnProperty(h)){l=h;while((g=k.exec(l))!==null){l=l.replace(g[0],String.fromCharCode(parseInt("0x"+g[1],16)))}j[l]=m.post[h]}}m.post=j}return m};SWFUpload.prototype.swfuploadPreload=function(){var b;if(typeof this.settings.swfupload_preload_handler==="function"){b=this.settings.swfupload_preload_handler.call(this)}else{if(this.settings.swfupload_preload_handler!=undefined){throw"upload_start_handler must be a function"}}if(b===undefined){b=true}return !!b};SWFUpload.prototype.flashReady=function(){var b=this.cleanUp();if(!b){this.debug("Flash called back ready but the flash movie can't be found.");return}this.queueEvent("swfupload_loaded_handler")};SWFUpload.prototype.cleanUp=function(){var j,g=this.getMovieElement();try{if(g&&typeof(g.CallFunction)==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(j in g){try{if(typeof(g[j])==="function"&&j[0]<="Z"&&j[0]>="A"){g[j]=null}}catch(f){}}}}catch(h){}window.__flash__removeCallback=function(c,b){try{if(c){c[b]=null}}catch(a){}};return g};SWFUpload.prototype.mouseClick=function(){this.queueEvent("mouse_click_handler")};SWFUpload.prototype.mouseOver=function(){this.queueEvent("mouse_over_handler")};SWFUpload.prototype.mouseOut=function(){this.queueEvent("mouse_out_handler")};SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};SWFUpload.prototype.fileQueued=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("file_queued_handler",b)};SWFUpload.prototype.fileQueueError=function(f,g,d){f=this.unescapeFilePostParams(f);this.queueEvent("file_queue_error_handler",[f,g,d])};SWFUpload.prototype.fileDialogComplete=function(d,g,f){this.queueEvent("file_dialog_complete_handler",[d,g,f])};SWFUpload.prototype.uploadResizeStart=function(c,d){c=this.unescapeFilePostParams(c);this.queueEvent("upload_resize_start_handler",[c,d.width,d.height,d.encoding,d.quality])};SWFUpload.prototype.uploadStart=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("return_upload_start_handler",b)};SWFUpload.prototype.returnUploadStart=function(d){var c;if(typeof this.settings.upload_start_handler==="function"){d=this.unescapeFilePostParams(d);c=this.settings.upload_start_handler.call(this,d)}else{if(this.settings.upload_start_handler!=undefined){throw"upload_start_handler must be a function"}}if(c===undefined){c=true}c=!!c;this.callFlash("ReturnUploadStart",[c])};SWFUpload.prototype.uploadProgress=function(f,g,d){f=this.unescapeFilePostParams(f);this.queueEvent("upload_progress_handler",[f,g,d])};SWFUpload.prototype.uploadError=function(f,g,d){f=this.unescapeFilePostParams(f);this.queueEvent("upload_error_handler",[f,g,d])};SWFUpload.prototype.uploadSuccess=function(d,f,g){d=this.unescapeFilePostParams(d);this.queueEvent("upload_success_handler",[d,f,g])};SWFUpload.prototype.uploadComplete=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("upload_complete_handler",b)};SWFUpload.prototype.debug=function(b){this.queueEvent("debug_handler",b)};SWFUpload.prototype.debugMessage=function(j){var g,h,f;if(this.settings.debug){h=[];if(typeof j==="object"&&typeof j.name==="string"&&typeof j.message==="string"){for(f in j){if(j.hasOwnProperty(f)){h.push(f+": "+j[f])}}g=h.join("\n")||"";h=g.split("\n");g="EXCEPTION: "+h.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(g)}else{SWFUpload.Console.writeLine(j)}}};SWFUpload.Console={};SWFUpload.Console.writeLine=function(h){var f,g;try{f=document.getElementById("SWFUpload_Console");if(!f){g=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(g);f=document.createElement("textarea");f.id="SWFUpload_Console";f.style.fontFamily="monospace";f.setAttribute("wrap","off");f.wrap="off";f.style.overflow="auto";f.style.width="700px";f.style.height="350px";f.style.margin="5px";g.appendChild(f)}f.value+=h+"\n";f.scrollTop=f.scrollHeight-f.clientHeight}catch(j){alert("Exception: "+j.name+" Message: "+j.message)}};swfobject=function(){var n="undefined",aa="object",C="Shockwave Flash",f="ShockwaveFlash.ShockwaveFlash",W="application/x-shockwave-flash",B="SWFObjectExprInst",g="onreadystatechange",y=window,P=document,ac=navigator,D=false,a=[N],U=[],x=[],s=[],R,A,o,l,t=false,E=false,T,q,S=true,w=function(){var al=typeof P.getElementById!=n&&typeof P.getElementsByTagName!=n&&typeof P.createElement!=n,ah=ac.userAgent.toLowerCase(),aj=ac.platform.toLowerCase(),ae=aj?/win/.test(aj):/win/.test(ah),Y=aj?/mac/.test(aj):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ai=!+"\v1",ag=[0,0,0],X=null;if(typeof ac.plugins!=n&&typeof ac.plugins[C]==aa){X=ac.plugins[C].description;if(X&&!(typeof ac.mimeTypes!=n&&ac.mimeTypes[W]&&!ac.mimeTypes[W].enabledPlugin)){D=true;ai=false;X=X.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(X.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(X.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(X)?parseInt(X.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof y.ActiveXObject!=n){try{var Z=new ActiveXObject(f);if(Z){X=Z.GetVariable("$version");if(X){ai=true;X=X.split(" ")[1].split(",");ag=[parseInt(X[0],10),parseInt(X[1],10),parseInt(X[2],10)]}}}catch(ak){}}}return{w3:al,pv:ag,wk:af,ie:ai,win:ae,mac:Y}}(),Q=function(){if(!w.w3){return}if((typeof P.readyState!=n&&P.readyState=="complete")||(typeof P.readyState==n&&(P.getElementsByTagName("body")[0]||P.body))){J()}if(!t){if(typeof P.addEventListener!=n){P.addEventListener("DOMContentLoaded",J,false)}if(w.ie&&w.win){P.attachEvent(g,function(){if(P.readyState=="complete"){P.detachEvent(g,arguments.callee);J()}});if(y==top){(function(){if(t){return}try{P.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}J()})()}}if(w.wk){(function(){if(t){return}if(!/loaded|complete/.test(P.readyState)){setTimeout(arguments.callee,0);return}J()})()}ab(J)}}();function J(){if(t){return}try{var X=P.getElementsByTagName("body")[0].appendChild(m("span"));X.parentNode.removeChild(X)}catch(Y){return}t=true;var Z=a.length;for(var ae=0;ae<Z;ae++){a[ae]()}}function u(X){if(t){X()}else{a[a.length]=X}}function ab(Y){if(typeof y.addEventListener!=n){y.addEventListener("load",Y,false)}else{if(typeof P.addEventListener!=n){P.addEventListener("load",Y,false)}else{if(typeof y.attachEvent!=n){O(y,"onload",Y)}else{if(typeof y.onload=="function"){var X=y.onload;y.onload=function(){X();Y()}}else{y.onload=Y}}}}}function N(){if(D){c()}else{r()}}function c(){var Z=P.getElementsByTagName("body")[0];var X=m(aa);X.setAttribute("type",W);var Y=Z.appendChild(X);if(Y){var ae=0;(function(){if(typeof Y.GetVariable!=n){var af=Y.GetVariable("$version");if(af){af=af.split(" ")[1].split(",");w.pv=[parseInt(af[0],10),parseInt(af[1],10),parseInt(af[2],10)]}}else{if(ae<10){ae++;setTimeout(arguments.callee,10);return}}Z.removeChild(X);Y=null;r()})()}else{r()}}function r(){var ag=U.length;if(ag>0){for(var af=0;af<ag;af++){var ak=U[af].id;var X=U[af].callbackFn;var am={success:false,id:ak};if(w.pv[0]>0){var ae=G(ak);if(ae){if(p(U[af].swfVersion)&&!(w.wk&&w.wk<312)){d(ak,true);if(X){am.success=true;am.ref=j(ak);X(am)}}else{if(U[af].expressInstall&&k()){var ai={};ai.data=U[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var aj=ae.getElementsByTagName("param");var Y=aj.length;for(var Z=0;Z<Y;Z++){if(aj[Z].getAttribute("name").toLowerCase()!="movie"){ah[aj[Z].getAttribute("name")]=aj[Z].getAttribute("value")}}z(ai,ah,ak,X)}else{V(ae);if(X){X(am)}}}}}else{d(ak,true);if(X){var al=j(ak);if(al&&typeof al.SetVariable!=n){am.success=true;am.ref=al}X(am)}}}}}function j(X){var Z=null;var ae=G(X);if(ae&&ae.nodeName=="OBJECT"){if(typeof ae.SetVariable!=n){Z=ae}else{var Y=ae.getElementsByTagName(aa)[0];if(Y){Z=Y}}}return Z}function k(){return !E&&p("6.0.65")&&(w.win||w.mac)&&!(w.wk&&w.wk<312)}function z(af,ah,Z,ag){E=true;o=ag||null;l={success:false,id:Z};var Y=G(Z);if(Y){if(Y.nodeName=="OBJECT"){R=L(Y);A=null}else{R=Y;A=Z}af.id=B;if(typeof af.width==n||(!/%$/.test(af.width)&&parseInt(af.width,10)<310)){af.width="310"}if(typeof af.height==n||(!/%$/.test(af.height)&&parseInt(af.height,10)<137)){af.height="137"}P.title=P.title.slice(0,47)+" - Flash Player Installation";var X=w.ie&&w.win?"ActiveX":"PlugIn",ai="MMredirectURL="+y.location.toString().replace(/&/g,"%26")+"&MMplayerType="+X+"&MMdoctitle="+P.title;if(typeof ah.flashvars!=n){ah.flashvars+="&"+ai}else{ah.flashvars=ai}if(w.ie&&w.win&&Y.readyState!=4){var ae=m("div");Z+="SWFObjectNew";ae.setAttribute("id",Z);Y.parentNode.insertBefore(ae,Y);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}ad(af,ah,Z)}}function V(Y){if(w.ie&&w.win&&Y.readyState!=4){var X=m("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(L(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(L(Y),Y)}}function L(X){var af=m("div");if(w.win&&w.ie){af.innerHTML=X.innerHTML}else{var ae=X.getElementsByTagName(aa)[0];if(ae){var Y=ae.childNodes;if(Y){var Z=Y.length;for(var ag=0;ag<Z;ag++){if(!(Y[ag].nodeType==1&&Y[ag].nodeName=="PARAM")&&!(Y[ag].nodeType==8)){af.appendChild(Y[ag].cloneNode(true))}}}}}return af}function ad(ai,ag,ak){var aj,am=G(ak);if(w.wk&&w.wk<312){return aj}if(am){if(typeof ai.id==n){ai.id=ak}if(w.ie&&w.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var Z in ag){if(ag[Z]!=Object.prototype[Z]){af+='<param name="'+Z+'" value="'+ag[Z]+'" />'}}am.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";x[x.length]=ai.id;aj=G(ai.id)}else{var al=m(aa);al.setAttribute("type",W);for(var Y in ai){if(ai[Y]!=Object.prototype[Y]){if(Y.toLowerCase()=="styleclass"){al.setAttribute("class",ai[Y])}else{if(Y.toLowerCase()!="classid"){al.setAttribute(Y,ai[Y])}}}}for(var X in ag){if(ag[X]!=Object.prototype[X]&&X.toLowerCase()!="movie"){I(al,X,ag[X])}}am.parentNode.replaceChild(al,am);aj=al}}return aj}function I(X,Z,ae){var Y=m("param");Y.setAttribute("name",Z);Y.setAttribute("value",ae);X.appendChild(Y)}function h(Y){var X=G(Y);if(X&&X.nodeName=="OBJECT"){if(w.ie&&w.win){X.style.display="none";(function(){if(X.readyState==4){F(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function F(Y){var X=G(Y);if(X){for(var Z in X){if(typeof X[Z]=="function"){X[Z]=null}}X.parentNode.removeChild(X)}}function G(Y){var Z=null;try{Z=P.getElementById(Y)}catch(X){}return Z}function m(X){return P.createElement(X)}function O(Y,Z,X){Y.attachEvent(Z,X);s[s.length]=[Y,Z,X]}function p(Y){var X=w.pv,Z=Y.split(".");Z[0]=parseInt(Z[0],10);Z[1]=parseInt(Z[1],10)||0;Z[2]=parseInt(Z[2],10)||0;return(X[0]>Z[0]||(X[0]==Z[0]&&X[1]>Z[1])||(X[0]==Z[0]&&X[1]==Z[1]&&X[2]>=Z[2]))?true:false}function b(X,ae,Y,ah){if(w.ie&&w.mac){return}var af=P.getElementsByTagName("head")[0];if(!af){return}var Z=(Y&&typeof Y=="string")?Y:"screen";if(ah){T=null;q=null}if(!T||q!=Z){var ag=m("style");ag.setAttribute("type","text/css");ag.setAttribute("media",Z);T=af.appendChild(ag);if(w.ie&&w.win&&typeof P.styleSheets!=n&&P.styleSheets.length>0){T=P.styleSheets[P.styleSheets.length-1]}q=Z}if(w.ie&&w.win){if(T&&typeof T.addRule==aa){T.addRule(X,ae)}}else{if(T&&typeof P.createTextNode!=n){T.appendChild(P.createTextNode(X+" {"+ae+"}"))}}}function d(Y,Z){if(!S){return}var X=Z?"visible":"hidden";if(t&&G(Y)){G(Y).style.visibility=X}else{b("#"+Y,"visibility:"+X)}}function v(X){var Y=/[\\\"<>\.;]/;var Z=Y.exec(X)!=null;return Z&&typeof encodeURIComponent!=n?encodeURIComponent(X):X}var H=function(){if(w.ie&&w.win){window.attachEvent("onunload",function(){var Y=s.length;for(var X=0;X<Y;X++){s[X][0].detachEvent(s[X][1],s[X][2])}var af=x.length;for(var ag=0;ag<af;ag++){h(x[ag])}for(var ae in w){w[ae]=null}w=null;for(var Z in swfobject){swfobject[Z]=null}swfobject=null})}}();return{registerObject:function(Y,Z,af,X){if(w.w3&&Y&&Z){var ae={};ae.id=Y;ae.swfVersion=Z;ae.expressInstall=af;ae.callbackFn=X;U[U.length]=ae;d(Y,false)}else{if(X){X({success:false,id:Y})}}},getObjectById:function(X){if(w.w3){return j(X)}},embedSWF:function(X,ah,ae,ag,aj,al,ak,Z,af,Y){var ai={success:false,id:ah};if(w.w3&&!(w.wk&&w.wk<312)&&X&&ah&&ae&&ag&&aj){d(ah,false);u(function(){ae+="";ag+="";var ao={};if(af&&typeof af===aa){for(var aq in af){ao[aq]=af[aq]}}ao.data=X;ao.width=ae;ao.height=ag;var ar={};if(Z&&typeof Z===aa){for(var ap in Z){ar[ap]=Z[ap]}}if(ak&&typeof ak===aa){for(var an in ak){if(typeof ar.flashvars!=n){ar.flashvars+="&"+an+"="+ak[an]}else{ar.flashvars=an+"="+ak[an]}}}if(p(aj)){var am=ad(ao,ar,ah);if(ao.id==ah){d(ah,true)}ai.success=true;ai.ref=am}else{if(al&&k()){ao.data=al;z(ao,ar,ah,Y);return}else{d(ah,true)}}if(Y){Y(ai)}})}else{if(Y){Y(ai)}}},switchOffAutoHideShow:function(){S=false},ua:w,getFlashPlayerVersion:function(){return{major:w.pv[0],minor:w.pv[1],release:w.pv[2]}},hasFlashPlayerVersion:p,createSWF:function(Y,X,Z){if(w.w3){return ad(Y,X,Z)}else{return undefined}},showExpressInstall:function(X,Y,Z,ae){if(w.w3&&k()){z(X,Y,Z,ae)}},removeSWF:function(X){if(w.w3){h(X)}},createCSS:function(X,Y,ae,Z){if(w.w3){b(X,Y,ae,Z)}},addDomLoadEvent:u,addLoadEvent:ab,getQueryParamValue:function(X){var Y=P.location.search||P.location.hash;if(Y){if(/\?/.test(Y)){Y=Y.split("?")[1]}if(X==null){return v(Y)}var ae=Y.split("&");for(var Z=0;Z<ae.length;Z++){if(ae[Z].substring(0,ae[Z].indexOf("="))==X){return v(ae[Z].substring((ae[Z].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(E){var X=G(B);if(X&&R){X.parentNode.replaceChild(R,X);if(A){d(A,true);if(w.ie&&w.win){R.style.display="block"}}if(o){o(l)}}E=false}}}}();swfobject.addDomLoadEvent(function(){if(typeof(SWFUpload.onload)==="function"){SWFUpload.onload.call(window)}});$.fn.group_side_slider=function(a){var b=$(this);$.get("/group/groups.php?action=get_slide_html&gid="+a,{},function(d){b.html(d);var f=b.find("#slide_btn");var c=b.find(".slide-img");f.find("span").click(function(){var h=$(this);if(h.hasClass("on")){return}h.siblings(".on").removeClass("on");h.addClass("on");var g=parseInt(h.text())-1;c.find("li").hide();c.find("li:eq("+g+")").fadeIn(500)});setInterval(function(){var h=f.find("span.on");var g=h.next();if(g.length){g.trigger("click")}else{f.find("span:first").trigger("click")}},6000)})};$.fn.group_search=function(){var d=$(this);var b=' <form method="GET">                <div class="g_input"><input type="text" name="word"/></div>                <input type="hidden" name="type" value="0"/>                <input type="hidden" name="gid" value="{$group_id}"/>                <div class="g_type">                    <span class="selected">话题</span>                    <span class="item hide">小组</span>                    <i></i>                </div>                <div class="g_button"><input type="submit" value=""></div>            </form>';d.html(b);var c=d.find(".g_type");var a=d.find('input[name="type"]');c.mouseenter(function(){c.find("span.item").show()}).mouseleave(function(){c.find("span.item").hide()}).find(".item").click(function(){var f=c.find(".selected").text();c.find(".selected").text($(this).text());c.find(".item").text(f);$(this).hide()});d.find("form").submit(function(){var f=c.find(".selected").text();if(f=="小组"){$(this).attr("action","/group/glist.php");a.val(1)}else{$(this).attr("action","/group/searchresult.php");a.val(0)}})};